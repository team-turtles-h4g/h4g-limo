(self.webpackChunkh4g_limo=self.webpackChunkh4g_limo||[]).push([[9569],{19569:(e,r,a)=>{"use strict";a.r(r),a.d(r,{populateOperationalLayers:()=>d});var t=a(16304),y=a(42961),n=(a(12131),a(98154)),i=a(99844),l=a(18747),L=a(85121);function o(e,r){return u(e,r,"notes","Map Notes")}function c(e,r){return u(e,r,"route","Route Layer")}function u(e,r,a,t){return p.apply(this,arguments)}function p(){return(p=(0,t.Z)(function*(e,r,a,t){if(!e.layerType||"ArcGISFeatureLayer"!==e.layerType)return!1;if(e.url)return!1;if(e.featureCollectionType&&e.featureCollectionType===a)return!0;if(e.itemId){const a=new l.default({id:e.itemId,portal:r});return yield a.load(),"Feature Collection"===a.type&&(0,L._$)(a,t)}return!1})).apply(this,arguments)}var s=a(94024),S=a(58986);function d(e,r,a){return f.apply(this,arguments)}function f(){return(f=(0,t.Z)(function*(e,r,a){if(!r)return;const t=[];for(const n of r){const e=v(n,a);t.push("GroupLayer"===n.layerType?B(e,n,a):e)}const y=yield(0,n.as)(t);for(const n of y)!n.value||a.filter&&!a.filter(n.value)||e.add(n.value)})).apply(this,arguments)}const T={ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",PointCloudLayer:"PointCloudLayer",ArcGISSceneServiceLayer:"SceneLayer",IntegratedMeshLayer:"IntegratedMeshLayer",OGCFeatureLayer:"OGCFeatureLayer",BuildingSceneLayer:"BuildingSceneLayer",ArcGISTiledElevationServiceLayer:"ElevationLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",GroupLayer:"GroupLayer",WebTiledLayer:"WebTileLayer",CSV:"CSVLayer",VectorTileLayer:"VectorTileLayer",WFS:"WFSLayer",WMS:"WMSLayer",DefaultTileLayer:"TileLayer",KML:"KMLLayer",RasterDataLayer:"UnsupportedLayer",Voxel:"VoxelLayer"},I={ArcGISTiledElevationServiceLayer:"ElevationLayer",DefaultTileLayer:"ElevationLayer",RasterDataElevationLayer:"UnsupportedLayer"},g={ArcGISTiledMapServiceLayer:"TileLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",OpenStreetMap:"OpenStreetMapLayer",WebTiledLayer:"WebTileLayer",VectorTileLayer:"VectorTileLayer",ArcGISImageServiceLayer:"UnsupportedLayer",WMS:"UnsupportedLayer",ArcGISMapServiceLayer:"UnsupportedLayer",DefaultTileLayer:"TileLayer"},M={ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISStreamLayer:"StreamLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",BingMapsAerial:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",CSV:"CSVLayer",DefaultTileLayer:"TileLayer",GeoRSS:"GeoRSSLayer",GroupLayer:"GroupLayer",KML:"KMLLayer",OGCFeatureLayer:"OGCFeatureLayer",SubtypeGroupLayer:"UnsupportedLayer",VectorTileLayer:"VectorTileLayer",WFS:"WFSLayer",WMS:"WMSLayer",WebTiledLayer:"WebTileLayer"},G={ArcGISFeatureLayer:"FeatureLayer"},m={ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",OpenStreetMap:"OpenStreetMapLayer",VectorTileLayer:"VectorTileLayer",WebTiledLayer:"WebTileLayer",BingMapsAerial:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",WMS:"WMSLayer",DefaultTileLayer:"TileLayer"};function v(e,r){return A.apply(this,arguments)}function A(){return(A=(0,t.Z)(function*(e,r){return h(yield C(e,r),e,r)})).apply(this,arguments)}function h(e,r,a){return b.apply(this,arguments)}function b(){return(b=(0,t.Z)(function*(e,r,a){const t=new e;return t.read(r,a.context),"group"===t.type&&W(r)&&(yield O(t,r,a.context)),yield(0,S.y)(t,a.context),t})).apply(this,arguments)}function C(e,r){return F.apply(this,arguments)}function F(){return(F=(0,t.Z)(function*(e,r){const a=r.context,t=V(a);let y=e.layerType||e.type;!y&&r&&r.defaultLayerType&&(y=r.defaultLayerType);const n=t[y];let L=n?i.T[n]:i.T.UnknownLayer;const u=a&&a.portal;if(w(e)){if(e.itemId){const r=new l.default({id:e.itemId,portal:u});yield r.load();const a=(yield(0,s.selectLayerClassPath)(r)).className||"UnknownLayer";L=i.T[a]}}else"ArcGISFeatureLayer"===y?(yield o(e,u))?L=i.T.MapNotesLayer:(yield c(e,u))?L=i.T.RouteLayer:W(e)&&(L=i.T.GroupLayer):e.wmtsInfo&&e.wmtsInfo.url&&e.wmtsInfo.layerIdentifier?L=i.T.WMTSLayer:"WFS"===y&&"2.0.0"!==e.wfsInfo.version&&(L=i.T.UnsupportedLayer);return L()})).apply(this,arguments)}function W(e){if("ArcGISFeatureLayer"!==e.layerType||w(e))return!1;const r=e.featureCollection;return!!(r&&r.layers&&r.layers.length>1)}function w(e){return"Feature Collection"===e.type}function V(e){let r;if("web-scene"===e.origin)switch(e.layerContainerType){case"basemap":r=g;break;case"ground":r=I;break;default:r=T}else switch(e.layerContainerType){case"basemap":r=m;break;case"tables":r=G;break;default:r=M}return r}function B(e,r,a){return k.apply(this,arguments)}function k(){return(k=(0,t.Z)(function*(e,r,a){const t=new y.Z,n=d(t,Array.isArray(r.layers)?r.layers:[],a),i=yield e;if(yield n,"group"===i.type)return i.layers.addMany(t),i})).apply(this,arguments)}function O(e,r,a){return U.apply(this,arguments)}function U(){return(U=(0,t.Z)(function*(e,r,a){const t=i.T.FeatureLayer,y=yield t(),n=r.featureCollection,l=n.showLegend,L=n.layers.map(e=>{const r=new y;return r.read(e,a),null!=l&&r.read({showLegend:l},a),r});e.layers.addMany(L)})).apply(this,arguments)}}}]);