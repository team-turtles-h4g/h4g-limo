(self.webpackChunkh4g_limo=self.webpackChunkh4g_limo||[]).push([[5039],{85039:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>$});var i,o=r(16304),n=r(8651),s=(r(42851),r(82772)),l=(r(67929),r(48548),r(10767),r(77167),r(34438),r(28079)),a=r(88292),d=r(59719),p=r(87765),u=r(93668),y=r(75737),c=r(2747),f=r(6573),b=r(18419),m=r(54704),h=r(67372),v=r(98154),g=r(46942),w=(r(12131),r(47648)),_=r(41460),S=r(8680),I=r(66081),C=r(89010),R=r(3734),x=r(3523),j=r(43839),F=r(68141),T=r(83727),Z=r(20174),D=r(69265),k=r(37001),O=r(26429),N=r(17788),P=r(83135),E=r(74474),L=r(21550),W=r(43628),U=r(52067),A=r(49533);let G=i=class extends A.wq{constructor(){super(...arguments),this.age=null,this.ageReceived=null,this.displayCount=null,this.maxObservations=1}clone(){return new i({age:this.age,ageReceived:this.ageReceived,displayCount:this.displayCount,maxObservations:this.maxObservations})}};(0,n._)([(0,g.Cb)({type:Number,json:{write:!0}})],G.prototype,"age",void 0),(0,n._)([(0,g.Cb)({type:Number,json:{write:!0}})],G.prototype,"ageReceived",void 0),(0,n._)([(0,g.Cb)({type:Number,json:{write:!0}})],G.prototype,"displayCount",void 0),(0,n._)([(0,g.Cb)({type:Number,json:{write:!0}})],G.prototype,"maxObservations",void 0),G=i=(0,n._)([(0,S.j)("esri.layers.support.PurgeOptions")],G);var J=G,q=r(58986),z=r(65669),Q=r(524),M=r(55146),V=r(2379),Y=r(95046);const H=b.Z.getLogger("esri.layers.StreamLayer"),B=(0,E.v)();let K=class extends((0,F.h)((0,O.n)((0,k.M)((0,D.Q)((0,j.Y)((0,T.q)((0,Z.I)((0,h.R)(x.Z))))))))){constructor(...e){super(...e),this.copyright=null,this.definitionExpression=null,this.displayField=null,this.elevationInfo=null,this.featureReduction=null,this.fields=null,this.fieldsIndex=null,this.geometryDefinition=null,this.geometryType=null,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.maxReconnectionAttempts=0,this.maxReconnectionInterval=20,this.maxScale=0,this.minScale=0,this.objectIdField=null,this.operationalLayerType="ArcGISStreamLayer",this.popupEnabled=!0,this.popupTemplate=null,this.purgeOptions=new J,this.screenSizePerspectiveEnabled=!0,this.sourceJSON=null,this.spatialReference=V.Z.WGS84,this.type="stream",this.url=null,this.updateInterval=300,this.webSocketUrl=null}normalizeCtorArgs(e,t){return"string"==typeof e?{url:e,...t}:e}load(e){if(!("WebSocket"in f.Z))return this.addResolvingPromise(Promise.reject(new c.Z("stream-layer:websocket-unsupported","WebSocket is not supported in this browser. StreamLayer will not have real-time connection with the stream service."))),Promise.resolve(this);const t=(0,m.pC)(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Stream Service","Feed"]},e).catch(v.r9).then(()=>this._fetchService(t))),Promise.resolve(this)}get defaultPopupTemplate(){return this.createPopupTemplate()}readFeatureReduction(e,t){return(0,P.ij)(e,t)}writeWebSceneFeatureReduction(e,t,r,i){(0,P.Q6)(e,t,"layerDefinition.featureReduction",i)}set renderer(e){(0,L.YN)(e,this.fieldsIndex),this._set("renderer",e)}readRenderer(e,t,r){const i=(t=t.layerDefinition||t).drawingInfo&&t.drawingInfo.renderer||void 0;if(i){const e=(0,d.ij)(i,t,r)||void 0;return e||H.error("Failed to create renderer",{rendererDefinition:t.drawingInfo.renderer,layer:this,context:r}),e}if(t.defaultSymbol)return t.types&&t.types.length?new a.Z({defaultSymbol:X(t.defaultSymbol,t,r),field:t.typeIdField,uniqueValueInfos:t.types.map(e=>({id:e.id,symbol:X(e.symbol,e,r)}))}):new l.Z({symbol:X(t.defaultSymbol,t,r)})}writeRenderer(e,t,r,i){(0,d.cW)(e,t,r,i)}writeWebSceneRenderer(e,t,r,i){(0,d.cW)(e,t,"layerDefinition.drawingInfo.renderer",i)}createPopupTemplate(e){return(0,Q.eZ)(this,e)}createQuery(){const e=new z.Z;return e.returnGeometry=!0,e.outFields=["*"],e.where=this.definitionExpression||"1=1",e}getFieldDomain(e,t){if(!this.fields)return null;let r=null;return this.fields.some(t=>(t.name===e&&(r=t.domain),!!r)),r}getField(e){return this.fieldsIndex.get(e)}_fetchService(e){var t=this;return(0,o.Z)(function*(){var r;if(t.webSocketUrl){var i;if(null==(i=t.timeInfo)||!i.trackIdField)throw new c.Z("stream-layer:missing-metadata","The stream layer trackIdField must be specified.");if(!t.objectIdField)throw new c.Z("stream-layer:missing-metadata","The stream layer objectIdField must be specified.");if(!t.fields)throw new c.Z("stream-layer:missing-metadata","The stream layer fields must be specified.");if(!t.geometryType)throw new c.Z("stream-layer:missing-metadata","The stream layer geometryType must be specified.");t.url=t.webSocketUrl}else if(!t.sourceJSON){const{data:r}=yield(0,u.default)(t.parsedUrl.path,{query:{f:"json",...t.parsedUrl.query},responseType:"json",signal:e});t.sourceJSON=r}return t.sourceJSON={...null!=(r=t.sourceJSON)?r:{},objectIdField:"__esri_stream_id__"},t.read(t.sourceJSON,{origin:"service",url:t.parsedUrl}),(0,L.YN)(t.renderer,t.fieldsIndex),(0,L.UF)(t.timeInfo,t.fieldsIndex),(0,q.y)(t,{origin:"service"})})()}};(0,n._)([(0,g.Cb)({type:String})],K.prototype,"copyright",void 0),(0,n._)([(0,g.Cb)({readOnly:!0})],K.prototype,"defaultPopupTemplate",null),(0,n._)([(0,g.Cb)({type:String,json:{name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],K.prototype,"definitionExpression",void 0),(0,n._)([(0,g.Cb)({type:String})],K.prototype,"displayField",void 0),(0,n._)([(0,g.Cb)({type:M.Z})],K.prototype,"elevationInfo",void 0),(0,n._)([(0,_.r)("featureReduction",["layerDefinition.featureReduction"])],K.prototype,"readFeatureReduction",null),(0,n._)([(0,I.c)("web-scene","featureReduction",{"layerDefinition.featureReduction":{types:P.Gx}})],K.prototype,"writeWebSceneFeatureReduction",null),(0,n._)([(0,g.Cb)(B.fields)],K.prototype,"fields",void 0),(0,n._)([(0,g.Cb)(B.fieldsIndex)],K.prototype,"fieldsIndex",void 0),(0,n._)([(0,g.Cb)({type:Y.Z})],K.prototype,"geometryDefinition",void 0),(0,n._)([(0,g.Cb)({type:R.Mk.apiValues,json:{read:{reader:R.Mk.read}}})],K.prototype,"geometryType",void 0),(0,n._)([(0,g.Cb)(N.iR)],K.prototype,"labelsVisible",void 0),(0,n._)([(0,g.Cb)({type:[W.Z],json:{read:{source:"layerDefinition.drawingInfo.labelingInfo",reader:U.r},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}})],K.prototype,"labelingInfo",void 0),(0,n._)([(0,g.Cb)(N.rn)],K.prototype,"legendEnabled",void 0),(0,n._)([(0,g.Cb)({type:["show","hide"]})],K.prototype,"listMode",void 0),(0,n._)([(0,g.Cb)({type:w.z8})],K.prototype,"maxReconnectionAttempts",void 0),(0,n._)([(0,g.Cb)({type:w.z8})],K.prototype,"maxReconnectionInterval",void 0),(0,n._)([(0,g.Cb)(N.u1)],K.prototype,"maxScale",void 0),(0,n._)([(0,g.Cb)(N.rO)],K.prototype,"minScale",void 0),(0,n._)([(0,g.Cb)({type:String})],K.prototype,"objectIdField",void 0),(0,n._)([(0,g.Cb)({value:"ArcGISStreamLayer",type:["ArcGISStreamLayer"]})],K.prototype,"operationalLayerType",void 0),(0,n._)([(0,g.Cb)(N.C_)],K.prototype,"popupEnabled",void 0),(0,n._)([(0,g.Cb)({type:s.Z,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],K.prototype,"popupTemplate",void 0),(0,n._)([(0,g.Cb)({type:J})],K.prototype,"purgeOptions",void 0),(0,n._)([(0,g.Cb)({types:p.A,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}}},write:{target:"layerDefinition.drawingInfo.renderer"}}})],K.prototype,"renderer",null),(0,n._)([(0,_.r)("service","renderer",["drawingInfo.renderer","defaultSymbol"]),(0,_.r)("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],K.prototype,"readRenderer",null),(0,n._)([(0,I.c)("renderer")],K.prototype,"writeRenderer",null),(0,n._)([(0,I.c)("web-scene","renderer",{"layerDefinition.drawingInfo.renderer":{types:p.o}})],K.prototype,"writeWebSceneRenderer",null),(0,n._)([(0,g.Cb)(N.YI)],K.prototype,"screenSizePerspectiveEnabled",void 0),(0,n._)([(0,g.Cb)({type:V.Z,json:{origins:{service:{read:{source:"spatialReference"}}}}})],K.prototype,"spatialReference",void 0),(0,n._)([(0,g.Cb)({json:{read:!1}})],K.prototype,"type",void 0),(0,n._)([(0,g.Cb)(N.HQ)],K.prototype,"url",void 0),(0,n._)([(0,g.Cb)({type:Number})],K.prototype,"updateInterval",void 0),(0,n._)([(0,g.Cb)({type:String})],K.prototype,"webSocketUrl",void 0),K=(0,n._)([(0,S.j)("esri.layers.StreamLayer")],K);const X=(0,C.d)({types:y.QT});var $=K}}]);