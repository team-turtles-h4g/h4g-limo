(self.webpackChunkh4g_limo=self.webpackChunkh4g_limo||[]).push([[8592],{78965:(e,t,r)=>{"use strict";r.d(t,{A:()=>R,B:()=>j,C:()=>E,D:()=>P,E:()=>Z,F:()=>k,G:()=>N,H:()=>O,I:()=>D,J:()=>z,K:()=>B,a:()=>a,b:()=>l,c:()=>o,d:()=>u,e:()=>s,f:()=>c,g:()=>U,h:()=>p,i:()=>d,j:()=>m,k:()=>b,l:()=>x,m:()=>_,n:()=>w,o:()=>y,p:()=>C,q:()=>S,r:()=>g,s:()=>v,t:()=>h,u:()=>I,v:()=>T,w:()=>f,x:()=>A,y:()=>M,z:()=>F});var n=r(29677),i=r(70565);function s(e){return n.G.extendedSpatialReferenceInfo(e)}function o(e,t,r){return n.G.clip(i.N,e,t,r)}function a(e,t,r){return n.G.cut(i.N,e,t,r)}function l(e,t,r){return n.G.contains(i.N,e,t,r)}function u(e,t,r){return n.G.crosses(i.N,e,t,r)}function c(e,t,r,s){return n.G.distance(i.N,e,t,r,s)}function p(e,t,r){return n.G.equals(i.N,e,t,r)}function d(e,t,r){return n.G.intersects(i.N,e,t,r)}function h(e,t,r){return n.G.touches(i.N,e,t,r)}function f(e,t,r){return n.G.within(i.N,e,t,r)}function m(e,t,r){return n.G.disjoint(i.N,e,t,r)}function y(e,t,r){return n.G.overlaps(i.N,e,t,r)}function g(e,t,r,s){return n.G.relate(i.N,e,t,r,s)}function b(e,t){return n.G.isSimple(i.N,e,t)}function v(e,t){return n.G.simplify(i.N,e,t)}function x(e,t,r=!1){return n.G.convexHull(i.N,e,t,r)}function _(e,t,r){return n.G.difference(i.N,e,t,r)}function w(e,t,r){return n.G.symmetricDifference(i.N,e,t,r)}function C(e,t,r){return n.G.intersect(i.N,e,t,r)}function I(e,t,r=null){return n.G.union(i.N,e,t,r)}function S(e,t,r,s,o,a,l){return n.G.offset(i.N,e,t,r,s,o,a,l)}function T(e,t,r,s,o=!1){return n.G.buffer(i.N,e,t,r,s,o)}function A(e,t,r,s,o,a,l){return n.G.geodesicBuffer(i.N,e,t,r,s,o,a,l)}function M(e,t,r,s=!0){return n.G.nearestCoordinate(i.N,e,t,r,s)}function F(e,t,r){return n.G.nearestVertex(i.N,e,t,r)}function R(e,t,r,s,o){return n.G.nearestVertices(i.N,e,t,r,s,o)}function j(e,t,r,i){if(null==t||null==i)throw new Error("Illegal Argument Exception");const s=n.G.rotate(t,r,i);return s.spatialReference=e,s}function E(e,t,r){if(null==t||null==r)throw new Error("Illegal Argument Exception");const i=n.G.flipHorizontal(t,r);return i.spatialReference=e,i}function P(e,t,r){if(null==t||null==r)throw new Error("Illegal Argument Exception");const i=n.G.flipVertical(t,r);return i.spatialReference=e,i}function Z(e,t,r,s,o){return n.G.generalize(i.N,e,t,r,s,o)}function k(e,t,r,s){return n.G.densify(i.N,e,t,r,s)}function N(e,t,r,s,o=0){return n.G.geodesicDensify(i.N,e,t,r,s,o)}function O(e,t,r){return n.G.planarArea(i.N,e,t,r)}function D(e,t,r){return n.G.planarLength(i.N,e,t,r)}function z(e,t,r,s){return n.G.geodesicArea(i.N,e,t,r,s)}function B(e,t,r,s){return n.G.geodesicLength(i.N,e,t,r,s)}var U=Object.freeze({__proto__:null,extendedSpatialReferenceInfo:s,clip:o,cut:a,contains:l,crosses:u,distance:c,equals:p,intersects:d,touches:h,within:f,disjoint:m,overlaps:y,relate:g,isSimple:b,simplify:v,convexHull:x,difference:_,symmetricDifference:w,intersect:C,union:I,offset:S,buffer:T,geodesicBuffer:A,nearestCoordinate:M,nearestVertex:F,nearestVertices:R,rotate:j,flipHorizontal:E,flipVertical:P,generalize:Z,densify:k,geodesicDensify:N,planarArea:O,planarLength:D,geodesicArea:z,geodesicLength:B})},57295:(e,t,r)=>{"use strict";function n(){return new Float32Array(3)}function i(e,t,r){const n=new Float32Array(3);return n[0]=e,n[1]=t,n[2]=r,n}function s(){return n()}function o(){return i(1,1,1)}function a(){return i(1,0,0)}function l(){return i(0,1,0)}function u(){return i(0,0,1)}r.d(t,{c:()=>n,f:()=>i});const c=s(),p=o(),d=a(),h=l(),f=u();Object.freeze({__proto__:null,create:n,clone:function(e){const t=new Float32Array(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},fromValues:i,createView:function(e,t){return new Float32Array(e,t,3)},zeros:s,ones:o,unitX:a,unitY:l,unitZ:u,ZEROS:c,ONES:p,UNIT_X:d,UNIT_Y:h,UNIT_Z:f})},84433:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(54704);class i{constructor(e){this.size=0,this._start=0,this.maxSize=e,this._buffer=new Array(e)}get entries(){return this._buffer}enqueue(e){if(this.size===this.maxSize){const t=this._buffer[this._start];return this._buffer[this._start]=e,this._start=(this._start+1)%this.maxSize,t}return this._buffer[(this._start+this.size++)%this.maxSize]=e,null}dequeue(){if(0===this.size)return null;const e=this._buffer[this._start];return this._buffer[this._start]=null,this.size--,this._start=(this._start+1)%this.maxSize,e}peek(){return 0===this.size?null:this._buffer[this._start]}find(e){if(0===this.size)return null;for(const t of this._buffer)if((0,n.pC)(t)&&e(t))return t;return null}clear(e){let t=this.dequeue();for(;(0,n.pC)(t);)e&&e(t),t=this.dequeue()}}},56577:(e,t,r)=>{"use strict";r.d(t,{lt:()=>u,WU:()=>a,Qc:()=>c});var n=r(36434),i=r(35149);const s={ar:[".",","],bs:[",","."],ca:[",","."],cs:[",","\xa0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\xa0"],fi:[",","\xa0"],fr:[",","\u202f"],"fr-ch":[",","\u202f"],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[",","\xa0"],id:[",","."],it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],ko:[".",","],lt:[",","\xa0"],lv:[",","\xa0"],mk:[",","."],nb:[",","\xa0"],nl:[",","."],pl:[",","\xa0"],pt:[",","."],"pt-pt":[",","\xa0"],ro:[",","."],ru:[",","\xa0"],sk:[",","\xa0"],sl:[",","."],sr:[",","."],sv:[",","\xa0"],th:[".",","],tr:[",","."],uk:[",","\xa0"],vi:[",","."],zh:[".",","]};function o(e){e||(e=(0,i.Kd)());let t=e in s;if(!t){const r=e.split("-");r.length>1&&r[0]in s&&(e=r[0],t=!0),t||(e="en")}const[r,n,o="#,##0.###"]=s[e];return{decimal:r,group:n,pattern:o}}function a(e,t){const r=o((t={...t}).locale);t.customs=r;const n=t.pattern||r.pattern;return isNaN(e)||Math.abs(e)===1/0?null:function(e,t,r){const n=(r=r||{}).customs.group,i=r.customs.decimal,s=t.split(";"),o=s[0];if(-1!==(t=s[e<0?1:0]||"-"+o).indexOf("%"))e*=100;else if(-1!==t.indexOf("\u2030"))e*=1e3;else{if(-1!==t.indexOf("\xa4"))throw new Error("currency notation not supported");if(-1!==t.indexOf("E"))throw new Error("exponential notation not supported")}const a=l,u=o.match(a);if(!u)throw new Error("unable to find a number expression in pattern: "+t);return!1===r.fractional&&(r.places=0),t.replace(a,function(e,t,r){!0===(r=r||{}).places&&(r.places=0),r.places===1/0&&(r.places=6);const n=t.split("."),i="string"==typeof r.places&&r.places.indexOf(",");let s=r.places;i?s=r.places.substring(i+1):s>=0||(s=(n[1]||[]).length),r.round<0||(e=Number(e.toFixed(Number(s))));const o=String(Math.abs(e)).split("."),a=o[1]||"";if(n[1]||r.places){i&&(r.places=r.places.substring(0,i));const e=void 0!==r.places?r.places:n[1]&&n[1].lastIndexOf("0")+1;e>a.length&&(o[1]=a.padEnd(Number(e),"0")),s<a.length&&(o[1]=a.substr(0,Number(s)))}else o[1]&&o.pop();const l=n[0].replace(",","");let u=l.indexOf("0");-1!==u&&(u=l.length-u,u>o[0].length&&(o[0]=o[0].padStart(u,"0")),-1===l.indexOf("#")&&(o[0]=o[0].substr(o[0].length-u)));let c,p,d=n[0].lastIndexOf(",");if(-1!==d){c=n[0].length-d-1;const e=n[0].substr(0,d);d=e.lastIndexOf(","),-1!==d&&(p=e.length-d-1)}const h=[];for(let f=o[0];f;){const e=f.length-c;h.push(e>0?f.substr(e):f),f=e>0?f.slice(0,e):"",p&&(c=p,p=void 0)}return o[0]=h.reverse().join(r.group||","),o.join(r.decimal||".")}(e,u[0],{decimal:i,group:n,places:r.places,round:r.round}))}(e,n,t)}const l=/[#0,]*[#0](?:\.0*#*)?/;function u(e){const t=o((e=e||{}).locale),r=e.pattern||t.pattern,i=t.group,s=t.decimal;let a=1;if(-1!==r.indexOf("%"))a/=100;else if(-1!==r.indexOf("\u2030"))a/=1e3;else if(-1!==r.indexOf("\xa4"))throw new Error("currency notation not supported");const u=r.split(";");return 1===u.length&&u.push("-"+u[0]),{regexp:d(u,function(t){return(t="(?:"+(0,n.Qs)(t,".")+")").replace(l,function(t){const r={signed:!1,separator:e.strict?i:[i,""],fractional:e.fractional,decimal:s,exponent:!1},n=t.split(".");let o=e.places;1===n.length&&1!==a&&(n[1]="###"),1===n.length||0===o?r.fractional=!1:(void 0===o&&(o=e.pattern?n[1].lastIndexOf("0")+1:1/0),o&&null==e.fractional&&(r.fractional=!0),!e.places&&o<n[1].length&&(o+=","+n[1].length),r.places=o);const l=n[0].split(",");return l.length>1&&(r.groupSize=l.pop().length,l.length>1&&(r.groupSize2=l.pop().length)),"("+function(e){"places"in(e=e||{})||(e.places=1/0),"string"!=typeof e.decimal&&(e.decimal="."),"fractional"in e&&!/^0/.test(String(e.places))||(e.fractional=[!0,!1]),"exponent"in e||(e.exponent=[!0,!1]),"eSigned"in e||(e.eSigned=[!0,!1]);const t=p(e),r=d(e.fractional,function(t){let r="";return t&&0!==e.places&&(r="\\"+e.decimal,e.places===1/0?r="(?:"+r+"\\d+)?":r+="\\d{"+e.places+"}"),r},!0);let n=t+r;return r&&(n="(?:(?:"+n+")|(?:"+r+"))"),n+d(e.exponent,function(t){return t?"([eE]"+p({signed:e.eSigned})+")":""})}(r)+")"})},!0).replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:i,decimal:s,factor:a}}function c(e,t){const r=u(t),n=new RegExp("^"+r.regexp+"$").exec(e);if(!n)return NaN;let i=n[1];if(!n[1]){if(!n[2])return NaN;i=n[2],r.factor*=-1}return i=i.replace(new RegExp("["+r.group+"\\s\\xa0]","g"),"").replace(r.decimal,"."),Number(i)*r.factor}function p(e){return"signed"in(e=e||{})||(e.signed=[!0,!1]),"separator"in e?"groupSize"in e||(e.groupSize=3):e.separator="",d(e.signed,function(e){return e?"[-+]":""},!0)+d(e.separator,function(t){if(!t)return"(?:\\d+)";" "===(t=(0,n.Qs)(t))?t="\\s":"\xa0"===t&&(t="\\s\\xa0");const r=e.groupSize,i=e.groupSize2;if(i){const e="(?:0|[1-9]\\d{0,"+(i-1)+"}(?:["+t+"]\\d{"+i+"})*["+t+"]\\d{"+r+"})";return r-i>0?"(?:"+e+"|(?:0|[1-9]\\d{0,"+(r-1)+"}))":e}return"(?:0|[1-9]\\d{0,"+(r-1)+"}(?:["+t+"]\\d{"+r+"})*)"},!0)}const d=function(e,t,r){if(!(e instanceof Array))return t(e);const n=[];for(let i=0;i<e.length;i++)n.push(t(e[i]));return h(n.join("|"),r)},h=function(e,t){return"("+(t?"?:":"")+e+")"}},3444:(e,t,r)=>{"use strict";r.r(t),r.d(t,{hydratedAdapter:()=>l});var n=r(95046),i=r(89635),s=r(38975),o=r(78816),a=r(92268);const l={convertToGEGeometry:function(e,t){if(null==t)return null;let r="cache"in t?t.cache._geVersion:void 0;return null==r&&(r=e.convertJSONToGeometry(t),"cache"in t&&(t.cache._geVersion=r)),r},exportPoint:function(e,t,r){const n=e.hasZ(t),i=e.hasM(t),o=new s.Z({x:e.getPointX(t),y:e.getPointY(t),spatialReference:r});return n&&(o.z=e.getPointZ(t)),i&&(o.m=e.getPointM(t)),o.cache._geVersion=t,o},exportPolygon:function(e,t,r){const n=new o.Z({rings:e.exportPaths(t),hasZ:e.hasZ(t),hasM:e.hasM(t),spatialReference:r});return n.cache._geVersion=t,n},exportPolyline:function(e,t,r){const n=new a.Z({paths:e.exportPaths(t),hasZ:e.hasZ(t),hasM:e.hasM(t),spatialReference:r});return n.cache._geVersion=t,n},exportMultipoint:function(e,t,r){const n=new i.Z({hasZ:e.hasZ(t),hasM:e.hasM(t),points:e.exportPoints(t),spatialReference:r});return n.cache._geVersion=t,n},exportExtent:function(e,t,r){const i=e.hasZ(t),s=e.hasM(t),o=new n.Z({xmin:e.getXMin(t),ymin:e.getYMin(t),xmax:e.getXMax(t),ymax:e.getYMax(t),spatialReference:r});if(i){const r=e.getZExtent(t);o.zmin=r.vmin,o.zmax=r.vmax}if(s){const r=e.getMExtent(t);o.mmin=r.vmin,o.mmax=r.vmax}return o.cache._geVersion=t,o}}},44471:(e,t,r)=>{"use strict";r.d(t,{Z:()=>_});var n,i=r(8651),s=r(49533),o=r(54704),a=r(46942),l=(r(12131),r(47648),r(18419),r(8680)),u=r(2424),c=r(953),p=r(32589),d=r(61001),h=r(38975),f=r(90626),m=r(81678),y=r(77126),g=r(48626),b=r(27300),v=r(61144);let x=n=class extends s.wq{constructor(e){super(e),this.origin=(0,d.c)(),this.translation=(0,d.c)(),this.rotation=(0,y.Ue)(),this.scale=(0,d.f)(1,1,1),this.geographic=!0}get localMatrix(){const e=(0,c.c)();return(0,u.f)(e,e,this.scale),(0,u.d)(e,e,(0,y.WH)(this.rotation),(0,y.ZZ)(this.rotation)),(0,u.t)(e,e,this.translation),e}get localMatrixInverse(){return(0,u.b)((0,c.c)(),this.localMatrix)}applyLocal(e,t){return(0,p.m)(t,e,this.localMatrix)}applyLocalInverse(e,t){return(0,p.m)(t,e,this.localMatrixInverse)}project(e,t){const r=new Float64Array(e.length),n=g.fP.fromTypedArray(r),i=g.fP.fromTypedArray(e);if(this.geographic){const e=(0,m.N_)((0,m.Iu)(t)),s=(0,c.c)();return(0,f.Bm)(t,this.origin,s,e),(0,u.m)(s,s,this.localMatrix),(0,b.t)(n,i,s),(0,f.CM)(r,e,0,r,t,0,r.length/3),r}const{localMatrix:s,origin:o}=this;(0,u.g)(s,c.I)?(0,v.c)(n,i):(0,b.t)(n,i,s);for(let a=0;a<r.length;a+=3)r[a+0]+=o[0],r[a+1]+=o[1],r[a+2]+=o[2];return r}getOriginPoint(e){const[t,r,n]=this.origin;return new h.Z({x:t,y:r,z:n,spatialReference:e})}equals(e){return(0,o.pC)(e)&&this.geographic===e.geographic&&(0,p.k)(this.origin,e.origin)&&(0,u.h)(this.localMatrix,e.localMatrix)}clone(){const e={origin:(0,d.a)(this.origin),translation:(0,d.a)(this.translation),rotation:(0,y.Ue)(this.rotation),scale:(0,d.a)(this.scale),geographic:this.geographic};return new n(e)}};(0,i._)([(0,a.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],x.prototype,"origin",void 0),(0,i._)([(0,a.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],x.prototype,"translation",void 0),(0,i._)([(0,a.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],x.prototype,"rotation",void 0),(0,i._)([(0,a.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],x.prototype,"scale",void 0),(0,i._)([(0,a.Cb)({type:Boolean,nonNullable:!0,json:{write:!0}})],x.prototype,"geographic",void 0),(0,i._)([(0,a.Cb)()],x.prototype,"localMatrix",null),(0,i._)([(0,a.Cb)()],x.prototype,"localMatrixInverse",null),x=n=(0,i._)([(0,l.j)("esri.geometry.support.MeshTransform")],x);var _=x},77126:(e,t,r)=>{"use strict";r.d(t,{WH:()=>p,ZZ:()=>c,qC:()=>u,Ue:()=>a,uT:()=>l});var n=r(53934),i=r(38359),s=r(65948),o=r(32589);function a(e=d){return[e[0],e[1],e[2],e[3]]}function l(e,t,r=a()){return(0,o.g)(r,e),r[3]=t,r}function u(e,t,r=a()){return(0,i.s)(h,e,p(e)),(0,i.s)(f,t,p(t)),(0,i.m)(h,f,h),function(e,t){return e[3]=t,e}(r,(0,n.BV)((0,i.g)(r,h)))}function c(e){return e}function p(e){return(0,n.Vl)(e[3])}const d=[0,0,1,0],h=(0,s.a)(),f=(0,s.a)();a()},4078:(e,t,r)=>{"use strict";r.d(t,{d:()=>i});var n=r(53934);function i(e,t,r){var i;const u=e.byteLength/(4*t),c=new Uint32Array(e,0,u*t);let p=new Uint32Array(u);const d=null!=(i=null==r?void 0:r.minReduction)?i:0,h=(null==r?void 0:r.originalIndices)||null,f=h?h.length:0,m=(null==r?void 0:r.componentOffsets)||null;let y=0;if(m)for(let n=0;n<m.length-1;n++){const e=m[n+1]-m[n];e>y&&(y=e)}else y=u;const g=Math.floor(1.1*y)+1;(null==l||l.length<2*g)&&(l=new Uint32Array((0,n.Sf)(2*g)));for(let n=0;n<2*g;n++)l[n]=0;let b=0;const v=!!m&&!!h,x=v?f:u,_=v?new Uint32Array(f):null,w=1.96;let C=0!==d?Math.ceil(4*w*w/(d*d)*d*(1-d)):x,I=1,S=m?m[1]:x;for(let n=0;n<x;n++){if(n===C){const e=1-b/n;if(e+w*Math.sqrt(e*(1-e)/n)<d)return null;C*=2}if(n===S){for(let e=0;e<2*g;e++)l[e]=0;if(h)for(let e=m[I-1];e<m[I];e++)_[e]=p[h[e]];S=m[++I]}const e=v?h[n]:n,r=e*t,i=a(c,r,t);let o=i%g,u=b;for(;0!==l[2*o+1];){if(l[2*o]===i){const e=l[2*o+1]-1;if(s(c,r,e*t,t)){u=p[e];break}}o++,o>=g&&(o-=g)}u===b&&(l[2*o]=i,l[2*o+1]=e+1,b++),p[e]=u}if(0!==d&&1-b/u<d)return null;if(v){for(let e=m[I-1];e<_.length;e++)_[e]=p[h[e]];p=_}const T=new Uint32Array(t*b);b=0;for(let n=0;n<x;n++)p[n]===b&&(o(c,(v?h[n]:n)*t,T,b*t,t),b++);if(h&&!v){const e=new Uint32Array(f);for(let t=0;t<e.length;t++)e[t]=p[h[t]];p=e}return{buffer:T.buffer,indices:p,uniqueCount:b}}function s(e,t,r,n){for(let i=0;i<n;i++)if(e[t+i]!==e[r+i])return!1;return!0}function o(e,t,r,n,i){for(let s=0;s<i;s++)r[n+s]=e[t+s]}function a(e,t,r){let n=0;for(let i=0;i<r;i++)n=e[t+i]+n|0,n=n+(n<<11)+(n>>>2)|0;return n>>>0}let l=null},36131:(e,t,r)=>{"use strict";function n(e,t){var r;return e.isGeographic||e.isWebMercator&&(null==(r=null==t?void 0:t.geographic)||r)}r.d(t,{h:()=>n})},78652:(e,t,r)=>{"use strict";r.d(t,{iv:()=>y,I5:()=>g,w1:()=>b,FF:()=>v,Yq:()=>x});var n=r(54704),i=r(43899),s=r(56682),o=r(2424),a=r(953),l=r(93883),u=r(90626),c=r(81678),p=r(44471),d=r(48626),h=r(27300),f=r(36131),m=r(44768);function y(e,t,r){return(0,f.h)(t.spatialReference,r)?function(e,t,r){const n=t.spatialReference,i=S(t,r,F),s=new Float64Array(e.position.length),o=function(e,t,r,n){(0,h.t)(d.fP.fromTypedArray(n),d.fP.fromTypedArray(e),t);const i=new Float64Array(e.length);return(0,m.To)(n,i,r)}(e.position,i,n,s),a=(0,l.a)(j,i);return{position:o,normal:_(o,s,e.normal,a,n),tangent:w(o,s,e.tangent,a,n)}}(e,t,r):function(e,t,r){const n=new Float64Array(e.position.length),i=e.position,s=t.x,o=t.y,a=t.z||0,{horizontal:l,vertical:u}=M(r?r.unit:null,t.spatialReference);for(let c=0;c<i.length;c+=3)n[c+0]=i[c+0]*l+s,n[c+1]=i[c+1]*l+o,n[c+2]=i[c+2]*u+a;return{position:n,normal:e.normal,tangent:e.tangent}}(e,t,r)}function g(e,t,r){const{position:i,normal:s,tangent:o}=e;if((0,n.Wi)(t))return{position:i,normal:s,tangent:o};const a=t.localMatrix;return y({position:(0,m.zZ)(i,new Float64Array(i.length),a),normal:(0,n.pC)(s)?(0,m.w9)(s,new Float32Array(s.length),a):null,tangent:(0,n.pC)(o)?(0,m.VS)(o,new Float32Array(o.length),a):null},t.getOriginPoint(r),{geographic:t.geographic})}function b(e,t,r){if(null!=r&&r.useTransform){var n;const{position:i,normal:s,tangent:o}=e;return{vertexAttributes:{position:i,normal:s,tangent:o},transform:new p.Z({origin:[t.x,t.y,null!=(n=t.z)?n:0],geographic:(0,f.h)(t.spatialReference,r)})}}return{vertexAttributes:y(e,t,r),transform:null}}function v(e,t,r){return(0,f.h)(t.spatialReference,r)?I(e,t,r):C(e,t,r)}function x(e,t,r,i){if((0,n.Wi)(t))return v(e,r,i);const s=g(e,t,r.spatialReference);return r.equals(t.getOriginPoint(r.spatialReference))?C(s,r,i):(0,f.h)(r.spatialReference,i)?I(s,r,i):C(s,r,i)}function _(e,t,r,i,s){if((0,n.Wi)(r))return null;const o=new Float32Array(r.length);return(0,h.a)(d.ct.fromTypedArray(o),d.ct.fromTypedArray(r),i),(0,m.Yk)(o,e,t,s,o),o}function w(e,t,r,i,s){if((0,n.Wi)(r))return null;const o=new Float32Array(r.length);(0,h.a)(d.ct.fromTypedArray(o,4*Float32Array.BYTES_PER_ELEMENT),d.ct.fromTypedArray(r,4*Float32Array.BYTES_PER_ELEMENT),i);for(let n=3;n<o.length;n+=4)o[n]=r[n];return(0,m.M2)(o,e,t,s,o),o}function C(e,t,r){const n=new Float64Array(e.position.length),i=e.position,s=t.x,o=t.y,a=t.z||0,{horizontal:l,vertical:u}=M(r?r.unit:null,t.spatialReference);for(let c=0;c<i.length;c+=3)n[c+0]=(i[c+0]-s)/l,n[c+1]=(i[c+1]-o)/l,n[c+2]=(i[c+2]-a)/u;return{position:n,normal:e.normal,tangent:e.tangent}}function I(e,t,r){const n=t.spatialReference;S(t,r,F);const i=(0,o.b)(R,F),s=new Float64Array(e.position.length),a=function(e,t,r,n){const i=(0,m.XO)(e,t,n),s=d.fP.fromTypedArray(i),o=new Float64Array(i.length),a=d.fP.fromTypedArray(o);return(0,h.t)(a,s,r),o}(e.position,n,i,s),u=(0,l.a)(j,i);return{position:a,normal:T(e.normal,e.position,s,n,u),tangent:A(e.tangent,e.position,s,n,u)}}function S(e,t,r){(0,u.Bm)(e.spatialReference,[e.x,e.y,e.z||0],r,(0,c.rS)(e.spatialReference));const{horizontal:n,vertical:i}=M(t?t.unit:null,e.spatialReference);return(0,o.f)(r,r,[n,n,i]),r}function T(e,t,r,i,s){if((0,n.Wi)(e))return null;const o=(0,m.Iz)(e,t,r,i,new Float32Array(e.length)),a=d.ct.fromTypedArray(o);return(0,h.a)(a,a,s),o}function A(e,t,r,i,s){if((0,n.Wi)(e))return null;const o=(0,m.wi)(e,t,r,i,new Float32Array(e.length)),a=d.ct.fromTypedArray(o,4*Float32Array.BYTES_PER_ELEMENT);return(0,h.a)(a,a,s),o}function M(e,t){if((0,n.Wi)(e))return E;const r=t.isGeographic?1:(0,i.Z7)(t),s=t.isGeographic?1:(0,i._R)(t),o=(0,i.En)(1,e,"meters");return{horizontal:o*r,vertical:o*s}}const F=(0,a.c)(),R=(0,a.c)(),j=(0,s.c)(),E={horizontal:1,vertical:1}},44768:(e,t,r)=>{"use strict";r.d(t,{To:()=>x,Yk:()=>b,Iz:()=>g,M2:()=>S,wi:()=>I,XO:()=>v,w9:()=>w,zZ:()=>_,VS:()=>C});var n=r(18419),i=r(54704),s=r(93883),o=r(56682),a=r(953),l=r(32589),u=r(61001),c=r(90626),p=r(81678),d=r(73507),h=r(37e3),f=r(48626),m=r(27300);const y=n.Z.getLogger("esri.geometry.support.meshUtils.normalProjection");function g(e,t,r,n,i){return A(n)?(T(0,f.ct.fromTypedArray(e),f.fP.fromTypedArray(t),f.fP.fromTypedArray(r),n,f.ct.fromTypedArray(i)),i):(y.error("Cannot convert spatial reference to PCPF"),i)}function b(e,t,r,n,i){return A(n)?(T(1,f.ct.fromTypedArray(e),f.fP.fromTypedArray(t),f.fP.fromTypedArray(r),n,f.ct.fromTypedArray(i)),i):(y.error("Cannot convert to spatial reference from PCPF"),i)}function v(e,t,r){return(0,c.CM)(e,t,0,r,(0,p.rS)(t),0,e.length/3),r}function x(e,t,r){return(0,c.CM)(e,(0,p.rS)(r),0,t,r,0,e.length/3),t}function _(e,t,r){if((0,i.Wi)(e))return t;const n=f.fP.fromTypedArray(e),s=f.fP.fromTypedArray(t);return(0,m.t)(s,n,r),t}function w(e,t,r){if((0,i.Wi)(e))return t;(0,s.a)(E,r);const n=f.ct.fromTypedArray(e),o=f.ct.fromTypedArray(t);return(0,m.a)(o,n,E),(0,s.i)(E)||(0,m.n)(o,o),t}function C(e,t,r){if((0,i.Wi)(e))return t;(0,s.a)(E,r);const n=f.ct.fromTypedArray(e,4*Float32Array.BYTES_PER_ELEMENT),o=f.ct.fromTypedArray(t,4*Float32Array.BYTES_PER_ELEMENT);if((0,m.a)(o,n,E),(0,s.i)(E)||(0,m.n)(o,o),e!==t)for(let i=3;i<e.length;i+=4)t[i]=e[i];return t}function I(e,t,r,n,i){if(!A(n))return y.error("Cannot convert spatial reference to PCPF"),i;T(0,f.ct.fromTypedArray(e,4*Float32Array.BYTES_PER_ELEMENT),f.fP.fromTypedArray(t),f.fP.fromTypedArray(r),n,f.ct.fromTypedArray(i,4*Float32Array.BYTES_PER_ELEMENT));for(let s=3;s<e.length;s+=4)i[s]=e[s];return i}function S(e,t,r,n,i){if(!A(n))return y.error("Cannot convert to spatial reference from PCPF"),i;T(1,f.ct.fromTypedArray(e,16),f.fP.fromTypedArray(t),f.fP.fromTypedArray(r),n,f.ct.fromTypedArray(i,16));for(let s=3;s<e.length;s+=4)i[s]=e[s];return i}function T(e,t,r,n,i,o){if(!t)return;const a=r.count,u=(0,p.rS)(i);if(M(i))for(let p=0;p<a;p++)n.getVec(p,F),t.getVec(p,R),(0,c.Bm)(u,F,j,u),(0,s.f)(E,j),1===e&&(0,s.t)(E,E),(0,l.t)(R,R,E),o.setVec(p,R);else for(let p=0;p<a;p++){n.getVec(p,F),t.getVec(p,R),(0,c.Bm)(u,F,j,u),(0,s.f)(E,j);const i=(0,h.mZ)(r.get(p,1));let a=Math.cos(i);0===e&&(a=1/a),E[0]*=a,E[1]*=a,E[2]*=a,E[3]*=a,E[4]*=a,E[5]*=a,1===e&&(0,s.t)(E,E),(0,l.t)(R,R,E),(0,l.n)(R,R),o.setVec(p,R)}return o}function A(e){return M(e)||function(e){return e.isWebMercator}(e)}function M(e){return e.isWGS84||(0,d.yW)(e)||(0,d.BZ)(e)||(0,d.V2)(e)}const F=(0,u.c)(),R=(0,u.c)(),j=(0,a.c)(),E=(0,o.c)()},16912:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>T});var n=r(8651),i=(r(42851),r(93668)),s=r(2747),o=r(67372),a=r(36434),l=r(57319),u=r(46942),c=(r(12131),r(47648),r(18419),r(41460)),p=r(8680),d=r(66081),h=r(3523),f=r(68141),m=r(83727),y=r(20174),g=r(69265),b=r(37001),v=r(40570),x=r(5052),_=r(30666),w=r(95046),C=r(2379),I=r(38975);let S=class extends((0,f.h)((0,g.Q)((0,b.M)((0,m.q)((0,y.I)((0,o.R)(h.Z))))))){constructor(...e){super(...e),this.copyright="",this.fullExtent=new w.Z(-20037508.342787,-20037508.34278,20037508.34278,20037508.342787,C.Z.WebMercator),this.legendEnabled=!1,this.isReference=null,this.popupEnabled=!1,this.spatialReference=C.Z.WebMercator,this.subDomains=null,this.tileInfo=new x.Z({size:[256,256],dpi:96,format:"png8",compressionQuality:0,origin:new I.Z({x:-20037508.342787,y:20037508.342787,spatialReference:C.Z.WebMercator}),spatialReference:C.Z.WebMercator,lods:[new v.Z({level:0,scale:591657527.591555,resolution:156543.033928}),new v.Z({level:1,scale:295828763.795777,resolution:78271.5169639999}),new v.Z({level:2,scale:147914381.897889,resolution:39135.7584820001}),new v.Z({level:3,scale:73957190.948944,resolution:19567.8792409999}),new v.Z({level:4,scale:36978595.474472,resolution:9783.93962049996}),new v.Z({level:5,scale:18489297.737236,resolution:4891.96981024998}),new v.Z({level:6,scale:9244648.868618,resolution:2445.98490512499}),new v.Z({level:7,scale:4622324.434309,resolution:1222.99245256249}),new v.Z({level:8,scale:2311162.217155,resolution:611.49622628138}),new v.Z({level:9,scale:1155581.108577,resolution:305.748113140558}),new v.Z({level:10,scale:577790.554289,resolution:152.874056570411}),new v.Z({level:11,scale:288895.277144,resolution:76.4370282850732}),new v.Z({level:12,scale:144447.638572,resolution:38.2185141425366}),new v.Z({level:13,scale:72223.819286,resolution:19.1092570712683}),new v.Z({level:14,scale:36111.909643,resolution:9.55462853563415}),new v.Z({level:15,scale:18055.954822,resolution:4.77731426794937}),new v.Z({level:16,scale:9027.977411,resolution:2.38865713397468}),new v.Z({level:17,scale:4513.988705,resolution:1.19432856685505}),new v.Z({level:18,scale:2256.994353,resolution:.597164283559817}),new v.Z({level:19,scale:1128.497176,resolution:.298582141647617}),new v.Z({level:20,scale:564.248588,resolution:.14929107082380833}),new v.Z({level:21,scale:282.124294,resolution:.07464553541190416}),new v.Z({level:22,scale:141.062147,resolution:.03732276770595208}),new v.Z({level:23,scale:70.5310735,resolution:.01866138385297604})]}),this.type="web-tile",this.urlTemplate=null,this.wmtsInfo=null}normalizeCtorArgs(e,t){return"string"==typeof e?{urlTemplate:e,...t}:e}load(e){const t=this.loadFromPortal({supportedTypes:["WMTS"]},e).then(()=>{let e="";if(this.urlTemplate)if(this.spatialReference.equals(this.tileInfo.spatialReference)){const t=new l.R9(this.urlTemplate);this.subDomains&&this.subDomains.length>0||-1===t.authority.indexOf("{subDomain}")||(e="is missing 'subDomains' property")}else e="spatialReference must match tileInfo.spatialReference";else e="is missing the required 'urlTemplate' property value";if(e)throw new s.Z("web-tile-layer:load",`WebTileLayer (title: '${this.title}', id: '${this.id}') ${e}`)});return this.addResolvingPromise(t),Promise.resolve(this)}get levelValues(){const e=[];if(!this.tileInfo)return null;for(const t of this.tileInfo.lods)e[t.level]=t.levelValue||t.level;return e}readSpatialReference(e,t){return e||t.fullExtent&&t.fullExtent.spatialReference&&C.Z.fromJSON(t.fullExtent.spatialReference)}get tileServers(){if(!this.urlTemplate)return null;const e=[],{urlTemplate:t,subDomains:r}=this,n=new l.R9(t),i=n.scheme?n.scheme+"://":"//",s=i+n.authority+"/";if(-1===n.authority.indexOf("{subDomain}"))e.push(s);else if(r&&r.length>0&&n.authority.split(".").length>1)for(const o of r)e.push(i+n.authority.replace(/\{subDomain\}/gi,o)+"/");return e.map(e=>("/"!==e.charAt(e.length-1)&&(e+="/"),e))}get urlPath(){if(!this.urlTemplate)return null;const e=this.urlTemplate,t=new l.R9(e);return e.substring(((t.scheme?t.scheme+"://":"//")+t.authority+"/").length)}readUrlTemplate(e,t){return e||t.templateUrl}writeUrlTemplate(e,t){e&&(0,l.oC)(e)&&(e="https:"+e),e&&(e=e.replace(/\{z\}/gi,"{level}").replace(/\{x\}/gi,"{col}").replace(/\{y\}/gi,"{row}"),e=(0,l.Fv)(e)),t.templateUrl=e}fetchTile(e,t,r,n={}){const{signal:s}=n,o=this.getTileUrl(e,t,r),a={responseType:"image",signal:s,query:{...this.refreshParameters}};return(0,i.default)(o,a).then(e=>e.data)}getTileUrl(e,t,r){const n=this.levelValues[e];return this.tileServers[t%this.tileServers.length]+(0,a.gx)(this.urlPath,{level:n,z:n,col:r,x:r,row:t,y:t})}};(0,n._)([(0,u.Cb)({type:String,value:"",json:{write:!0}})],S.prototype,"copyright",void 0),(0,n._)([(0,u.Cb)({type:w.Z,json:{write:!0}})],S.prototype,"fullExtent",void 0),(0,n._)([(0,u.Cb)({readOnly:!0,json:{read:!1,write:!1}})],S.prototype,"legendEnabled",void 0),(0,n._)([(0,u.Cb)({type:["show","hide"]})],S.prototype,"listMode",void 0),(0,n._)([(0,u.Cb)()],S.prototype,"levelValues",null),(0,n._)([(0,u.Cb)({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],S.prototype,"isReference",void 0),(0,n._)([(0,u.Cb)({type:["WebTiledLayer"],value:"WebTiledLayer"})],S.prototype,"operationalLayerType",void 0),(0,n._)([(0,u.Cb)({readOnly:!0,json:{read:!1,write:!1}})],S.prototype,"popupEnabled",void 0),(0,n._)([(0,u.Cb)({type:C.Z})],S.prototype,"spatialReference",void 0),(0,n._)([(0,c.r)("spatialReference",["spatialReference","fullExtent.spatialReference"])],S.prototype,"readSpatialReference",null),(0,n._)([(0,u.Cb)({type:[String],json:{write:!0}})],S.prototype,"subDomains",void 0),(0,n._)([(0,u.Cb)({type:x.Z,json:{write:!0}})],S.prototype,"tileInfo",void 0),(0,n._)([(0,u.Cb)({readOnly:!0})],S.prototype,"tileServers",null),(0,n._)([(0,u.Cb)({json:{read:!1}})],S.prototype,"type",void 0),(0,n._)([(0,u.Cb)()],S.prototype,"urlPath",null),(0,n._)([(0,u.Cb)({type:String,json:{origins:{"portal-item":{read:{source:"url"}}}}})],S.prototype,"urlTemplate",void 0),(0,n._)([(0,c.r)("urlTemplate",["urlTemplate","templateUrl"])],S.prototype,"readUrlTemplate",null),(0,n._)([(0,d.c)("urlTemplate",{templateUrl:{type:String}})],S.prototype,"writeUrlTemplate",null),(0,n._)([(0,u.Cb)({type:_.Z,json:{write:!0}})],S.prototype,"wmtsInfo",void 0),S=(0,n._)([(0,p.j)("esri.layers.WebTileLayer")],S);var T=S},80973:(e,t,r)=>{"use strict";r.d(t,{S:()=>i,X:()=>n});const n=1;function i(e,t){let r=0;for(const i of t){var n;const t=null==(n=i.attributes)?void 0:n[e];"number"==typeof t&&isFinite(t)&&(r=Math.max(r,t))}return r}},33569:(e,t,r)=>{"use strict";r.d(t,{MS:()=>c,Dm:()=>l,Hq:()=>u,bU:()=>a});var n=r(12131),i=r(69141),s=r(90495),o=r(72063);function a(e){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===e||"esriGeometryMultipoint"===e?o.I4:"esriGeometryPolyline"===e?o.ET:o.lF}}}function l(e,t){if((0,n.Z)("csp-restrictions"))return()=>({[t]:null,...e});try{let r=`this.${t} = null;`;for(const t in e)r+=`this${t.indexOf(".")?`["${t}"]`:`.${t}`} = ${JSON.stringify(e[t])};`;const n=new Function(r);return()=>new n}catch(r){return()=>({[t]:null,...e})}}function u(e={}){return[{name:"New Feature",description:"",prototype:{attributes:(0,i.d9)(e)}}]}function c(e,t){return{attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:e},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:t,supportsDelete:t,supportsEditing:t,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAttachments:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:t,supportsExceedsLimitStatistics:!0},query:s.g,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0},editing:{supportsGeometryUpdate:t,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}}},81987:(e,t,r)=>{"use strict";r.d(t,{av:()=>l,d1:()=>c,b:()=>b,O0:()=>d,og:()=>m});var n=r(16304),i=r(73507),s=r(21550);class o{constructor(){this.code=null,this.description=null}}class a{constructor(e){this.error=new o,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=e}}function l(e){return new a(e)}class u{constructor(e){this.globalId=null,this.success=!0,this.objectId=this.uniqueId=e}}function c(e){return new u(e)}const p=new Set;function d(e,t,r,n,i=!1,o){p.clear();for(const a in r){const n=e.get(a);if(!n)continue;const u=r[a],c=h(n,u);if(c!==u&&o&&o.push({name:"invalid-value-type",message:"attribute value was converted to match the field type",details:{field:n,originalValue:u,sanitizedValue:c}}),p.add(n.name),n&&(i||n.editable)){const e=(0,s.Qc)(n,c);if(e)return l((0,s.vP)(e,n,c));t[n.name]=c}}if(n)for(const s of n)if(!p.has(s.name))return l(`missing required field "${s.name}"`);return null}function h(e,t){let r=t;return"string"==typeof t&&(0,s.H7)(e)?r=parseFloat(t):null!=t&&(0,s.qN)(e)&&"string"!=typeof t&&(r=String(t)),(0,s.Pz)(r)}let f;function m(e,t){if(!e||!(0,i.JY)(t))return e;if("rings"in e||"paths"in e){if(!f)throw new TypeError("geometry engine not loaded");return f.simplify(t,e)}return e}function y(){return g.apply(this,arguments)}function g(){return(g=(0,n.Z)(function*(){return f||(f=yield Promise.all([r.e(9677),r.e(8592),r.e(9899)]).then(r.bind(r,29899)),f)})).apply(this,arguments)}function b(e,t){return v.apply(this,arguments)}function v(){return(v=(0,n.Z)(function*(e,t){!(0,i.JY)(e)||"esriGeometryPolygon"!==t&&"esriGeometryPolyline"!==t||(yield y())})).apply(this,arguments)}},71939:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(8651),i=(r(42851),r(46942)),s=(r(12131),r(47648),r(18419),r(41460)),o=r(8680),a=r(85365),l=r(10478),u=r(2379);const c=e=>{let t=class extends e{constructor(){super(...arguments),this.copyright=null,this.minScale=0,this.maxScale=0,this.spatialReference=null,this.tileInfo=null,this.tilemapCache=null}readMinScale(e,t){return null!=t.minLOD&&null!=t.maxLOD?e:0}readMaxScale(e,t){return null!=t.minLOD&&null!=t.maxLOD?e:0}get supportsBlankTile(){return this.version>=10.2}readTilemapCache(e,t){return t.capabilities&&t.capabilities.indexOf("Tilemap")>-1?new l.y({layer:this}):null}};return(0,n._)([(0,i.Cb)({json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),(0,n._)([(0,i.Cb)()],t.prototype,"minScale",void 0),(0,n._)([(0,s.r)("service","minScale")],t.prototype,"readMinScale",null),(0,n._)([(0,i.Cb)()],t.prototype,"maxScale",void 0),(0,n._)([(0,s.r)("service","maxScale")],t.prototype,"readMaxScale",null),(0,n._)([(0,i.Cb)({type:u.Z})],t.prototype,"spatialReference",void 0),(0,n._)([(0,i.Cb)({readOnly:!0})],t.prototype,"supportsBlankTile",null),(0,n._)([(0,i.Cb)(a.h)],t.prototype,"tileInfo",void 0),(0,n._)([(0,i.Cb)()],t.prototype,"tilemapCache",void 0),(0,n._)([(0,s.r)("service","tilemapCache",["capabilities"])],t.prototype,"readTilemapCache",null),(0,n._)([(0,i.Cb)()],t.prototype,"version",void 0),t=(0,n._)([(0,o.j)("esri.layers.mixins.ArcGISCachedService")],t),t}},89028:(e,t,r)=>{"use strict";r.d(t,{w9:()=>b,j:()=>x,G4:()=>w,gp:()=>I,eS:()=>T,d:()=>M,yN:()=>F,WW:()=>j});var n=r(16304),i=(r(42851),r(93668)),s=r(2747),o=r(18419),a=r(54704),l=r(73507),u=r(37e3),c=r(41801),p=r(81606),d=r(90935),h=r(33569),f=r(37405),m=r(84425),y=r(2379);const g=o.Z.getLogger("esri.layers.graphics.sources.ogcfeature");function b(e,t){return v.apply(this,arguments)}function v(){return(v=(0,n.Z)(function*(e,t,r={},n=5){const{links:o}=e,l=D(o,"items","application/geo+json")||D(o,"http://www.opengis.net/def/rel/ogc/1.0/items","application/geo+json");if((0,a.Wi)(l))throw new s.Z("ogc-feature-layer:missing-items-page","Missing items url");const{data:u}=yield(0,i.default)(l.href,{signal:r.signal,query:{limit:n,...r.customParameters,token:r.apiKey},headers:{accept:"application/geo+json"}});yield(0,d.O3)(u);const c=(0,d.my)(u,{geometryType:t.geometryType}),p=t.fields||c.fields||[],y=null!=t.hasZ?t.hasZ:c.hasZ,b=c.geometryType,v=t.objectIdField||c.objectIdFieldName||"OBJECTID";let x=t.timeInfo;const _=p.find(e=>e.name===v);if(_)_.type="esriFieldTypeOID",_.editable=!1,_.nullable=!1;else{if(!c.objectIdFieldType)throw new s.Z("ogc-feature-layer:missing-feature-id","Collection geojson require a feature id as a unique identifier");p.unshift({name:v,alias:v,type:"esriFieldTypeOID",editable:!1,nullable:!1})}if(v!==c.objectIdFieldName){const e=p.find(e=>e.name===c.objectIdFieldName);e&&(e.type="esriFieldTypeInteger")}p===c.fields&&c.unknownFields.length>0&&g.warn({name:"ogc-feature-layer:unknown-field-types",message:"Some fields types couldn't be inferred from the features and were dropped",details:{unknownFields:c.unknownFields}});for(const i of p){if(null==i.name&&(i.name=i.alias),null==i.alias&&(i.alias=i.name),"esriFieldTypeOID"!==i.type&&"esriFieldTypeGlobalID"!==i.type&&(i.editable=null==i.editable||!!i.editable,i.nullable=null==i.nullable||!!i.nullable),!i.name)throw new s.Z("ogc-feature-layer:invalid-field-name","field name is missing",{field:i});if(-1===m.v.jsonValues.indexOf(i.type))throw new s.Z("ogc-feature-layer:invalid-field-type",`invalid type for field "${i.name}"`,{field:i})}if(x){const e=new f.Z(p);if(x.startTimeField){const t=e.get(x.startTimeField);t?(x.startTimeField=t.name,t.type="esriFieldTypeDate"):x.startTimeField=null}if(x.endTimeField){const t=e.get(x.endTimeField);t?(x.endTimeField=t.name,t.type="esriFieldTypeDate"):x.endTimeField=null}if(x.trackIdField){const t=e.get(x.trackIdField);t?x.trackIdField=t.name:(x.trackIdField=null,g.warn({name:"ogc-feature-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:x}}))}x.startTimeField||x.endTimeField||(g.warn({name:"ogc-feature-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing",details:{timeInfo:x}}),x=null)}return{drawingInfo:b?(0,h.bU)(b):null,geometryType:b,fields:p,hasZ:!!y,objectIdField:v,timeInfo:x}})).apply(this,arguments)}function x(e){return _.apply(this,arguments)}function _(){return(_=(0,n.Z)(function*(e,t={}){const{links:r}=e,n=D(r,"data","application/json")||D(r,"http://www.opengis.net/def/rel/ogc/1.0/data","application/json");if((0,a.Wi)(n))throw new s.Z("ogc-feature-layer:missing-collections-page","Missing collections url");const{apiKey:o,customParameters:l,signal:u}=t,{data:c}=yield(0,i.default)(n.href,{signal:u,headers:{accept:"application/json"},query:{...l,token:o}});return c})).apply(this,arguments)}function w(e){return C.apply(this,arguments)}function C(){return(C=(0,n.Z)(function*(e,t={}){const{links:r}=e,n=D(r,"conformance","application/json")||D(r,"http://www.opengis.net/def/rel/ogc/1.0/conformance","application/json");if((0,a.Wi)(n))throw new s.Z("ogc-feature-layer:missing-conformance-page","Missing conformance url");const{apiKey:o,customParameters:l,signal:u}=t,{data:c}=yield(0,i.default)(n.href,{signal:u,headers:{accept:"application/json"},query:{...l,token:o}});return c})).apply(this,arguments)}function I(e){return S.apply(this,arguments)}function S(){return(S=(0,n.Z)(function*(e,t={}){const{apiKey:r,customParameters:n,signal:s}=t,{data:o}=yield(0,i.default)(e,{signal:s,headers:{accept:"application/json"},query:{...n,token:r}});return o})).apply(this,arguments)}function T(e){return A.apply(this,arguments)}function A(){return(A=(0,n.Z)(function*(e,t={}){const r="application/vnd.oai.openapi+json;version=3.0",n=D(e.links,"service-desc",r);if((0,a.Wi)(n))return g.warn("ogc-feature-layer:missing-openapi-page","The OGC API-Features server does not have an OpenAPI page."),null;const{apiKey:s,customParameters:o,signal:l}=t,{data:u}=yield(0,i.default)(n.href,{signal:l,headers:{accept:r},query:{...o,token:s}});return u})).apply(this,arguments)}function M(e){const t=/^http:\/\/www\.opengis.net\/def\/crs\/(?<authority>.*)\/(?<version>.*)\/(?<code>.*)$/i.exec(e),r=null==t?void 0:t.groups;if(!r)return null;const{authority:n,code:i}=r;switch(n.toLowerCase()){case"ogc":switch(i.toLowerCase()){case"crs27":return y.Z.GCS_NAD_1927.wkid;case"crs83":return 4269;case"crs84":case"crs84h":return y.Z.WGS84.wkid;default:return null}case"esri":case"epsg":{const e=Number.parseInt(i,10);return Number.isNaN(e)?null:e}default:return null}}function F(e,t,r){return R.apply(this,arguments)}function R(){return(R=(0,n.Z)(function*(e,t,r){const n=yield j(e,t,r);return(0,c.cn)(n)})).apply(this,arguments)}function j(e,t,r){return E.apply(this,arguments)}function E(){return(E=(0,n.Z)(function*(e,t,r){const{capabilities:{query:{maxRecordCount:n}},collection:o,layerDefinition:h,queryParameters:{apiKey:f,customParameters:m},spatialReference:g,supportedCrs:b}=e,{links:v}=o,x=D(v,"items","application/geo+json")||D(v,"http://www.opengis.net/def/rel/ogc/1.0/items","application/geo+json");if((0,a.Wi)(x))throw new s.Z("ogc-feature-layer:missing-items-page","Missing items url");const{geometry:_,num:w,start:C,timeExtent:I,where:S}=t;if(t.objectIds)throw new s.Z("ogc-feature-layer:query-by-objectids-not-supported","Queries with objectids are not supported");const T=y.Z.fromJSON(g),A=(0,a.Pt)(t.outSpatialReference,T),M=A.isWGS84?null:P(A,b),F=O(_,b),R=k(I),j=N(S),E=null!=w?w:null!=C&&void 0!==C?10:n,{data:Z}=yield(0,i.default)(x.href,{...r,query:{...m,...F,crs:M,datetime:R,query:j,limit:E,startindex:C,token:f},headers:{accept:"application/geo+json"}});let z=!1;Z.links&&(z=!!Z.links.find(e=>"next"===e.rel)),!z&&Number.isInteger(Z.numberMatched)&&Number.isInteger(Z.numberReturned)&&(z=Z.numberReturned<Z.numberMatched);const{fields:B,globalIdField:U,hasM:G,hasZ:V,objectIdField:L}=h,q=h.geometryType,W=(0,d.lG)(Z,{geometryType:q,hasZ:V,objectIdField:L});if(!M&&A.isWebMercator)for(const i of W)if((0,a.pC)(i.geometry)){const e=(0,c.di)(i.geometry,q,V,!1);e.spatialReference=y.Z.WGS84,i.geometry=(0,c.GH)((0,u.iV)(e,A))}for(const i of W)i.objectId=i.attributes[L];const $=M||!M&&A.isWebMercator?A.toJSON():l.Zn,H=new p.Z;return H.exceededTransferLimit=z,H.features=W,H.fields=B,H.geometryType=q,H.globalIdFieldName=U,H.hasM=G,H.hasZ=V,H.objectIdFieldName=L,H.spatialReference=$,H})).apply(this,arguments)}function P(e,t){var r;const{isWebMercator:n,wkid:i}=e;return i?n?null!=(s=null!=(o=null!=(a=null!=(l=t[3857])?l:t[102100])?a:t[102113])?o:t[900913])?s:null:null!=(r=t[e.wkid])?r:null:null;var s,o,a,l}function Z(e){if((0,a.Wi)(e))return"";const{xmin:t,ymin:r,xmax:n,ymax:i}=e;return`${t},${r},${n},${i}`}function k(e){if((0,a.Wi)(e))return null;const{start:t,end:r}=e;return`${(0,a.pC)(t)?t.toISOString():".."}/${(0,a.pC)(r)?r.toISOString():".."}`}function N(e){return(0,a.Wi)(e)||!e||"1=1"===e?null:e}function O(e,t){if(!function(e){return(0,a.pC)(e)&&"extent"===e.type}(e))return null;const{spatialReference:r}=e;if(!r||r.isWGS84)return{bbox:Z(e)};const n=P(r,t);return n?{bbox:Z(e),"bbox-crs":n}:r.isWebMercator?{bbox:Z((0,u.iV)(e,y.Z.WGS84))}:null}function D(e,t,r){return e.find(e=>e.rel===t&&e.type===r)||e.find(e=>e.rel===t&&!e.type)}},5899:(e,t,r)=>{"use strict";r.d(t,{j:()=>u});var n=r(8651),i=r(55328),s=r(1518),o=r(46942),a=(r(12131),r(47648),r(18419),r(8680));const l={visible:"visibleSublayers"};let u=class extends((0,s.p)(i.Z)){constructor(e){super(e),this.scale=0}set layer(e){this._get("layer")!==e&&(this._set("layer",e),this.handles.remove("layer"),e&&this.handles.add([e.sublayers.on("change",()=>this.notifyChange("visibleSublayers")),e.on("wms-sublayer-update",e=>this.notifyChange(l[e.propertyName]))],"layer"))}get layers(){const{visibleSublayers:e}=this;return e.filter(e=>e.name).map(e=>e.name).join(",")}get version(){this.commitProperty("layers");const e=this.layer;return e&&e.commitProperty("imageTransparency"),(this._get("version")||0)+1}get visibleSublayers(){const{layer:e,scale:t}=this,r=null==e?void 0:e.sublayers,n=[],i=e=>{const{minScale:r,maxScale:s,sublayers:o,visible:a}=e;a&&(0===t||(0===r||t<=r)&&(0===s||t>=s))&&(o?o.forEach(i):n.unshift(e))};return null==r||r.forEach(i),n}toJSON(){const{layer:e,layers:t}=this,{imageFormat:r,imageTransparency:n,version:i}=e;return{format:r,request:"GetMap",service:"WMS",styles:"",transparent:n,version:i,layers:t}}};(0,n._)([(0,o.Cb)()],u.prototype,"layer",null),(0,n._)([(0,o.Cb)({readOnly:!0})],u.prototype,"layers",null),(0,n._)([(0,o.Cb)({type:Number})],u.prototype,"scale",void 0),(0,n._)([(0,o.Cb)({readOnly:!0})],u.prototype,"version",null),(0,n._)([(0,o.Cb)({readOnly:!0})],u.prototype,"visibleSublayers",null),u=(0,n._)([(0,a.j)("esri.layers.support.ExportWMSImageParameters")],u)},16890:(e,t,r)=>{"use strict";r.d(t,{W:()=>p});var n=r(16304),i=r(6041),s=r(93668),o=r(54704),a=r(98154),l=r(76468),u=r(64800),c=r(18747);class p{constructor(e,t,r,n){this.parsedUrl=e,this.portalItem=t,this.apiKey=r,this.signal=n,this.rootDocument=null;const i=this.parsedUrl.path.match(/^(.*)\/SceneServer\/layers\/([\d]*)\/?$/i);i&&(this.urlParts={root:i[1],layerId:parseInt(i[2],10)})}fetch(){var e=this;return(0,n.Z)(function*(){var t;if(!e.urlParts)return null;const r=null!=(t=e.portalItem)?t:yield e.portalItemFromServiceItemId();if((0,o.Wi)(r))return e.loadFromUrl();const n=yield e.findAndLoadRelatedPortalItem(r);return(0,o.Wi)(n)?null:e.loadFeatureLayerFromPortalItem(n)})()}fetchPortalItem(){var e=this;return(0,n.Z)(function*(){var t;if(!e.urlParts)return null;const r=null!=(t=e.portalItem)?t:yield e.portalItemFromServiceItemId();return(0,o.Wi)(r)?null:e.findAndLoadRelatedPortalItem(r)})()}fetchRootDocument(){var e=this;return(0,n.Z)(function*(){if((0,o.pC)(e.rootDocument))return e.rootDocument;if((0,o.Wi)(e.urlParts))return e.rootDocument={},{};const t={query:{f:"json",token:e.apiKey},responseType:"json",signal:e.signal},r=`${e.urlParts.root}/SceneServer`;try{const n=yield(0,s.default)(r,t);e.rootDocument=n.data}catch{e.rootDocument={}}return e.rootDocument})()}fetchServiceOwningPortalUrl(){var e=this;return(0,n.Z)(function*(){var t;const r=null==(t=i.id)?void 0:t.findServerInfo(e.parsedUrl.path);if(null!=r&&r.owningSystemUrl)return r.owningSystemUrl;const n=e.parsedUrl.path.replace(/(.*\/rest)\/.*/i,"$1")+"/info";try{const t=(yield(0,s.default)(n,{query:{f:"json"},responseType:"json",signal:e.signal})).data.owningSystemUrl;if(t)return t}catch(o){(0,a.r9)(o)}return null})()}findAndLoadRelatedPortalItem(e){var t=this;return(0,n.Z)(function*(){try{return(yield e.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},{signal:t.signal})).find(e=>"Feature Service"===e.type)||null}catch(r){return(0,a.r9)(r),null}})()}loadFeatureLayerFromPortalItem(e){var t=this;return(0,n.Z)(function*(){yield e.load({signal:t.signal});const r=yield t.findMatchingAssociatedSublayerUrl(e.url);return new l.default({url:r,portalItem:e}).load({signal:t.signal})})()}loadFromUrl(){var e=this;return(0,n.Z)(function*(){const t=yield e.findMatchingAssociatedSublayerUrl(`${e.urlParts.root}/FeatureServer`);return new l.default({url:t}).load({signal:e.signal})})()}findMatchingAssociatedSublayerUrl(e){var t=this;return(0,n.Z)(function*(){const r=e.replace(/^(.*FeatureServer)(\/[\d]*\/?)?$/i,"$1"),n={query:{f:"json"},responseType:"json",authMode:"no-prompt",signal:t.signal},i=t.urlParts.layerId,o=t.fetchRootDocument(),a=(0,s.default)(r,n),[l,u]=yield Promise.all([a,o]),c=u&&u.layers,p=l.data&&l.data.layers;if(!Array.isArray(p))throw new Error("expected layers array");if(Array.isArray(c)){for(let e=0;e<Math.min(c.length,p.length);e++)if(c[e].id===i)return`${r}/${p[e].id}`}else if(i<p.length)return`${r}/${p[i].id}`;throw new Error("could not find matching associated sublayer")})()}portalItemFromServiceItemId(){var e=this;return(0,n.Z)(function*(){const t=(yield e.fetchRootDocument()).serviceItemId;if(!t)return null;const r=new c.default({id:t,apiKey:e.apiKey}),n=yield e.fetchServiceOwningPortalUrl();(0,o.pC)(n)&&(r.portal=new u.Z({url:n}));try{return r.load({signal:e.signal})}catch(i){return(0,a.r9)(i),null}})()}}},33250:(e,t,r)=>{"use strict";r.d(t,{H3:()=>g,QI:()=>p,U4:()=>l,Yh:()=>h});var n=r(8651),i=r(49533),s=r(46942),o=(r(12131),r(47648),r(18419),r(28062)),a=r(8680);let l=class extends i.wq{constructor(){super(...arguments),this.nodesPerPage=null,this.rootIndex=0,this.lodSelectionMetricType=null}};(0,n._)([(0,s.Cb)({type:Number})],l.prototype,"nodesPerPage",void 0),(0,n._)([(0,s.Cb)({type:Number})],l.prototype,"rootIndex",void 0),(0,n._)([(0,s.Cb)({type:String})],l.prototype,"lodSelectionMetricType",void 0),l=(0,n._)([(0,a.j)("esri.layer.support.I3SNodePageDefinition")],l);let u=class extends i.wq{constructor(){super(...arguments),this.factor=1}};(0,n._)([(0,s.Cb)({type:Number,json:{read:{source:"textureSetDefinitionId"}}})],u.prototype,"id",void 0),(0,n._)([(0,s.Cb)({type:Number})],u.prototype,"factor",void 0),u=(0,n._)([(0,a.j)("esri.layer.support.I3SMaterialTexture")],u);let c=class extends i.wq{constructor(){super(...arguments),this.baseColorFactor=[1,1,1,1],this.baseColorTexture=null,this.metallicRoughnessTexture=null,this.metallicFactor=1,this.roughnessFactor=1}};(0,n._)([(0,s.Cb)({type:[Number]})],c.prototype,"baseColorFactor",void 0),(0,n._)([(0,s.Cb)({type:u})],c.prototype,"baseColorTexture",void 0),(0,n._)([(0,s.Cb)({type:u})],c.prototype,"metallicRoughnessTexture",void 0),(0,n._)([(0,s.Cb)({type:Number})],c.prototype,"metallicFactor",void 0),(0,n._)([(0,s.Cb)({type:Number})],c.prototype,"roughnessFactor",void 0),c=(0,n._)([(0,a.j)("esri.layer.support.I3SMaterialPBRMetallicRoughness")],c);let p=class extends i.wq{constructor(){super(...arguments),this.alphaMode="opaque",this.alphaCutoff=.25,this.doubleSided=!1,this.cullFace="none",this.normalTexture=null,this.occlusionTexture=null,this.emissiveTexture=null,this.emissiveFactor=null,this.pbrMetallicRoughness=null}};(0,n._)([(0,o.J)({opaque:"opaque",mask:"mask",blend:"blend"})],p.prototype,"alphaMode",void 0),(0,n._)([(0,s.Cb)({type:Number})],p.prototype,"alphaCutoff",void 0),(0,n._)([(0,s.Cb)({type:Boolean})],p.prototype,"doubleSided",void 0),(0,n._)([(0,o.J)({none:"none",back:"back",front:"front"})],p.prototype,"cullFace",void 0),(0,n._)([(0,s.Cb)({type:u})],p.prototype,"normalTexture",void 0),(0,n._)([(0,s.Cb)({type:u})],p.prototype,"occlusionTexture",void 0),(0,n._)([(0,s.Cb)({type:u})],p.prototype,"emissiveTexture",void 0),(0,n._)([(0,s.Cb)({type:[Number]})],p.prototype,"emissiveFactor",void 0),(0,n._)([(0,s.Cb)({type:c})],p.prototype,"pbrMetallicRoughness",void 0),p=(0,n._)([(0,a.j)("esri.layer.support.I3SMaterialDefinition")],p);let d=class extends i.wq{};(0,n._)([(0,s.Cb)({type:String,json:{read:{source:["name","index"],reader:(e,t)=>null!=e?e:`${t.index}`}}})],d.prototype,"name",void 0),(0,n._)([(0,o.J)({jpg:"jpg",png:"png",dds:"dds","ktx-etc2":"ktx-etc2",ktx2:"ktx2",basis:"basis"})],d.prototype,"format",void 0),d=(0,n._)([(0,a.j)("esri.layer.support.I3STextureFormat")],d);let h=class extends i.wq{constructor(){super(...arguments),this.atlas=!1}};(0,n._)([(0,s.Cb)({type:[d]})],h.prototype,"formats",void 0),(0,n._)([(0,s.Cb)({type:Boolean})],h.prototype,"atlas",void 0),h=(0,n._)([(0,a.j)("esri.layer.support.I3STextureSetDefinition")],h);let f=class extends i.wq{};(0,n._)([(0,o.J)({Float32:"Float32",UInt64:"UInt64",UInt32:"UInt32",UInt16:"UInt16",UInt8:"UInt8"})],f.prototype,"type",void 0),(0,n._)([(0,s.Cb)({type:Number})],f.prototype,"component",void 0),f=(0,n._)([(0,a.j)("esri.layer.support.I3SGeometryAttribute")],f);let m=class extends i.wq{};(0,n._)([(0,o.J)({draco:"draco"})],m.prototype,"encoding",void 0),(0,n._)([(0,s.Cb)({type:[String]})],m.prototype,"attributes",void 0),m=(0,n._)([(0,a.j)("esri.layer.support.I3SGeometryCompressedAttributes")],m);let y=class extends i.wq{constructor(){super(...arguments),this.offset=0}};(0,n._)([(0,s.Cb)({type:Number})],y.prototype,"offset",void 0),(0,n._)([(0,s.Cb)({type:f})],y.prototype,"position",void 0),(0,n._)([(0,s.Cb)({type:f})],y.prototype,"normal",void 0),(0,n._)([(0,s.Cb)({type:f})],y.prototype,"uv0",void 0),(0,n._)([(0,s.Cb)({type:f})],y.prototype,"color",void 0),(0,n._)([(0,s.Cb)({type:f})],y.prototype,"uvRegion",void 0),(0,n._)([(0,s.Cb)({type:f})],y.prototype,"featureId",void 0),(0,n._)([(0,s.Cb)({type:f})],y.prototype,"faceRange",void 0),(0,n._)([(0,s.Cb)({type:m})],y.prototype,"compressedAttributes",void 0),y=(0,n._)([(0,a.j)("esri.layer.support.I3SGeometryBuffer")],y);let g=class extends i.wq{};(0,n._)([(0,o.J)({triangle:"triangle"})],g.prototype,"topology",void 0),(0,n._)([(0,s.Cb)()],g.prototype,"geometryBuffers",void 0),g=(0,n._)([(0,a.j)("esri.layer.support.I3SGeometryDefinition")],g)},10478:(e,t,r)=>{"use strict";r.d(t,{y:()=>S});var n,i=r(16304),s=r(8651),o=r(93668),a=r(55328),l=r(2747),u=r(43435),c=r(18419),p=r(17836),d=r(74115),h=r(98154),f=r(47915),m=r(57319),y=r(72147),g=r(46942),b=(r(12131),r(38062)),v=r(8680),x=r(93476),_=r(69141);class w{constructor(){this.location={left:0,top:0,width:0,height:0},this._allAvailability="unknown",this.byteSize=40}getAvailability(e,t){if("unknown"!==this._allAvailability)return this._allAvailability;const r=(e-this.location.top)*this.location.width+(t-this.location.left),n=r>>3,i=this._tileAvailabilityBitSet;return n<0||n>i.length?"unknown":i[n]&1<<r%8?"available":"unavailable"}_updateFromData(e){let t=!0,r=!0;const n=Math.ceil(this.location.width*this.location.height/8),i=new Uint8Array(n);let s=0;for(let o=0;o<e.length;o++){const n=o%8;e[o]?(r=!1,i[s]|=1<<n):t=!1,7===n&&++s}r?this._allAvailability="unavailable":t?this._allAvailability="available":(this._allAvailability="unknown",this._tileAvailabilityBitSet=i,this.byteSize+=i.length)}static fromDefinition(e,t){const r=e.service.request||o.default,{row:n,col:i,width:s,height:a}=e,u={query:{f:"json"}};return t=t?{...u,...t}:u,r(function(e){let t;if("vector-tile"===e.service.type)t=`${e.service.url}/tilemap/${e.level}/${e.row}/${e.col}/${e.width}/${e.height}`;else{const r=e.service.tileServers;t=`${r&&r.length?r[e.row%r.length]:e.service.url}/tilemap/${e.level}/${e.row}/${e.col}/${e.width}/${e.height}`}const r=e.service.query;return r&&(t=`${t}?${r}`),t}(e),t).then(e=>e.data).catch(e=>{if(e&&e.details&&422===e.details.httpStatus)return{location:{top:n,left:i,width:s,height:a},valid:!0,data:(0,x.a9)(s*a,0)};throw e}).then(e=>{if(e.location&&(e.location.top!==n||e.location.left!==i||e.location.width!==s||e.location.height!==a))throw new l.Z("tilemap:location-mismatch","Tilemap response for different location than requested",{response:e,definition:{top:n,left:i,width:s,height:a}});return w.fromJSON(e)})}static fromJSON(e){w.validateJSON(e);const t=new w;return t.location=Object.freeze((0,_.d9)(e.location)),t._updateFromData(e.data),Object.freeze(t)}static validateJSON(e){if(!e||!e.location)throw new l.Z("tilemap:missing-location","Location missing from tilemap response");if(!1===e.valid)throw new l.Z("tilemap:invalid","Tilemap response was marked as invalid");if(!e.data)throw new l.Z("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(e.data))throw new l.Z("tilemap:data-mismatch","Data must be an array of numbers");if(e.data.length!==e.location.width*e.location.height)throw new l.Z("tilemap:data-mismatch","Number of data items does not match width/height of tilemap")}}function C(e){return`${e.level}/${e.row}/${e.col}/${e.width}/${e.height}`}const I=c.Z.getLogger("esri.layers.support.TilemapCache");let S=n=class extends a.Z{constructor(e){super(e),this._handles=new u.Z,this._pendingTilemapRequests={},this._availableLevels={},this.levels=5,this.cacheByteSize=2097152,this.request=o.default,this._prefetchingEnabled=!0}initialize(){this._tilemapCache=new p.Z(this.cacheByteSize),this._handles.add([this.watch(["layer.parsedUrl","layer.tileServers?"],()=>this._initializeTilemapDefinition()),(0,y.S1)(this,"layer.tileInfo.lods",e=>this._initializeAvailableLevels(e),!0)]),this._initializeTilemapDefinition()}destroy(){this._handles&&(this._handles.destroy(),this._handles=null)}castLevels(e){return e<=2?(I.error("Minimum levels for Tilemap is 3, but got ",e),3):e}get size(){return 1<<this.levels}fetchTilemap(e,t,r,n){if(!this._availableLevels[e])return Promise.reject(new l.Z("tilemap-cache:level-unavailable",`Level ${e} is unavailable in the service`));const i=this._tmpTilemapDefinition,s=this._tilemapFromCache(e,t,r,i);if(s)return Promise.resolve(s);const o=n&&n.signal;return n={...n,signal:null},new Promise((e,t)=>{(0,h.fu)(o,()=>t((0,h.zE)()));const r=C(i);let s=this._pendingTilemapRequests[r];if(!s){s=w.fromDefinition(i,n).then(e=>(this._tilemapCache.put(r,e,e.byteSize),e));const e=()=>delete this._pendingTilemapRequests[r];this._pendingTilemapRequests[r]=s,s.then(e,e)}s.then(e,t)})}getAvailability(e,t,r){if(!this._availableLevels[e])return"unavailable";const n=this._tilemapFromCache(e,t,r,this._tmpTilemapDefinition);return n?n.getAvailability(t,r):"unknown"}getAvailabilityUpsample(e,t,r,n){n.level=e,n.row=t,n.col=r;const i=this.layer.tileInfo;for(i.updateTileInfo(n);;){const e=this.getAvailability(n.level,n.row,n.col);if("unavailable"!==e)return e;if(!i.upsampleTile(n))return"unavailable"}}fetchAvailability(e,t,r,n){return this._availableLevels[e]?this.fetchTilemap(e,t,r,n).catch(e=>e).then(n=>{if(n instanceof w){const i=n.getAvailability(t,r);return"unavailable"===i?Promise.reject(new l.Z("tile-map:tile-unavailable","Tile is not available",{level:e,row:t,col:r})):i}if((0,h.D_)(n))throw n;return"unknown"}):Promise.reject(new l.Z("tilemap-cache:level-unavailable",`Level ${e} is unavailable in the service`))}fetchAvailabilityUpsample(e,t,r,n,i){n.level=e,n.row=t,n.col=r;const s=this.layer.tileInfo;s.updateTileInfo(n);const o=this.fetchAvailability(e,t,r,i).catch(e=>{if((0,h.D_)(e))throw e;if(s.upsampleTile(n))return this.fetchAvailabilityUpsample(n.level,n.row,n.col,n);throw e});return this._fetchAvailabilityUpsamplePrefetch(n.id,e,t,r,i,o),o}_fetchAvailabilityUpsamplePrefetch(e,t,r,s,o,a){var l=this;return(0,i.Z)(function*(){if(!l._prefetchingEnabled)return;const i=`prefetch-${e}`;if(l._handles.has(i))return;const u=(0,h.yi)();a.then(()=>u.abort(),()=>u.abort());let c=!1;if(l._handles.add({remove(){c||(c=!0,u.abort())}},i),yield(0,f.MU)(10,u.signal).catch(()=>{}),c||(c=!0,l._handles.remove(i)),(0,h.Hc)(u))return;const p={id:e,level:t,row:r,col:s},d={...o,signal:u.signal},m=l.layer.tileInfo;for(let e=0;n._prefetches.length<n._maxPrefetch&&m.upsampleTile(p);++e){const e=l.fetchAvailability(p.level,p.row,p.col,d);n._prefetches.push(e);const t=()=>{n._prefetches.removeUnordered(e)};e.then(t,t)}})()}_initializeTilemapDefinition(){if(!this.layer.parsedUrl)return;const e=this.layer.parsedUrl,t=e.query;this._tilemapCache.clear(),this._tmpTilemapDefinition={service:{url:e.path,query:t?(0,m.B7)(t):null,tileServers:this.layer.tileServers,request:this.request,type:this.layer.type},width:this.size,height:this.size,level:0,row:0,col:0}}_tilemapFromCache(e,t,r,n){n.level=e,n.row=t-t%this.size,n.col=r-r%this.size;const i=C(n);return this._tilemapCache.get(i)}_initializeAvailableLevels(e){this._availableLevels={},e&&e.forEach(e=>this._availableLevels[e.level]=!0)}get test(){const e=this;return{get prefetchingEnabled(){return e._prefetchingEnabled},set prefetchingEnabled(t){e._prefetchingEnabled=t},hasTilemap:(t,r,n)=>!!e._tilemapFromCache(t,r,n,e._tmpTilemapDefinition)}}};S._maxPrefetch=4,S._prefetches=new d.Z({initialSize:n._maxPrefetch}),(0,s._)([(0,g.Cb)({constructOnly:!0,type:Number})],S.prototype,"levels",void 0),(0,s._)([(0,b.p)("levels")],S.prototype,"castLevels",null),(0,s._)([(0,g.Cb)({readOnly:!0,type:Number})],S.prototype,"size",null),(0,s._)([(0,g.Cb)({constructOnly:!0,type:Number})],S.prototype,"cacheByteSize",void 0),(0,s._)([(0,g.Cb)({constructOnly:!0})],S.prototype,"layer",void 0),(0,s._)([(0,g.Cb)({constructOnly:!0})],S.prototype,"request",void 0),S=n=(0,s._)([(0,v.j)("esri.layers.support.TilemapCache")],S)},30666:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n,i=r(8651),s=r(49533),o=r(69141),a=r(46942),l=(r(47648),r(12131),r(18419),r(8680));let u=n=class extends s.wq{constructor(e){super(e)}clone(){return new n({customLayerParameters:(0,o.d9)(this.customLayerParameters),customParameters:(0,o.d9)(this.customParameters),layerIdentifier:this.layerIdentifier,tileMatrixSet:this.tileMatrixSet,url:this.url})}};(0,i._)([(0,a.Cb)({json:{type:Object,write:!0}})],u.prototype,"customLayerParameters",void 0),(0,i._)([(0,a.Cb)({json:{type:Object,write:!0}})],u.prototype,"customParameters",void 0),(0,i._)([(0,a.Cb)({type:String,json:{write:!0}})],u.prototype,"layerIdentifier",void 0),(0,i._)([(0,a.Cb)({type:String,json:{write:!0}})],u.prototype,"tileMatrixSet",void 0),(0,i._)([(0,a.Cb)({type:String,json:{write:!0}})],u.prototype,"url",void 0),u=n=(0,i._)([(0,l.j)("esri.layer.support.WMTSLayerInfo")],u);var c=u},94330:(e,t,r)=>{"use strict";r.d(t,{C:()=>n});const n={attachment:{supportsContentType:!1,supportsExifInfo:!1,supportsKeywords:!1,supportsName:!1,supportsSize:!1},data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:!1},editing:{supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsGeometryUpdate:!1,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:!1,supportsDelete:!1,supportsEditing:!1,supportsChangeTracking:!1,supportsQuery:!1,supportsQueryAttachments:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:!1,supportsExceedsLimitStatistics:!1},queryRelated:{supportsCount:!1,supportsOrderBy:!1,supportsPagination:!1},query:{maxRecordCount:0,maxRecordCountFactor:0,standardMaxRecordCount:0,supportsCacheHint:!1,supportsCentroid:!1,supportsDisjointSpatialRelationship:!1,supportsDistance:!1,supportsDistinct:!1,supportsExtent:!1,supportsFormatPBF:!1,supportsGeometryProperties:!1,supportsHavingClause:!1,supportsHistoricMoment:!1,supportsMaxRecordCountFactor:!1,supportsOrderBy:!1,supportsPagination:!1,supportsPercentileStatistics:!1,supportsQuantization:!1,supportsQuantizationEditMode:!1,supportsQueryByOthers:!1,supportsQueryGeometry:!1,supportsResultType:!1,supportsSqlExpression:!1,supportsStandardizedQueriesOnly:!1,supportsTopFeaturesQuery:!1,supportsStatistics:!1,tileMaxRecordCount:0}}},62775:(e,t,r)=>{"use strict";r.d(t,{lm:()=>w,CS:()=>g,Yu:()=>x,Cw:()=>y,j5:()=>b});var n=r(16304),i=r(24065),s=r(6041),o=r(82772),a=r(93668),l=r(69141),u=r(57319),c=r(2379),p=r(288),d=r(2266),h=r(59719),f=r(41586);const m={esriGeometryPoint:"points",esriGeometryPolyline:"polylines",esriGeometryPolygon:"polygons"};function y(e){const t=e.folders||[],r=t.slice(),n=new Map,i=new Map,s=new Map,o=new Map,a=new Map,u={esriGeometryPoint:i,esriGeometryPolyline:s,esriGeometryPolygon:o};(e.featureCollection&&e.featureCollection.layers||[]).forEach(e=>{const t=(0,l.d9)(e);t.featureSet.features=[];const r=e.featureSet.geometryType;n.set(r,t);const a=e.layerDefinition.objectIdField;"esriGeometryPoint"===r?v(i,a,e.featureSet.features):"esriGeometryPolyline"===r?v(s,a,e.featureSet.features):"esriGeometryPolygon"===r&&v(o,a,e.featureSet.features)}),e.groundOverlays&&e.groundOverlays.forEach(e=>{a.set(e.id,e)}),t.forEach(t=>{t.networkLinkIds.forEach(n=>{const i=function(e,t,r){const n=function(e,t){let r;return t.some(t=>t.id===e&&(r=t,!0)),r}(e,r);return n&&(n.parentFolderId=t,n.networkLink=n),n}(n,t.id,e.networkLinks);i&&r.push(i)})}),r.forEach(e=>{e.featureInfos&&(e.points=(0,l.d9)(n.get("esriGeometryPoint")),e.polylines=(0,l.d9)(n.get("esriGeometryPolyline")),e.polygons=(0,l.d9)(n.get("esriGeometryPolygon")),e.mapImages=[],e.featureInfos.map(t=>{switch(t.type){case"esriGeometryPoint":case"esriGeometryPolyline":case"esriGeometryPolygon":{const r=u[t.type].get(t.id);r&&e[m[t.type]].featureSet.features.push(r);break}case"GroundOverlay":{const r=a.get(t.id);r&&e.mapImages.push(r);break}}}),e.fullExtent=w([e]))});const c=w(r);return{folders:t,sublayers:r,extent:c}}function g(e,t,r,n){const o=s.id&&s.id.findCredential(e);return e=(0,u.fl)(e,{token:o&&o.token}),(0,a.default)(i.Z.kmlServiceUrl,{query:{url:e,model:"simple",folders:"",refresh:0!==r||void 0,outSR:JSON.stringify(t)},responseType:"json",signal:n})}function b(e,t,r=null,n=[]){const i=[],s={},o=t.sublayers,a=t.folders.map(e=>e.id);return o.forEach(t=>{const o=new e;if(r?o.read(t,r):o.read(t),n.length&&a.indexOf(o.id)>-1&&(o.visible=-1!==n.indexOf(o.id)),s[t.id]=o,null!=t.parentFolderId&&-1!==t.parentFolderId){const e=s[t.parentFolderId];e.sublayers||(e.sublayers=[]),e.sublayers.unshift(o)}else i.unshift(o)}),i}function v(e,t,r){r.forEach(r=>{e.set(r.attributes[t],r)})}function x(e){return _.apply(this,arguments)}function _(){return(_=(0,n.Z)(function*(e){const t=f.default.fromJSON(e.featureSet).features,r=(0,h.im)(e.layerDefinition.drawingInfo.renderer),n=o.Z.fromJSON(e.popupInfo),i=[];for(const s of t){const e=yield r.getSymbolAsync(s);s.symbol=e,s.popupTemplate=n,s.visible=!0,i.push(s)}return i})).apply(this,arguments)}function w(e){const t=(0,p.Ue)(p.Gv),r=(0,p.Ue)(p.Gv);for(const n of e){if(n.polygons&&n.polygons.featureSet&&n.polygons.featureSet.features)for(const e of n.polygons.featureSet.features)(0,d.Yg)(t,e.geometry),(0,p.TC)(r,t);if(n.polylines&&n.polylines.featureSet&&n.polylines.featureSet.features)for(const e of n.polylines.featureSet.features)(0,d.Yg)(t,e.geometry),(0,p.TC)(r,t);if(n.points&&n.points.featureSet&&n.points.featureSet.features)for(const e of n.points.featureSet.features)(0,d.Yg)(t,e.geometry),(0,p.TC)(r,t);if(n.mapImages)for(const e of n.mapImages)(0,d.Yg)(t,e.extent),(0,p.TC)(r,t)}return(0,p.fS)(r,p.Gv)?null:{xmin:r[0],ymin:r[1],zmin:r[2],xmax:r[3],ymax:r[4],zmax:r[5],spatialReference:c.Z.WGS84}}},2410:(e,t,r)=>{"use strict";r.d(t,{OE:()=>p,Gc:()=>f,Qg:()=>d,Rq:()=>l,gX:()=>h,z2:()=>u,ET:()=>c,Vx:()=>y}),r(42851);var n=r(54704),i=r(98694),s=r(38975);const o=new Map,a=new class{constructor(e=15e3,t=5e3){this._timer=null,this._cachedBlocks=new Map,this._size=-1,this._duration=e,this._interval=Math.min(e,t)}decreaseRefCount(e,t){const r=e+"/"+t,n=this._cachedBlocks;if(n.has(r)){const e=n.get(r);return e.refCount--,e.refCount<=0&&(n.delete(r),e.controller&&e.controller.abort()),e.refCount}return 0}getBlock(e,t){const r=e+"/"+t,n=this._cachedBlocks;if(n.has(r)){const e=n.get(r);return e.ts=Date.now(),e.refCount++,n.delete(r),n.set(r,e),e.block}return null}putBlock(e,t,r,n=null){const i=this._cachedBlocks,s=e+"/"+t;if(i.has(s)){const e=i.get(s);e.ts=Date.now(),e.refCount++}else i.set(s,{block:r,ts:Date.now(),refCount:1,controller:n});this.trim(),this.updateTimer()}deleteBlock(e,t){const r=this._cachedBlocks,n=e+"/"+t;r.has(n)&&r.delete(n)}updateMaxSize(e){this._size=e,this.trim()}empty(){this._cachedBlocks.clear(),this.clearTimer()}getCurrentSize(){return this._cachedBlocks.size}updateTimer(){if(null!=this._timer)return;const e=this._cachedBlocks;this._timer=setInterval(()=>{const t=Array.from(e),r=Date.now();for(let n=0;n<t.length&&t[n][1].ts<=r-this._duration;n++)e.delete(t[n][0]);0===e.size&&this.clearTimer()},this._interval)}trim(){const e=this._cachedBlocks;if(-1===this._size||this._size>=e.size)return;const t=Array.from(e);for(let r=0;r<t.length-this._size;r++)e.delete(t[r][0])}clearTimer(){null!=this._timer&&(clearInterval(this._timer),this._timer=null)}};function l(e,t){return null==t?e:`${e}?sliceId=${t}`}function u(e,t){const r={extent:null,rasterInfo:t,cache:new Map};if(o.has(e)){const t=o.get(e);return t.push(r),t.length-1}return o.set(e,[r]),0}function c(e,t){if(o.has(e)){const r=o.get(e);r[t]=null,r.some(e=>null!=e)||o.delete(e)}}function p(e,t,r){if(!o.has(e))return null==t?a.decreaseRefCount(e,r):0;const n=o.get(e);if(null==n[t])return a.decreaseRefCount(e,r);const i=n[t].cache;if(i.has(r)){const e=i.get(r);if(e.refCount--,0===e.refCount){i.delete(r);for(let e=0;e<n.length;e++)n[e]&&n[e].cache.has(r)&&n[e].cache.delete(r);e.controller&&e.controller.abort()}return e.refCount}return 0}function d(e,t,r){if(!o.has(e))return null==t?a.getBlock(e,r):null;const n=o.get(e);if(null==n[t]){for(let e=0;e<n.length;e++)if(n[e]&&n[e].cache.has(r)){const t=n[e].cache.get(r);return t.refCount++,t.block}return a.getBlock(e,r)}const i=n[t].cache;if(i.has(r)){const e=i.get(r);return e.refCount++,e.block}for(let s=0;s<n.length;s++)if(s!==t&&n[s]&&n[s]&&n[s].cache.has(r)){const e=n[s].cache.get(r);return e.refCount++,i.set(r,e),e.block}return null}function h(e,t,r,n,i=null){if(!o.has(e))return void(null==t&&a.putBlock(e,r,n,i));const s=o.get(e);if(null==s[t])return void a.putBlock(e,r,n,i);const l={refCount:1,block:n,isResolved:!1,isRejected:!1,controller:i};n.then(()=>l.isResolved=!0).catch(()=>l.isRejected=!0),s[t].cache.set(r,l)}function f(e,t,r){if(!o.has(e))return void(null==t&&a.deleteBlock(e,r));const n=o.get(e);null!=n[t]?n[t].cache.delete(r):a.deleteBlock(e,r)}function m(e,t){if(!o.has(e))return null;const r=o.get(e);return null==r[t]?null:r[t]}function y(e,t,r,o,a,l,u=null){const c=m(e,t),p=c.extent,{cache:d,rasterInfo:h}=c;if(p&&p.xmin===r.xmin&&p.xmax===r.xmax&&p.ymin===r.ymin&&p.ymax===r.ymax)return;const f=r.clone().normalize(),{spatialReference:y,transform:g}=h,b=new Set;for(let m=0;m<f.length;m++){const e=f[m];if(e.xmax-e.xmin<=o||e.ymax-e.ymin<=o)continue;let t=(0,i.tB)(e,y,u);(0,n.pC)(g)&&(t=g.inverseTransform(t));const r=new s.Z({x:o,y:o,spatialReference:e.spatialReference});if(null==a&&!(a=(0,i.VO)(r,y,e,u)))return;const{pyramidLevel:c,pyramidResolution:p,excessiveReading:d}=(0,i.kr)(a,h,l||"closest");if(d)return;const{storageInfo:v}=h,{origin:x}=v,_={x:Math.max(0,Math.floor((t.xmin-x.x)/p.x)),y:Math.max(0,Math.floor((x.y-t.ymax)/p.y))},w=Math.ceil((t.xmax-t.xmin)/p.x-.1),C=Math.ceil((t.ymax-t.ymin)/p.y-.1),I=c>0?v.pyramidBlockWidth:v.blockWidth,S=c>0?v.pyramidBlockHeight:v.blockHeight,T=1,A=Math.max(0,Math.floor(_.x/I)-T),M=Math.max(0,Math.floor(_.y/S)-T),F=Math.floor((_.x+w-1)/I)+T,R=Math.floor((_.y+C-1)/S)+T;for(let n=M;n<=R;n++)for(let e=A;e<=F;e++)b.add(`${c}/${n}/${e}`)}d.forEach((e,t)=>{if(!b.has(t)){const e=d.get(t);(null==e||e.isResolved||e.isRejected)&&d.delete(t)}}),c.extent={xmin:r.xmin,ymin:r.ymin,xmax:r.xmax,ymax:r.ymax}}},98694:(e,t,r)=>{"use strict";r.d(t,{vF:()=>j,_D:()=>y,Qp:()=>M,P_:()=>A,Hq:()=>T,zD:()=>f,tB:()=>_,nF:()=>v,VO:()=>g,kZ:()=>F,kr:()=>R});var n=r(16304),i=(r(42851),r(2747)),s=r(54704),o=r(43899),a=r(90626),l=r(37e3),u=r(95046),c=r(38975);const p=5e-4,d=function(e,t){const r=(e.isWGS84||e.isWebMercator)&&(t.isWGS84||t.isWebMercator);return!(e.equals(t)||r)},h={3395:20037508.342789244,3410:17334193.943686873,3832:3339584.723798206,3857:20037508.342788905,3975:17367530.445161372,4087:20037508.342789244,4088:20015108.787169147,6933:17367530.445161372,8858:7396237.374497803,8859:2465412.4581659334,32662:20037508.342789244,53001:20015086.79602057,53002:10007543.39801029,53003:20015086.79602057,53004:20015086.79602057,53016:14152803.599503474,53017:17333573.624304302,53025:7276828.3848298555,53031:10384677.558821043,53034:20015086.79602057,53036:7389443.187332862,53037:2463147.729110953,53079:20015114.352186374,53080:20015114.352186374,54001:20037508.342789244,54002:10018754.171394624,54003:20037508.342789244,54004:20037508.342789244,54016:14168658.027268292,54017:17367530.44516137,54025:7311399.09166516,54031:10396310.810074743,54034:20037508.342789244,54050:808820.9223376509,54053:1920897.3915568967,54079:20037508.342789244,54080:20037508.342789244,54100:20037508.342789244,54101:20037508.342789244,102038:4297258.582585486,102299:5013965.117483125};function f(){return m.apply(this,arguments)}function m(){return(m=(0,n.Z)(function*(){if((0,a.kR)()||!(0,a.Gb)())return null;yield(0,a.zD)()})).apply(this,arguments)}function y(e,t,r){if(!d(e.spatialReference,t))return null;if(!(0,a.kR)())throw new i.Z("rasterprojectionhelper-projectResolution","projection engine is not loaded");return r?(0,a.rS)(t,e.spatialReference,e):(0,a.rS)(e.spatialReference,t,e)}function g(e,t,r,n=null){if(e.spatialReference.equals(t))return e;const o=d(e.spatialReference,t);if(o&&!(0,a.kR)())throw new i.Z("rasterprojectionhelper-projectResolution","projection engine is not loaded");const c=r.center,p=new u.Z({xmin:c.x-e.x/2,xmax:c.x+e.x/2,ymin:c.y-e.y/2,ymax:c.y+e.y/2,spatialReference:e.spatialReference}),h=o?(0,a.iV)(p,t,n):(0,l.iV)(p,t);return(0,s.Wi)(h)?null:{x:h.xmax-h.xmin,y:h.ymax-h.ymin}}function b(e,t=.01){return(0,o.c9)(e)?t/(0,o.c9)(e):0}function v(e,t,r=null,n=!0){const o=e.spatialReference;if(o.equals(t))return e;let u=(0,l.iV)(e,t);if((0,s.Wi)(u)){if(!(0,a.kR)())throw new i.Z("rasterprojectionhelper-projectResolution","projection engine is not loaded");u=(0,a.iV)(e,t,r)}if(n&&t.isGeographic){const[t,r]=I(o,!0),n=b(o);n&&null!=t&&null!=r&&(Math.abs(e.x-t)<n&&Math.abs(180-u.x)<p?u.x-=360:Math.abs(e.x-r)<n&&Math.abs(180+u.x)<p&&(u.x+=360))}return u}function x(e){const t=C(e[0].spatialReference);if(e.length<2||!(0,s.pC)(t))return e[0];let{xmin:r,xmax:n,ymin:i,ymax:o}=e[0];for(let s=1;s<e.length;s++){const r=e[s];n=r.xmax+t*s,i=Math.min(i,r.ymin),o=Math.max(o,r.ymax)}return new u.Z({xmin:r,xmax:n,ymin:i,ymax:o,spatialReference:e[0].spatialReference})}function _(e,t,r=null,n=!0){if(e.spatialReference.equals(t))return e;const i=T(e),o=C(e.spatialReference,!0);return(0,s.pC)(o)&&0!==i?x(e.clone().normalize().map(e=>w(e,t,r,n))):w(e,t,r,n)}function w(e,t,r=null,n=!0){const o=e.spatialReference;if(o.equals(t))return e;if(d(o,t)&&!(0,a.kR)())throw new i.Z("rasterprojectionhelper-projectExtent","projection engine is not loaded");let u=(0,l.iV)(e,t);(0,s.Wi)(u)&&(u=(0,a.iV)(e,t,r));let[h,f]=I(o,!0);if(u&&n&&o.isWebMercator&&t.isGeographic&&null!=h&&null!=f){const n=.001,i=1e3;if(Math.abs(e.xmin-h)<n&&Math.abs(f-e.xmax)>i&&Math.abs(180-u.xmax)<p){u.xmin=-180;const n=[];n.push(new c.Z(e.xmax,e.ymin,o)),n.push(new c.Z(e.xmax,(e.ymin+e.ymax)/2,o)),n.push(new c.Z(e.xmax,e.ymax,o));const i=n.map(e=>v(e,t,r)).filter(e=>!isNaN(null==e?void 0:e.x)).map(e=>e.x);u.xmax=Math.max.apply(null,i)}if(Math.abs(e.xmax-f)<n&&Math.abs(h-e.xmin)>i&&Math.abs(180+u.xmin)<p){u.xmax=180;const n=[];n.push(new c.Z(e.xmin,e.ymin,o)),n.push(new c.Z(e.xmin,(e.ymin+e.ymax)/2,o)),n.push(new c.Z(e.xmin,e.ymax,o));const i=n.map(e=>v(e,t,r)).filter(e=>!isNaN(null==e?void 0:e.x)).map(e=>e.x);u.xmin=Math.min.apply(null,i)}}[h,f]=I(t,!0);const m=b(t);return m&&null!=h&&null!=f&&(Math.abs(u.xmin-h)<m&&(u.xmin=h),Math.abs(u.xmax-f)<m&&(u.xmax=f)),u}function C(e,t=!1){return e.isWebMercator?2*(t?20037508.342787:20037508.342788905):e.wkid&&e.isGeographic?360:2*h[e.wkid]||null}function I(e,t=!1){const r=[],n=C(e,t);return(0,s.pC)(n)&&(r.push(-n/2),r.push(n/2)),r}function S(e,t,r,n){let i=(e-t)/r;return i-Math.floor(i)!=0?i=Math.floor(i):n&&(i-=1),i}function T(e,t=!1){const r=C(e.spatialReference);if(!(0,s.pC)(r))return 0;const n=t?0:-r/2;return S(e.xmax,n,r,!0)-S(e.xmin,n,r,!1)}function A(e){const t=e.storageInfo.origin.x,r=C(e.spatialReference,!0);if(!(0,s.pC)(r))return{originX:t,halfWorldWidth:null,pyramidsInfo:null};const n=r/2,{nativePixelSize:i,storageInfo:o,extent:a}=e,{maximumPyramidLevel:l,blockWidth:u,pyramidScalingFactor:c}=o;let p=i.x;const d=[],h=(0,s.pC)(e.transform)&&"gcs-shift"===e.transform.type,f=t+n,m=h?r-t:n-t;for(let s=0;s<=l;s++){const e=(a.xmax-t)/p/u,n=e-Math.floor(e)==0?e:Math.ceil(e),i=(r/2-t)/p/u,s=i-Math.floor(i)==0?i:Math.ceil(i),o=Math.floor(f/p/u),l=Math.round(f/p)%u,h=(u-Math.round(m/p)%u)%u;d.push({resolutionX:p,blockWidth:u,datsetColumnCount:n,worldColumnCountFromOrigin:s,leftMargin:l,rightPadding:h,originColumnOffset:o}),p*=c}return{originX:t,halfWorldWidth:n,pyramidsInfo:d,hasGCSSShiftTransform:h}}function M(e,t,r,n=null,o=null,l=!1,u=[32,32]){if(d(e.spatialReference,t.spatialReference)&&!(0,a.kR)())throw new i.Z("rasterprojectionhelper-projectResolution","projection engine is not loaded");if(!(e&&t&&r))return null;const{xmin:p,ymin:h,xmax:f,ymax:m}=e,y=e.spatialReference,g=t.spatialReference,b=C(g);l=l||"gcs-shift"===(null==o?void 0:o.type);const x={x:u[0]*r.x,y:u[1]*r.y},_={cols:Math.ceil((f-p)/x.x-.1/u[0])+1,rows:Math.ceil((m-h)/x.y-.1/u[1])+1},w=x.x,I=x.y,S=[];let T,A=!1;for(let i=0;i<_.cols;i++){const e=[];for(let r=0;r<_.rows;r++){let a=v(new c.Z({x:p+w*i,y:m-I*r,spatialReference:y}),g,n);o&&(a=o.inverseTransform(a)),e.push(a),i>0&&l&&a&&T[r]&&(0,s.pC)(b)&&a.x<T[r].x&&(a.x+=b),a?(S.push((a.x-t.xmin)/(t.xmax-t.xmin)),S.push((t.ymax-a.y)/(t.ymax-t.ymin))):(S.push(NaN),S.push(NaN),A=!0)}T=e}const M=function(e,t){const r=(e[1]+e[5]+e[4*t.rows+1]+e[4*t.rows+5])/4;return[Math.abs((e[0]+e[4]+e[4*t.cols]+e[4*t.cols+4])/4-e[2*t.rows+2]),Math.abs(r-e[2*t.rows+3])]}(S,_),F=new Float32Array((_.cols-1)*(_.rows-1)*2*6),R=new Float32Array([-0,-1,1,-1,1,-0,1,-0,-0]),j=new Float32Array([-1,1,0,0,-1,1,1,0,0]);for(let i=0;i<_.cols-1;i++){for(let e=0;e<_.rows-1;e++){let t=i*_.rows*2+2*e;const r=S[t],n=S[t+1],s=S[t+2],o=S[t+3];t+=2*_.rows;const a=S[t],l=S[t+1],u=S[t+2],c=S[t+3];let p=0,d=12*(e*(_.cols-1)+i);for(let e=0;e<3;e++)F[d++]=R[p++]*r+R[p++]*s+R[p++]*u;p=0;for(let e=0;e<3;e++)F[d++]=R[p++]*n+R[p++]*o+R[p++]*c;p=0;for(let e=0;e<3;e++)F[d++]=j[p++]*r+j[p++]*a+j[p++]*u;p=0;for(let e=0;e<3;e++)F[d++]=j[p++]*n+j[p++]*l+j[p++]*c}if(A)for(let e=0;e<F.length;e++)isNaN(F[e])&&(F[e]=-1)}return{offsets:S,error:M,coefficients:F,spacing:u,size:[_.cols-1,_.rows-1]}}function F(e){const t=e.clone().normalize();return 1===t.length?t[0]:x(t)}function R(e,t,r){const{storageInfo:n,pixelSize:i}=t;let o,a=!1;const{pyramidResolutions:l}=n;if((0,s.pC)(l)&&l.length){const n=(e.x+e.y)/2,s=l[l.length-1],u=(s.x+s.y)/2,p=(i.x+i.y)/2;if(n<=p)o=0;else if(n>=u)o=l.length,a=n/u>8;else{let e,t=p;for(let i=1;i<=l.length;i++){if(e=(l[i-1].x+l[i-1].y)/2,n<=e){n===e?o=i:"down"===r?(o=i-1,a=n/t>8):o="up"===r||n-t>e-n||n/t>2?i:i-1;break}t=e}}const d=0===o?i:l[o-1];return{pyramidLevel:o,pyramidResolution:new c.Z({x:d.x,y:d.y,spatialReference:t.spatialReference}),excessiveReading:a}}const u=Math.log(e.x/i.x)/Math.LN2,p=Math.log(e.y/i.y)/Math.LN2,d=t.storageInfo.maximumPyramidLevel||0;o="down"===r?Math.floor(Math.min(u,p)):"up"===r?Math.ceil(Math.max(u,p)):Math.round((u+p)/2),o<0?o=0:o>d&&(a=o>d+3,o=d);const h=2**o;return{pyramidLevel:o,pyramidResolution:new c.Z({x:h*t.nativePixelSize.x,y:h*t.nativePixelSize.y,spatialReference:t.spatialReference}),excessiveReading:a}}function j(e,t,r=512,n=!0){const{extent:i,spatialReference:s,pixelSize:a}=e,l=g(new c.Z({x:a.x,y:a.y,spatialReference:s}),t,i);if(null==l)return{projectedPixelSize:null,scales:null,srcResolutions:null,isCustomTilingScheme:!1};const u=(l.x+l.y)/2,p=(0,o.c9)(t),d=u*p*96*39.37,h=t.isGeographic?256/r*295828763.7958547:256/r*591657527.591555;let f="vector-magdir"===e.dataType||"vector-uv"===e.dataType;const m=_(i,t);f||n&&(t.isGeographic||t.isWebMercator)&&(f=m.xmin*m.xmax<0);let y,b=d;const v=1.001;if(f){b=h;const e=t.isGeographic?1341104507446289e-21:.29858214164761665,r=e*(96*p*39.37);y=g(new c.Z({x:e,y:e,spatialReference:{wkid:t.isGeographic?4326:3857}}),s,m),y.x*=b/r,y.y*=b/r}else{y={x:a.x,y:a.y};const t=Math.ceil(Math.log(Math.min(e.width,e.height)/32)/Math.LN2);let r=0;for(;b<h*(v/2)&&r<t;)r++,b*=2,y.x*=2,y.y*=2;Math.max(b,h)/Math.min(b,h)<=v&&(b=h)}const x=[b],w=[{x:y.x,y:y.y}],C=Math.min(70.5310735,d)/v;for(;b>=C;)b/=2,y.x/=2,y.y/=2,x.push(b),w.push({x:y.x,y:y.y});return{projectedPixelSize:l,scales:x,srcResolutions:w,isCustomTilingScheme:!f}}},85365:(e,t,r)=>{"use strict";r.d(t,{d:()=>s,h:()=>i});var n=r(5052);const i={type:n.Z,json:{origins:{service:{read:{source:["tileInfo","minScale","maxScale","minLOD","maxLOD"],reader:s}}}}};function s(e,t,r,i){if(!e)return null;const{minScale:s,maxScale:o,minLOD:a,maxLOD:l}=t;if(null!=a&&null!=l)return n.Z.fromJSON(i&&i.ignoreMinMaxLOD?e:{...e,lods:e.lods.filter(({level:e})=>null!=e&&e>=a&&e<=l)});if(0!==s&&0!==o){const t=e=>Math.round(1e4*e)/1e4,r=s?t(s):1/0,i=o?t(o):-1/0;return n.Z.fromJSON({...e,lods:e.lods.filter(e=>{const n=t(e.scale);return n<=r&&n>=i})})}return n.Z.fromJSON(e)}},42233:(e,t,r)=>{"use strict";r.d(t,{Z:()=>b});var n,i=r(8651),s=r(69141),o=r(46942),a=r(47648),l=(r(12131),r(18419),r(28062)),u=r(8680),c=r(50878),p=r(28926),d=r(24557),h=r(49533);let f=n=class extends h.wq{constructor(){super(...arguments),this.description=null,this.label=null,this.minValue=0,this.maxValue=0,this.color=null}clone(){return new n({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,color:(0,s.d9)(this.color)})}};(0,i._)([(0,o.Cb)({type:String,json:{write:!0}})],f.prototype,"description",void 0),(0,i._)([(0,o.Cb)({type:String,json:{write:!0}})],f.prototype,"label",void 0),(0,i._)([(0,o.Cb)({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],f.prototype,"minValue",void 0),(0,i._)([(0,o.Cb)({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],f.prototype,"maxValue",void 0),(0,i._)([(0,o.Cb)({type:d.Z,json:{type:[a.z8],write:!0}})],f.prototype,"color",void 0),f=n=(0,i._)([(0,u.j)("esri.renderers.support.pointCloud.ColorClassBreakInfo")],f);var m,y=f;let g=m=class extends c.Z{constructor(e){super(e),this.type="point-cloud-class-breaks",this.field=null,this.legendOptions=null,this.fieldTransformType=null,this.colorClassBreakInfos=null}clone(){return new m({...this.cloneProperties(),field:this.field,fieldTransformType:this.fieldTransformType,colorClassBreakInfos:(0,s.d9)(this.colorClassBreakInfos),legendOptions:(0,s.d9)(this.legendOptions)})}};(0,i._)([(0,l.J)({pointCloudClassBreaksRenderer:"point-cloud-class-breaks"})],g.prototype,"type",void 0),(0,i._)([(0,o.Cb)({json:{write:!0},type:String})],g.prototype,"field",void 0),(0,i._)([(0,o.Cb)({type:p.Z,json:{write:!0}})],g.prototype,"legendOptions",void 0),(0,i._)([(0,o.Cb)({type:c.Z.fieldTransformTypeKebabDict.apiValues,json:{type:c.Z.fieldTransformTypeKebabDict.jsonValues,read:c.Z.fieldTransformTypeKebabDict.read,write:c.Z.fieldTransformTypeKebabDict.write}})],g.prototype,"fieldTransformType",void 0),(0,i._)([(0,o.Cb)({type:[y],json:{write:!0}})],g.prototype,"colorClassBreakInfos",void 0),g=m=(0,i._)([(0,u.j)("esri.renderers.PointCloudClassBreaksRenderer")],g);var b=g},50878:(e,t,r)=>{"use strict";r.d(t,{Z:()=>I});var n,i=r(8651),s=r(5902),o=r(49533),a=r(69141),l=r(46942),u=(r(47648),r(12131),r(18419),r(8680));let c=n=class extends o.wq{constructor(){super(...arguments),this.field=null,this.minValue=0,this.maxValue=255}clone(){return new n({field:this.field,minValue:this.minValue,maxValue:this.maxValue})}};(0,i._)([(0,l.Cb)({type:String,json:{write:!0}})],c.prototype,"field",void 0),(0,i._)([(0,l.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],c.prototype,"minValue",void 0),(0,i._)([(0,l.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],c.prototype,"maxValue",void 0),c=n=(0,i._)([(0,u.j)("esri.renderers.support.pointCloud.ColorModulation")],c);var p=c;const d=new s.Xn({pointCloudFixedSizeAlgorithm:"fixed-size",pointCloudSplatAlgorithm:"splat"});let h=class extends o.wq{};(0,i._)([(0,l.Cb)({type:d.apiValues,readOnly:!0,nonNullable:!0,json:{type:d.jsonValues,read:!1,write:d.write}})],h.prototype,"type",void 0),h=(0,i._)([(0,u.j)("esri.renderers.support.pointCloud.PointSizeAlgorithm")],h);var f,m=h,y=r(28062);let g=f=class extends m{constructor(){super(...arguments),this.type="fixed-size",this.size=0,this.useRealWorldSymbolSizes=null}clone(){return new f({size:this.size,useRealWorldSymbolSizes:this.useRealWorldSymbolSizes})}};(0,i._)([(0,y.J)({pointCloudFixedSizeAlgorithm:"fixed-size"})],g.prototype,"type",void 0),(0,i._)([(0,l.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],g.prototype,"size",void 0),(0,i._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],g.prototype,"useRealWorldSymbolSizes",void 0),g=f=(0,i._)([(0,u.j)("esri.renderers.support.pointCloud.PointSizeFixedSizeAlgorithm")],g);var b,v=g;let x=b=class extends m{constructor(){super(...arguments),this.type="splat",this.scaleFactor=1}clone(){return new b({scaleFactor:this.scaleFactor})}};(0,i._)([(0,y.J)({pointCloudSplatAlgorithm:"splat"})],x.prototype,"type",void 0),(0,i._)([(0,l.Cb)({type:Number,value:1,nonNullable:!0,json:{write:!0}})],x.prototype,"scaleFactor",void 0),x=b=(0,i._)([(0,u.j)("esri.renderers.support.pointCloud.PointSizeSplatAlgorithm")],x);const _={key:"type",base:m,typeMap:{"fixed-size":v,splat:x}},w=(0,s.wY)()({pointCloudClassBreaksRenderer:"point-cloud-class-breaks",pointCloudRGBRenderer:"point-cloud-rgb",pointCloudStretchRenderer:"point-cloud-stretch",pointCloudUniqueValueRenderer:"point-cloud-unique-value"});let C=class extends o.wq{constructor(e){super(e),this.type=void 0,this.pointSizeAlgorithm=null,this.colorModulation=null,this.pointsPerInch=10}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}cloneProperties(){return{pointSizeAlgorithm:(0,a.d9)(this.pointSizeAlgorithm),colorModulation:(0,a.d9)(this.colorModulation),pointsPerInch:(0,a.d9)(this.pointsPerInch)}}};(0,i._)([(0,l.Cb)({type:w.apiValues,readOnly:!0,nonNullable:!0,json:{type:w.jsonValues,read:!1,write:w.write}})],C.prototype,"type",void 0),(0,i._)([(0,l.Cb)({types:_,json:{write:!0}})],C.prototype,"pointSizeAlgorithm",void 0),(0,i._)([(0,l.Cb)({type:p,json:{write:!0}})],C.prototype,"colorModulation",void 0),(0,i._)([(0,l.Cb)({json:{write:!0},nonNullable:!0,type:Number})],C.prototype,"pointsPerInch",void 0),C=(0,i._)([(0,u.j)("esri.renderers.PointCloudRenderer")],C),(C||(C={})).fieldTransformTypeKebabDict=new s.Xn({none:"none",lowFourBit:"low-four-bit",highFourBit:"high-four-bit",absoluteValue:"absolute-value",moduloTen:"modulo-ten"});var I=C},68052:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n,i=r(8651),s=r(69141),o=r(46942),a=(r(47648),r(12131),r(18419),r(28062)),l=r(8680),u=r(50878),c=r(28926),p=r(12295);let d=n=class extends u.Z{constructor(e){super(e),this.type="point-cloud-stretch",this.field=null,this.legendOptions=null,this.fieldTransformType=null,this.stops=null}clone(){return new n({...this.cloneProperties(),field:(0,s.d9)(this.field),fieldTransformType:(0,s.d9)(this.fieldTransformType),stops:(0,s.d9)(this.stops),legendOptions:(0,s.d9)(this.legendOptions)})}};(0,i._)([(0,a.J)({pointCloudStretchRenderer:"point-cloud-stretch"})],d.prototype,"type",void 0),(0,i._)([(0,o.Cb)({json:{write:!0},type:String})],d.prototype,"field",void 0),(0,i._)([(0,o.Cb)({type:c.Z,json:{write:!0}})],d.prototype,"legendOptions",void 0),(0,i._)([(0,o.Cb)({type:u.Z.fieldTransformTypeKebabDict.apiValues,json:{type:u.Z.fieldTransformTypeKebabDict.jsonValues,read:u.Z.fieldTransformTypeKebabDict.read,write:u.Z.fieldTransformTypeKebabDict.write}})],d.prototype,"fieldTransformType",void 0),(0,i._)([(0,o.Cb)({type:[p.Z],json:{write:!0}})],d.prototype,"stops",void 0),d=n=(0,i._)([(0,l.j)("esri.renderers.PointCloudStretchRenderer")],d);var h=d},9510:(e,t,r)=>{"use strict";r.d(t,{Z:()=>b});var n,i=r(8651),s=r(69141),o=r(46942),a=r(47648),l=(r(12131),r(18419),r(28062)),u=r(8680),c=r(50878),p=r(28926),d=r(24557),h=r(49533);let f=n=class extends h.wq{constructor(){super(...arguments),this.description=null,this.label=null,this.values=null,this.color=null}clone(){return new n({description:this.description,label:this.label,values:(0,s.d9)(this.values),color:(0,s.d9)(this.color)})}};(0,i._)([(0,o.Cb)({type:String,json:{write:!0}})],f.prototype,"description",void 0),(0,i._)([(0,o.Cb)({type:String,json:{write:!0}})],f.prototype,"label",void 0),(0,i._)([(0,o.Cb)({type:[String],json:{write:!0}})],f.prototype,"values",void 0),(0,i._)([(0,o.Cb)({type:d.Z,json:{type:[a.z8],write:!0}})],f.prototype,"color",void 0),f=n=(0,i._)([(0,u.j)("esri.renderers.support.pointCloud.ColorUniqueValueInfo")],f);var m,y=f;let g=m=class extends c.Z{constructor(e){super(e),this.type="point-cloud-unique-value",this.field=null,this.fieldTransformType=null,this.colorUniqueValueInfos=null,this.legendOptions=null}clone(){return new m({...this.cloneProperties(),field:(0,s.d9)(this.field),fieldTransformType:(0,s.d9)(this.fieldTransformType),colorUniqueValueInfos:(0,s.d9)(this.colorUniqueValueInfos),legendOptions:(0,s.d9)(this.legendOptions)})}};(0,i._)([(0,l.J)({pointCloudUniqueValueRenderer:"point-cloud-unique-value"})],g.prototype,"type",void 0),(0,i._)([(0,o.Cb)({json:{write:!0},type:String})],g.prototype,"field",void 0),(0,i._)([(0,o.Cb)({type:c.Z.fieldTransformTypeKebabDict.apiValues,json:{type:c.Z.fieldTransformTypeKebabDict.jsonValues,read:c.Z.fieldTransformTypeKebabDict.read,write:c.Z.fieldTransformTypeKebabDict.write}})],g.prototype,"fieldTransformType",void 0),(0,i._)([(0,o.Cb)({type:[y],json:{write:!0}})],g.prototype,"colorUniqueValueInfos",void 0),(0,i._)([(0,o.Cb)({type:p.Z,json:{write:!0}})],g.prototype,"legendOptions",void 0),g=m=(0,i._)([(0,u.j)("esri.renderers.PointCloudUniqueValueRenderer")],g);var b=g},17662:(e,t,r)=>{"use strict";r.d(t,{QM:()=>o,hy:()=>a,uI:()=>s});var n=r(6573),i=r(53934);const s=(()=>{if(!("document"in n.Z))return()=>null;const e=document.createElement("canvas"),t=e.getContext("2d");return e.height=512,e.width=1,r=>{t.clearRect(0,0,1,e.height);const n=t.createLinearGradient(0,0,0,e.height);for(const{ratio:e,color:t}of r.colorStops)n.addColorStop(Math.max(e,.001),`rgba(${t[0]}, ${t[1]}, ${t[2]}, ${t[3]})`);return t.fillStyle=n,t.fillRect(0,0,1,e.height),t.getImageData(0,0,1,e.height).data}})();function o(e,t,r,n){const{blurRadius:i,fieldOffset:s,field:o}=t,a=new Float64Array(r*n),l=function(e){const t=Math.round(3*e),r=2*e*e,n=new Float64Array(2*t+1);for(let i=0;i<=n.length;i++)n[i]=Math.exp(-((i-t)**2)/r)/Math.sqrt(2*Math.PI)*(e/2);return n}(i),u=Math.round(3*i);let c,p=Number.NEGATIVE_INFINITY;const d=function(e,t){return null!=e?"string"==typeof t?t=>-1*+t.readAttribute(e):r=>+r.readAttribute(e)+t:e=>1}(o,s),h=new Set;for(const f of e){const e=f.getCursor();for(;e.next();){const t=e.getObjectId();if(h.has(t))continue;h.add(t);const i=e.readLegacyPointGeometry(),s=128;if(i.x<-s||i.x>=r+s||i.y<-s||i.y>n+s)continue;const o=+d(e),f=Math.round(i.x)-u,m=Math.round(i.y)-u,y=Math.max(0,f),g=Math.max(0,m),b=Math.min(n,Math.round(i.y)+u),v=Math.min(r,Math.round(i.x)+u);for(let e=g;e<b;e++){const t=l[e-m];for(let n=y;n<v;n++)c=a[e*r+n]+=t*l[n-f]*o,c>p&&(p=c)}}}return{matrix:a.buffer,max:p}}function a(e,t,r,n,s,o){e.canvas.width=e.canvas.height=t,e.clearRect(0,0,t,t);const a=e.getImageData(0,0,t,t);r&&n&&a.data.set(new Uint8ClampedArray(function(e,t,r,n,s){const o=new Uint32Array(e*e),a="buffer"in t?t:new Float64Array(t),l="buffer"in r?new Uint32Array(r.buffer):new Uint32Array(new Uint8Array(r).buffer),u=l.length/(s-n);for(let c=0;c<a.length;c++){const e=Math.floor((a[c]-n)*u);o[c]=l[(0,i.uZ)(e,0,l.length-1)]}return o.buffer}(t,r,n,s,o))),e.putImageData(a,0,0)}},95637:(e,t,r)=>{"use strict";r.d(t,{t:()=>s});var n=r(16304),i=r(93668);function s(e,t){return o.apply(this,arguments)}function o(){return(o=(0,n.Z)(function*(e,t){const{data:r}=yield(0,i.default)(e,{responseType:"image",...t});return r})).apply(this,arguments)}},72461:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(84191),i=r(57145),s=r(21083),o=r(84991);class a{dispose(){this._rasterizationCanvas=null}rasterizeJSONResource(e,t,r){if(this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas")),"simple-fill"===e.type||"esriSFS"===e.type){const[r,i,s]=n.fN.rasterizeSimpleFill(this._rasterizationCanvas,e.style,t);return{size:[i,s],image:new Uint32Array(r.buffer),sdf:!1,simplePattern:!0,anchorX:0,anchorY:0}}if("simple-line"===e.type||"esriSLS"===e.type){const[t,r,i]=n.fN.rasterizeSimpleLine(e.style,e.cap);return{size:[r,i],image:new Uint32Array(t.buffer),sdf:!0,simplePattern:!0,anchorX:0,anchorY:0}}let o,a,l;if("simple-marker"===e.type||"esriSMS"===e.type||"line-marker"===e.type?(o=n.B$.fromSimpleMarker(e),l=(0,s.Fp)(o)):"CIMHatchFill"===e.type?(o=n.B$.fromCIMHatchFill(e),a=new i.Z(o.frame.xmin,-o.frame.ymax,o.frame.xmax-o.frame.xmin,o.frame.ymax-o.frame.ymin)):e.markerPlacement&&"CIMMarkerPlacementInsidePolygon"===e.markerPlacement.type?(o=n.B$.fromCIMInsidePolygon(e),a=new i.Z(o.frame.xmin,-o.frame.ymax,o.frame.xmax-o.frame.xmin,o.frame.ymax-o.frame.ymin)):(o=e,l=(0,s.Fp)(o)),l&&!r){const[e,t,r]=(0,s.RL)(l);return e?{size:[t,r],image:new Uint32Array(e.buffer),sdf:!0,simplePattern:!0,anchorX:0,anchorY:0}:null}const[u,c,p,d,h]=n.B$.rasterize(this._rasterizationCanvas,o,a,!r);return u?{size:[c,p],image:new Uint32Array(u.buffer),sdf:!1,simplePattern:!1,anchorX:d,anchorY:h}:null}rasterizeImageResource(e,t,r,n){this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas")),this._rasterizationCanvas.width=e,this._rasterizationCanvas.height=t;const i=this._rasterizationCanvas.getContext("2d");r instanceof ImageData?i.putImageData(r,0,0):(r.setAttribute("width",`${e}px`),r.setAttribute("height",`${t}px`),i.drawImage(r,0,0,e,t));const s=i.getImageData(0,0,e,t),a=new Uint8Array(s.data);if(n)for(const o of n)if(o&&o.oldColor&&4===o.oldColor.length&&o.newColor&&4===o.newColor.length){const[e,t,r,n]=o.oldColor,[i,s,l,u]=o.newColor;if(e===i&&t===s&&r===l&&n===u)continue;for(let o=0;o<a.length;o+=4)e===a[o]&&t===a[o+1]&&r===a[o+2]&&n===a[o+3]&&(a[o]=i,a[o+1]=s,a[o+2]=l,a[o+3]=u)}let l;for(let o=0;o<a.length;o+=4)l=a[o+3]/255,a[o]=a[o]*l,a[o+1]=a[o+1]*l,a[o+2]=a[o+2]*l;let u=a,c=e,p=t;const d=512;if(c>=d||p>=d){const r=c/p;r>1?(c=d,p=Math.round(d/r)):(p=d,c=Math.round(d*r)),u=new Uint8Array(4*c*p);const n=new Uint8ClampedArray(u.buffer);(0,o.TT)(a,e,t,n,c,p,!1)}return{size:[c,p],image:new Uint32Array(u.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}}}},32264:(e,t,r)=>{"use strict";r.d(t,{eY:()=>p});var n=r(54704),i=r(93883),s=r(45910),o=r(90585),a=(r(98248),r(8485),r(12131),r(6532),r(86712),r(17757),r(40766),r(28989)),l=(r(13811),r(66863)),u=r(53730);function c(e,t,r){const n={target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,wrapMode:33071};return t&&r&&(n.width=t,n.height=r),new a.Z(e,n)}class p extends l.s{constructor(e=null,t,r=!0){super(),this.requestRenderOnSourceChangedEnabled=r,this._textureInvalidated=!0,this.stencilRef=0,this.coordScale=[1,1],this._height=void 0,this.pixelRatio=1,this.resolution=0,this.rotation=0,this._source=null,this._width=void 0,this.x=0,this.y=0,this.blendFunction=t,this.source=e,this.requestRender=this.requestRender.bind(this)}destroy(){this._texture&&(this._texture.dispose(),this._texture=null)}get isSourceScaled(){return this.width!==this.sourceWidth||this.height!==this.sourceHeight}get height(){return void 0!==this._height?this._height:this.sourceHeight}set height(e){this._height=e}get source(){return this._source}set source(e){this._source=e,this.invalidateTexture()}get sourceHeight(){return this._source instanceof HTMLImageElement?this._source.naturalHeight:this._source.height}get sourceWidth(){return this._source instanceof HTMLImageElement?this._source.naturalWidth:this._source.width}get width(){return void 0!==this._width?this._width:this.sourceWidth}set width(e){this._width=e}beforeRender(e){super.beforeRender(e),this.updateTexture(e.context)}invalidateTexture(){this._textureInvalidated||(this._textureInvalidated=!0,this.requestRenderOnSourceChangedEnabled&&this.requestRender())}_createTransforms(){return{dvs:(0,s.c)()}}setTransform(e){const t=(0,i.b)(this.transforms.dvs),[r,n]=e.toScreenNoRotation([0,0],[this.x,this.y]),s=this.resolution/this.pixelRatio/e.resolution,a=s*this.width,l=s*this.height,u=Math.PI*this.rotation/180;(0,i.c)(t,t,(0,o.f)(r,n)),(0,i.c)(t,t,(0,o.f)(a/2,l/2)),(0,i.r)(t,t,-u),(0,i.c)(t,t,(0,o.f)(-a/2,-l/2)),(0,i.j)(t,t,(0,o.f)(a,l)),(0,i.m)(this.transforms.dvs,e.displayViewMat3,t)}setSamplingProfile(e){this._texture&&(e.mips&&!this._texture.descriptor.hasMipmap&&this._texture.generateMipmap(),this._texture.setSamplingMode(e.samplingMode))}bind(e,t){this._texture&&e.bindTexture(this._texture,t)}updateTexture(e){var t;if(!this.stage)return null==(t=this._texture)||t.dispose(),void(this._texture=null);if(!this._textureInvalidated)return;this._textureInvalidated=!1,this._texture||(this._texture=this.source?c(e,this.sourceWidth,this.sourceHeight):c(e));const r=this.source;if(r){if(this._texture.resize(this.sourceWidth,this.sourceHeight),(i=r)&&"render"in i)if(r instanceof u.Z){const e=r.getRenderedRasterPixels();this._texture.setData((0,n.pC)(e)?e.renderedRasterPixels:null)}else this._texture.setData(function(e){const t=document.createElement("canvas");return t.width=e.width,t.height=e.height,e.render(t.getContext("2d")),t}(r));else(function(e){return e&&!("render"in e)})(r)&&this._texture.setData(r);this.ready()}else this._texture.setData(null);var i}onAttach(){this.invalidateTexture()}onDetach(){this.invalidateTexture()}}},28690:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(54709),i=r(63054),s=r(30071);class o extends s.Z{get requiresDedicatedFBO(){return this.children.some(e=>"additive"===e.blendFunction)}prepareRenderPasses(e){const t=e.registerRenderPass({name:"bitmap",brushes:[n.U.bitmap],target:()=>this.children,drawPhase:i.jx.MAP});return[...super.prepareRenderPasses(e),t]}}},37012:(e,t,r)=>{"use strict";r.d(t,{s:()=>p});var n=r(35718),i=r(45910),s=r(32264),o=r(50877);class a extends o.I{constructor(e,t,r,n,i,o=null){super(e,t,r,n,i),this.bitmap=new s.eY(o,"standard",!1),this.bitmap.coordScale=[n,i],this.bitmap.once("isReady",()=>this.ready())}destroy(){super.destroy(),this.bitmap.destroy()}beforeRender(e){super.beforeRender(e),this.bitmap.beforeRender(e)}afterRender(e){super.afterRender(e),this.bitmap.afterRender(e)}set stencilRef(e){this.bitmap.stencilRef=e}get stencilRef(){return this.bitmap.stencilRef}_createTransforms(){return{dvs:(0,i.c)(),tileMat3:(0,i.c)()}}setTransform(e,t){super.setTransform(e,t),this.bitmap.transforms.dvs=this.transforms.dvs}onAttach(){this.bitmap.stage=this.stage}onDetach(){this.bitmap&&(this.bitmap.stage=null)}}var l=r(54709),u=r(63054),c=r(37882);class p extends c.Z{get requiresDedicatedFBO(){return this.children.some(e=>"additive"===e.bitmap.blendFunction)}createTile(e){const t=this._tileInfoView.getTileBounds((0,n.Ue)(),e),[r,i]=this._tileInfoView.tileInfo.size;return new a(e,t[0],t[3],r,i)}destroyTile(){}prepareRenderPasses(e){const t=e.registerRenderPass({name:"bitmap (tile)",brushes:[l.U.bitmap],target:()=>this.children.map(e=>e.bitmap),drawPhase:u.jx.MAP});return[...super.prepareRenderPasses(e),t]}doRender(e){this.visible&&e.drawPhase===u.jx.MAP&&super.doRender(e)}}},53730:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(54704);class i{constructor(e,t,r){this.pixelBlock=e,this.extent=t,this.originalPixelBlock=r}get width(){return(0,n.pC)(this.pixelBlock)?this.pixelBlock.width:0}get height(){return(0,n.pC)(this.pixelBlock)?this.pixelBlock.height:0}render(e){const t=this.pixelBlock;if((0,n.Wi)(t))return;const r=this.filter({pixelBlock:t});if((0,n.Wi)(r.pixelBlock))return;const i=r.pixelBlock.getAsRGBA(),s=e.createImageData(r.pixelBlock.width,r.pixelBlock.height);s.data.set(i),e.putImageData(s,0,0)}getRenderedRasterPixels(){const e=this.filter({pixelBlock:this.pixelBlock});return(0,n.Wi)(e.pixelBlock)?null:{width:e.pixelBlock.width,height:e.pixelBlock.height,renderedRasterPixels:new Uint8Array(e.pixelBlock.getAsRGBA().buffer)}}}},25010:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(98154),i=r(10478),s=r(55757);class o{constructor(e){if(e instanceof i.y)this._tilemapCache=e;else{if(!e||!("index"in e))throw new Error("Invalid tilemap!");this._tilemap=e.index}}dataKey(e,t){if(this._tilemapCache){const{level:r,row:i,col:o}=e,a=new s.Z(e);return this._tilemapCache.fetchAvailabilityUpsample(r,i,o,a,t).then(()=>(a.world=e.world,a)).catch(e=>{if((0,n.D_)(e))throw e;return null})}return this._getIndexedDataKey(e)}forEach(e,t,r,n,i){this._callback=i,this._maxLevel=t+e,this._forEach(this._tilemap,t,r,n)}_forEach(e,t,r,n){0!==e&&(this._callback(t,r,n),t!==this._maxLevel&&"object"==typeof e&&(this._forEach(e[0],t+1,2*r,2*n),this._forEach(e[1],t+1,2*r,2*n+1),this._forEach(e[2],t+1,2*r+1,2*n),this._forEach(e[3],t+1,2*r+1,2*n+1)))}_getIndexedDataKey(e){const t=[e];if(e.level<0||e.row<0||e.col<0||e.row>>e.level>0||e.col>>e.level>0)return Promise.resolve(null);let r=e;for(;0!==r.level;)r=new s.Z(r.level-1,r.row>>1,r.col>>1,r.world),t.push(r);let n,i,o=this._tilemap,a=t.pop();if(1===o)return Promise.resolve(a);for(;t.length;)if(n=t.pop(),i=(1&n.col)+((1&n.row)<<1),o){if(0===o[i]){a=null;break}if(1===o[i]){a=n;break}a=n,o=o[i]}return Promise.resolve(a)}}},33110:(e,t,r)=>{"use strict";r.d(t,{Y:()=>o});var n=r(8651),i=(r(46942),r(12131),r(47648),r(18419),r(8680)),s=r(37012);const o=e=>{let t=class extends e{attach(){this.view.timeline.record(`${this.layer.title} (BitmapTileLayer) Attach`),this._bitmapView=new s.s(this._tileInfoView),this.container.addChild(this._bitmapView)}detach(){this.container.removeChild(this._bitmapView),this._bitmapView.removeAllChildren()}};return t=(0,n._)([(0,i.j)("esri.views.2d.layers.BitmapTileLayerView2D")],t),t}},89312:(e,t,r)=>{"use strict";r.d(t,{p:()=>f,k:()=>h});var n=r(84433),i=r(70222),s=(r(12131),r(54704)),o=r(42373),a=r(288),l=r(76220),u=r(34611);function c(e,t){return e<<16|t}function p(e){return(4294901760&e)>>>16}function d(e){return 65535&e}const h={getObjectId:e=>e.getObjectId(),getAttributes:e=>e.readAttributes(),getAttribute:(e,t)=>e.readAttribute(t),cloneWithGeometry:(e,t)=>e,getGeometry:e=>e.readHydratedGeometry(),getCentroid:(e,t)=>e.readCentroid()};class f extends l.J{constructor(e,t,r){super(e,t),this.featureAdapter=h,this.events=new i.Z,this._featureSetsByInstance=new Map,this._objectIdToDisplayId=new Map,this._spatialIndexInvalid=!0,this._indexSearchCache=new n.Z(50),this._index=(0,o.r)(9,e=>({minX:this._storage.getXMin(e),minY:this._storage.getYMin(e),maxX:this._storage.getXMax(e),maxY:this._storage.getYMax(e)})),this._storage=t,this.mode=r}get storage(){return this._storage}get storeStatistics(){let e=0,t=0,r=0;return this.forEach(n=>{const i=n.readGeometry();i&&(t+=i.isPoint?1:i.lengths.reduce((e,t)=>e+t,0),r+=i.isPoint?1:i.lengths.length,e+=1)}),{featureCount:e,vertexCount:t,ringCount:r}}hasInstance(e){return this._featureSetsByInstance.has(e)}onTileData(e,t){if((0,s.Wi)(t.addOrUpdate))return t;if(t.addOrUpdate.attachStorage(this._storage),"snapshot"===this.mode){const r=t.addOrUpdate.getCursor();for(;r.next();){const t=r.getDisplayId();this.setComputedAttributes(this._storage,r,t,e.scale)}return t}this._featureSetsByInstance.set(t.addOrUpdate.instance,t.addOrUpdate);const r=t.addOrUpdate.getCursor();for(;r.next();)this._insertFeature(r,e.scale);return this._spatialIndexInvalid=!0,this.events.emit("changed"),t}search(e){this._rebuildIndex();const t=e.id,r=this._indexSearchCache.find(e=>e.tileId===t);if((0,s.pC)(r))return r.readers;const n=new Map,i=this._searchIndex(e.bounds),o=[];for(const s of i){const e=this._storage.getInstanceId(s),t=p(e),r=d(e);n.has(t)||n.set(t,[]),n.get(t).push(r)}return n.forEach((e,t)=>{const r=this._featureSetsByInstance.get(t);o.push(u.t.from(r,e))}),this._indexSearchCache.enqueue({tileId:t,readers:o}),o}insert(e){const t=e.getCursor(),r=this._storage;for(;t.next();){var n;const e=c(t.instance,t.getIndex()),i=t.getObjectId(),s=null!=(n=this._objectIdToDisplayId.get(i))?n:this._storage.createDisplayId();t.setDisplayId(s),r.setInstanceId(s,e),this._objectIdToDisplayId.set(i,s)}this._featureSetsByInstance.set(e.instance,e),this._spatialIndexInvalid=!0}remove(e){const t=this._objectIdToDisplayId.get(e);if(!t)return;const r=this._storage.getInstanceId(t),n=d(r),i=p(r),s=this._featureSetsByInstance.get(i);this._objectIdToDisplayId.delete(e),this._storage.releaseDisplayId(t),s.removeAtIndex(n),s.isEmpty&&this._featureSetsByInstance.delete(i),this._spatialIndexInvalid=!0}forEach(e){this._objectIdToDisplayId.forEach(t=>{const r=this._storage.getInstanceId(t),n=this._lookupFeature(r);e(n)})}forEachUnsafe(e){this._objectIdToDisplayId.forEach(t=>{const r=this._storage.getInstanceId(t),n=p(r),i=d(r),s=this._getFeatureSet(n);s.setIndex(i),e(s)})}forEachInBounds(e,t){const r=this._searchIndex(e);for(const n of r){const e=this.lookupFeatureByDisplayId(n,this._storage);t((0,s.Wg)(e))}}forEachBounds(e,t,r){this._rebuildIndex();const n=[0,0,0,0];for(const i of e){if(!i.readGeometry())continue;const e=i.getDisplayId();n[0]=this._storage.getXMin(e),n[1]=this._storage.getYMin(e),n[2]=this._storage.getXMax(e),n[3]=this._storage.getYMax(e),t((0,a.JR)(r,n))}}sweepFeatures(e,t,r){this._spatialIndexInvalid=!0,this._objectIdToDisplayId.forEach((n,i)=>{e.has(n)||(t.releaseDisplayId(n),r&&r.unsetAttributeData(n),this._objectIdToDisplayId.delete(i))}),this.events.emit("changed")}sweepFeatureSets(e){this._spatialIndexInvalid=!0,this._featureSetsByInstance.forEach((t,r)=>{e.has(r)||this._featureSetsByInstance.delete(r)})}lookupObjectId(e,t){const r=this.lookupFeatureByDisplayId(e,t);return(0,s.Wi)(r)?null:r.getObjectId()}lookupDisplayId(e){return this._objectIdToDisplayId.get(e)}lookupFeatureByDisplayId(e,t){const r=t.getInstanceId(e);return this._lookupFeature(r)}lookupByDisplayIdUnsafe(e){const t=this._storage.getInstanceId(e),r=p(t),n=d(t),i=this._getFeatureSet(r);return i?(i.setIndex(n),i):null}_insertFeature(e,t){const r=this._storage,n=e.getObjectId(),i=c(e.instance,e.getIndex());r.getInstanceId(e.getDisplayId());let s=this._objectIdToDisplayId.get(n);s||(s=r.createDisplayId(),this._objectIdToDisplayId.set(n,s),this._spatialIndexInvalid=!0),e.setDisplayId(s),r.setInstanceId(s,i),this.setComputedAttributes(r,e,s,t)}_searchIndex(e){return this._rebuildIndex(),this._index.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]})}_rebuildIndex(){if(!this._spatialIndexInvalid)return;const e=[];"snapshot"===this.mode?this._featureSetsByInstance.forEach(t=>{const r=t.getCursor();for(;r.next();){const t=r.getDisplayId();this._storage.setBounds(t,r)&&e.push(t)}}):this._objectIdToDisplayId.forEach(t=>{const r=this._storage.getInstanceId(t);this._storage.setBounds(t,this._lookupFeature(r))&&e.push(t)}),this._index.clear(),this._index.load(e),this._indexSearchCache.clear(),this._spatialIndexInvalid=!1}_lookupFeature(e){const t=p(e),r=d(e),n=this._getFeatureSet(t);if(!n)return null;const i=n.getCursor();return i.setIndex(r),i}_getFeatureSet(e){return this._featureSetsByInstance.get(e)}}},76220:(e,t,r)=>{"use strict";r.d(t,{J:()=>c});var n=r(16304),i=r(12131),s=r(54704),o=r(16678),a=r(10954),l=r(18419);const u=r.e(3269).then(r.bind(r,63269));class c{constructor(e,t){this._canCacheExpressionValue=!1,this._sourceInfo=e,this._bitsets={computed:t.getBitset(t.createBitset())}}invalidate(){this._bitsets.computed.clear()}updateSchema(e,t){var r=this;return(0,n.Z)(function*(){const n=(0,o.Hg)(r._schema,t);if(r._schema=t,!t||(0,s.Wi)(n)||!(0,o.uD)(n,"attributes"))return;(0,i.Z)("esri-2d-update-debug")&&console.debug("Applying Update - Store:",n),r._bitsets.computed.clear(),e.targets[t.name]=!0;const a=t.attributes,l=[],u=[];for(const e in a){const t=a[e];switch(t.type){case"field":break;case"expression":l.push(r._createArcadeComputedField(t));break;case"label-expression":l.push(r._createLabelArcadeComputedField(t));break;case"statistic":u.push(t)}}r._computedFields=yield Promise.all(l),r._canCacheExpressionValue=!r._computedFields.some(e=>"expression"===e.type&&e.expression.referencesScale()),r._statisticFields=u})()}setComputedAttributes(e,t,r,n){const i=this._bitsets.computed;if(!this._canCacheExpressionValue||!i.has(r)){i.set(r);for(const i of this._computedFields){const s=this._evaluateField(t,i,n);switch(i.resultType){case"numeric":e.setComputedNumericAtIndex(r,i.fieldIndex,s);break;case"string":e.setComputedStringAtIndex(r,i.fieldIndex,s)}}}}_createArcadeComputedField(e){var t=this;return(0,n.Z)(function*(){const r=t._sourceInfo.spatialReference,n=t._sourceInfo.fieldsIndex;return{...e,expression:yield(0,a.Yi)(e.valueExpression,r,n)}})()}_createLabelArcadeComputedField(e){var t=this;return(0,n.Z)(function*(){const r=t._sourceInfo.spatialReference,n=t._sourceInfo.fieldsIndex,{createLabelFunction:i}=yield u,s=yield i(e.label,n,r);return{...e,builder:s}})()}_evaluateField(e,t,r){switch(t.type){case"label-expression":{const r=e.readArcadeFeature();return t.builder.evaluate(r)||""}case"expression":{const{expression:n}=t;return function(e,t,r){e.referencesGeometry();const n=t.readArcadeFeature();try{return e.evaluate({...r,$feature:n})}catch(c){return l.Z.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",c),null}}(n,e,{$view:{scale:r}})}}}}},75990:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(8651),i=r(1518),s=r(46942),o=(r(12131),r(47648),r(18419),r(8680));let a=class extends i.r{initialize(){}destroy(){}get supportsTileUpdates(){return!1}get spatialReference(){const e=this.get("tileStore.tileScheme.spatialReference");return e&&e.toJSON()||null}};(0,n._)([(0,s.Cb)({readOnly:!0})],a.prototype,"supportsTileUpdates",null),(0,n._)([(0,s.Cb)({constructOnly:!0})],a.prototype,"remoteClient",void 0),(0,n._)([(0,s.Cb)({constructOnly:!0})],a.prototype,"service",void 0),(0,n._)([(0,s.Cb)()],a.prototype,"spatialReference",null),(0,n._)([(0,s.Cb)({constructOnly:!0})],a.prototype,"tileInfo",void 0),(0,n._)([(0,s.Cb)({constructOnly:!0})],a.prototype,"tileStore",void 0),a=(0,n._)([(0,o.j)("esri.views.2d.layers.features.processors.BaseProcessor")],a);var l=a},34611:(e,t,r)=>{"use strict";r.d(t,{t:()=>i});var n=r(6152);class i extends n.s{constructor(e,t){super(n.s.createInstance()),this._currentIndex=-1,this._reader=e,this._indices=t}static from(e,t){return new i(e.copy(),t)}get hasNext(){return this._currentIndex+1<this._indices.length}getSize(){return this._indices.length}getCursor(){return this.copy()}copy(){const e=new i(this._reader.copy(),this._indices);return e._currentIndex=this._currentIndex,e}next(){for(;this._nextIndex()&&!this._reader._getExists(););return this._currentIndex<this._indices.length}_nextIndex(){return++this._currentIndex<this._indices.length&&(this._reader.setIndex(this._indices[this._currentIndex]),!0)}setArcadeSpatialReference(e){this._reader.setArcadeSpatialReference(e)}attachStorage(e){this._reader.attachStorage(e)}get geometryType(){return this._reader.geometryType}get hasFeatures(){return this._reader.hasFeatures}get exceededTransferLimit(){return this._reader.exceededTransferLimit}get hasZ(){return this._reader.hasZ}get hasM(){return this._reader.hasM}getStorage(){return this._reader.getStorage()}getComputedNumeric(e){return this._reader.getComputedNumericAtIndex(0)}setComputedNumeric(e,t){return this._reader.setComputedNumericAtIndex(t,0)}getComputedString(e){return this._reader.getComputedStringAtIndex(0)}setComputedString(e,t){return this._reader.setComputedStringAtIndex(0,t)}getComputedNumericAtIndex(e){return this._reader.getComputedNumericAtIndex(e)}setComputedNumericAtIndex(e,t){this._reader.setComputedNumericAtIndex(e,t)}getComputedStringAtIndex(e){return this._reader.getComputedStringAtIndex(e)}setComputedStringAtIndex(e,t){return this._reader.setComputedStringAtIndex(e,t)}transform(e,t,r,n){const i=this.copy();return i._reader=this._reader.transform(e,t,r,n),i}readAttribute(e,t=!1){return this._reader.readAttribute(e,t)}readAttributes(){return this._reader.readAttributes()}joinAttributes(e){return this._reader.joinAttributes(e)}readArcadeFeature(){return this._reader.readArcadeFeature()}geometry(){return this._reader.geometry()}field(e){return this.readAttribute(e,!0)}hasField(e){return this._reader.hasField(e)}setField(e,t){return this._reader.setField(e,t)}keys(){return this._reader.keys()}castToText(){return this._reader.castToText()}getQuantizationTransform(){return this._reader.getQuantizationTransform()}getAttributeHash(){return this._reader.getAttributeHash()}getObjectId(){return this._reader.getObjectId()}getDisplayId(){return this._reader.getDisplayId()}setDisplayId(e){return this._reader.setDisplayId(e)}getGroupId(){return this._reader.getGroupId()}setGroupId(e){return this._reader.setGroupId(e)}getXHydrated(){return this._reader.getXHydrated()}getYHydrated(){return this._reader.getYHydrated()}getX(){return this._reader.getX()}getY(){return this._reader.getY()}setIndex(e){return this._reader.setIndex(e)}getIndex(){return this._reader.getIndex()}readLegacyFeature(){return this._reader.readLegacyFeature()}readOptimizedFeature(){return this._reader.readOptimizedFeature()}readLegacyPointGeometry(){return this._reader.readLegacyPointGeometry()}readLegacyGeometry(){return this._reader.readLegacyGeometry()}readLegacyCentroid(){return this._reader.readLegacyCentroid()}readGeometryArea(){return this._reader.readGeometryArea()}readUnquantizedGeometry(){return this._reader.readUnquantizedGeometry()}readHydratedGeometry(){return this._reader.readHydratedGeometry()}readGeometry(){return this._reader.readGeometry()}readCentroid(){return this._reader.readCentroid()}_readAttribute(e,t){throw new Error("Error: Should not be called. Underlying _reader should be used instead")}_readAttributes(){throw new Error("Error: Should not be called. Underlying _reader should be used instead")}}},19207:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(8651),i=r(1518),s=r(46942),o=(r(12131),r(47648),r(18419),r(8680));let a=class extends i.r{constructor(e){super(e),this.tiles=new Map}destroy(){this.tiles.clear(),this.layer=this.layerView=this.tileInfoView=this.tiles=null}get updating(){return this.isUpdating()}acquireTile(e){const t=this.createTile(e);return t.once("isReady",()=>this.notifyChange("updating")),this.tiles.set(e.id,t),t}forceAttributeTextureUpload(){}forEachTile(e){this.tiles.forEach(e)}releaseTile(e){this.tiles.delete(e.key.id),this.disposeTile(e)}isUpdating(){let e=!0;return this.tiles.forEach(t=>{e=e&&t.isReady}),!e}setHighlight(){}invalidateLabels(){}requestUpdate(){this.layerView.requestUpdate()}};(0,n._)([(0,s.Cb)()],a.prototype,"layer",void 0),(0,n._)([(0,s.Cb)()],a.prototype,"layerView",void 0),(0,n._)([(0,s.Cb)()],a.prototype,"tileInfoView",void 0),(0,n._)([(0,s.Cb)()],a.prototype,"updating",null),a=(0,n._)([(0,o.j)("esri.views.2d.layers.features.tileRenderers.BaseTileRenderer")],a);var l=a},64713:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(63054),i=r(29104);class s extends i.Z{renderChildren(e){this.attributeView.bindTextures(e.context,!1),this.children.some(e=>e.hasData)&&(super.renderChildren(e),e.drawPhase===n.jx.MAP&&this._renderChildren(e),this.hasHighlight()&&e.drawPhase===n.jx.HIGHLIGHT&&this._renderHighlight(e))}_renderHighlight(e){const{painter:t}=e,r=t.effects.highlight;r.bind(e),this._renderChildren(e,r.defines),r.draw(e),r.unbind()}}},13161:(e,t,r)=>{"use strict";r.d(t,{Z:()=>w});var n=r(16304),i=r(8651),s=r(55328),o=r(98154),a=r(46942),l=(r(12131),r(47648),r(18419),r(8680)),u=r(95046),c=r(35718),p=r(73507),d=r(5052);const h=Math.PI/180;function f(e){return e*h}var m=r(32264),y=r(60573),g=r(55757);const b=(0,c.Ue)(),v=[0,0],x=new g.Z(0,0,0,0);let _=class extends s.Z{constructor(e){var t;super(e),t=this,this._imagePromise=null,this.bitmaps=[],this.hidpi=!1,this.imageMaxWidth=2048,this.imageMaxHeight=2048,this.imageRotationSupported=!1,this.imageNormalizationSupported=!1,this.update=(0,o.Ds)(function(){var e=(0,n.Z)(function*(e,r){if(!e.stationary||t.destroyed)return null;const i=e.state,s=(0,p.C5)(i.spatialReference),o=t.hidpi?e.pixelRatio:1,a=t.imageNormalizationSupported&&i.worldScreenWidth&&i.worldScreenWidth<i.size[0];a?(v[0]=i.worldScreenWidth,v[1]=i.size[1]):t.imageRotationSupported?(v[0]=i.size[0],v[1]=i.size[1]):function(e,t){const r=f(t.rotation),n=Math.abs(Math.cos(r)),i=Math.abs(Math.sin(r)),[s,o]=t.size;e[0]=Math.round(o*i+s*n),e[1]=Math.round(o*n+s*i)}(v,i);const l=Math.floor(v[0]*o)>t.imageMaxWidth||Math.floor(v[1]*o)>t.imageMaxHeight,u=!t.imageNormalizationSupported&&s&&(i.extent.xmin<s.valid[0]||i.extent.xmax>s.valid[1]),c=t.imageRotationSupported?i.rotation:0;if(l||u){let e=Math.min(t.imageMaxWidth,t.imageMaxHeight);u&&(e=Math.min(i.worldScreenWidth,e)),t._imagePromise=t._tiledExport(i,e,c,o,r)}else t._imagePromise=t._singleExport(i,v,a?i.paddedViewState.center:i.center,i.resolution,c,o,r);return t._imagePromise.then(function(){var e=(0,n.Z)(function*(e){if(t._imagePromise=null,!t.destroyed){t.bitmaps=null!=e?e:[];for(const r of t.container.children)e.includes(r)||r.fadeOut().then(()=>{r.remove()});for(const r of e)t.container.addChild(r),r.fadeIn()}});return function(t){return e.apply(this,arguments)}}()).catch(e=>{throw t._imagePromise=null,e})});return function(t,r){return e.apply(this,arguments)}}(),5e3)}destroy(){this.bitmaps=[]}get updating(){return!this.destroyed&&null!==this._imagePromise}updateExports(e){for(const t of this.container.children){if(!t.visible||!t.stage)return;e(t),t.invalidateTexture(),t.requestRender()}}_export(e,t,r,i,s,o){var a=this;return(0,n.Z)(function*(){const n=yield a.fetchSource(e,Math.floor(t*s),Math.floor(r*s),{rotation:i,pixelRatio:s,signal:o}),l=new m.eY(n,"additive");return l.x=e.xmin,l.y=e.ymax,l.resolution=e.width/t,l.rotation=i,l.pixelRatio=s,l})()}_singleExport(e,t,r,i,s,o,a){var l=this;return(0,n.Z)(function*(){!function(e,t,r,n){const[i,s]=t,[o,a]=n,l=.5*r;e[0]=i-l*o,e[1]=s-l*a,e[2]=i+l*o,e[3]=s+l*a}(b,r,i,t);const n=new u.Z(b[0],b[1],b[2],b[3],e.spatialReference);return[yield l._export(n,t[0],t[1],s,o,a)]})()}_tiledExport(e,t,r,n,i){const s=d.Z.create({size:t,spatialReference:e.spatialReference,scales:[e.scale]}),o=new y.Z(s),a=o.getTileCoverage(e);if(!a)return null;const l=[];return a.forEach((s,a,c,p)=>{x.set(s,a,c,p),o.getTileBounds(b,x);const d=new u.Z(b[0],b[1],b[2],b[3],e.spatialReference);l.push(this._export(d,t,t,r,n,i))}),Promise.all(l)}};(0,i._)([(0,a.Cb)()],_.prototype,"_imagePromise",void 0),(0,i._)([(0,a.Cb)()],_.prototype,"bitmaps",void 0),(0,i._)([(0,a.Cb)()],_.prototype,"container",void 0),(0,i._)([(0,a.Cb)()],_.prototype,"fetchSource",void 0),(0,i._)([(0,a.Cb)()],_.prototype,"hidpi",void 0),(0,i._)([(0,a.Cb)()],_.prototype,"imageMaxWidth",void 0),(0,i._)([(0,a.Cb)()],_.prototype,"imageMaxHeight",void 0),(0,i._)([(0,a.Cb)()],_.prototype,"imageRotationSupported",void 0),(0,i._)([(0,a.Cb)()],_.prototype,"imageNormalizationSupported",void 0),(0,i._)([(0,a.Cb)()],_.prototype,"requestUpdate",void 0),(0,i._)([(0,a.Cb)()],_.prototype,"updating",null),_=(0,i._)([(0,l.j)("esri.views.2d.layers.support.ExportStrategy")],_);var w=_},75735:(e,t,r)=>{"use strict";r.d(t,{U$:()=>a});var n=r(48626),i=r(61863);class s{constructor(e,t){this.layout=e,this.buffer="number"==typeof t?new ArrayBuffer(t*e.stride):t;for(const r of e.fieldNames){const t=e.fields.get(r);this[r]=new t.constructor(this.buffer,t.offset,this.stride)}}get stride(){return this.layout.stride}get count(){return this.buffer.byteLength/this.stride}get byteLength(){return this.buffer.byteLength}getField(e,t){const r=this[e];return r&&r.elementCount===t.ElementCount&&r.elementType===t.ElementType?r:null}slice(e,t){return new s(this.layout,this.buffer.slice(e*this.stride,t*this.stride))}copyFrom(e,t,r,n){const i=this.stride;if(i%4==0){const s=new Uint32Array(e.buffer,t*i,n*i/4);new Uint32Array(this.buffer,r*i,n*i/4).set(s)}else{const s=new Uint8Array(e.buffer,t*i,n*i);new Uint8Array(this.buffer,r*i,n*i).set(s)}}}class o{constructor(){this.stride=0,this.fields=new Map,this.fieldNames=[]}vec2f(e,t){return this.appendField(e,n.Eu,t),this}vec2f64(e,t){return this.appendField(e,n.q6,t),this}vec3f(e,t){return this.appendField(e,n.ct,t),this}vec3f64(e,t){return this.appendField(e,n.fP,t),this}vec4f(e,t){return this.appendField(e,n.ek,t),this}vec4f64(e,t){return this.appendField(e,n.Cd,t),this}mat3f(e,t){return this.appendField(e,n.gK,t),this}mat3f64(e,t){return this.appendField(e,n.ey,t),this}mat4f(e,t){return this.appendField(e,n.bj,t),this}mat4f64(e,t){return this.appendField(e,n.O1,t),this}vec4u8(e,t){return this.appendField(e,n.mc,t),this}f32(e,t){return this.appendField(e,n.ly,t),this}f64(e,t){return this.appendField(e,n.oS,t),this}u8(e,t){return this.appendField(e,n.D_,t),this}u16(e,t){return this.appendField(e,n.av,t),this}i8(e,t){return this.appendField(e,n.Hz,t),this}vec2i8(e,t){return this.appendField(e,n.Vs,t),this}vec2i16(e,t){return this.appendField(e,n.or,t),this}vec2u8(e,t){return this.appendField(e,n.xA,t),this}vec4u16(e,t){return this.appendField(e,n.v6,t),this}u32(e,t){return this.appendField(e,n.Nu,t),this}appendField(e,t,r){const n=t.ElementCount*(0,i.n1)(t.ElementType);this.fields.set(e,{size:n,constructor:t,offset:this.stride,optional:r}),this.stride+=n,this.fieldNames.push(e)}alignTo(e){return this.stride=Math.floor((this.stride+e-1)/e)*e,this}hasField(e){return this.fieldNames.indexOf(e)>=0}createBuffer(e){return new s(this,e)}createView(e){return new s(this,e)}clone(){const e=new o;return e.stride=this.stride,e.fields=new Map,this.fields.forEach((t,r)=>e.fields.set(r,t)),e.fieldNames=this.fieldNames.slice(),e.BufferType=this.BufferType,e}}function a(){return new o}},56372:(e,t,r)=>{"use strict";r.d(t,{M:()=>u});var n=r(16304),i=r(98248),s=r(8485),o=r(65175),a=r(28989),l=r(13811);function u(e){return c.apply(this,arguments)}function c(){return(c=(0,n.Z)(function*(e){const t=new Image;if(t.src="data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='5' height='5' version='1.1' viewBox='0 0 5 5' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='5' height='5' fill='%23f00' fill-opacity='.5'/%3E%3C/svg%3E%0A",t.width=5,t.height=5,yield t.decode(),!e.gl)return!0;const r=new s.Z(e,{colorTarget:0,depthStencilTarget:0},{target:3553,wrapMode:33071,pixelFormat:6408,dataType:5121,samplingMode:9728,width:1,height:1}),n=i.Z.createVertex(e,35044,new Uint16Array([0,0,1,0,0,1,1,1])),u=new l.Z(e,new Map([["a_pos",0]]),{geometry:[{name:"a_pos",count:2,type:5123,offset:0,stride:4,normalized:!1}]},{geometry:n}),c=new o.$(e,"\n  precision highp float;\n\n  attribute vec2 a_pos;\n  varying vec2 v_uv;\n\n  void main() {\n    v_uv = a_pos;\n    gl_Position = vec4(a_pos * 2.0 - 1.0, 0.0, 1.0);\n  }\n  ","\n  precision highp float;\n\n  varying vec2 v_uv;\n  uniform sampler2D u_texture;\n\n  void main() {\n    gl_FragColor = texture2D(u_texture, v_uv);\n  }\n  ",new Map([["a_pos",0]]));e.useProgram(c);const p=new a.Z(e,{dataType:5121,pixelFormat:6408,preMultiplyAlpha:!1,wrapMode:33071,samplingMode:9729},t);e.bindTexture(p,0),c.setUniform1i("u_texture",0);const d=e.getBoundFramebufferObject(),{x:h,y:f,width:m,height:y}=e.getViewport();e.bindFramebuffer(r),e.setViewport(0,0,1,1),e.bindVAO(u),e.drawArrays(5,0,4);const g=new Uint8Array(4);return r.readPixels(0,0,1,1,6408,5121,g),c.dispose(),u.dispose(!1),n.dispose(),r.dispose(),p.dispose(),e.setViewport(h,f,m,y),e.bindFramebuffer(d),t.src="",255===g[0]})).apply(this,arguments)}},97364:(e,t,r)=>{"use strict";r.d(t,{C:()=>d,a:()=>c,g:()=>l,o:()=>a,q:()=>u,t:()=>p});var n=r(23131),i=r(87538),s=r(11142),o=r(72364);const a=150,l=({actionCount:e,actionHeight:t,height:r,groupCount:n})=>Math.max(e-(({height:e,actionHeight:t,groupCount:r})=>Math.floor((e-2*r)/t))({height:r,actionHeight:t,groupCount:n}),0),u=e=>Array.from(e.querySelectorAll("calcite-action")).filter(e=>!e.closest("calcite-action-menu")||e.slot===s.S.trigger),c=({actionGroups:e,expanded:t,overflowCount:r})=>{let i=r;e.reverse().forEach(e=>{let r=0;const s=u(e).reverse();s.forEach(e=>{e.slot===o.S.menuActions&&(e.removeAttribute("slot"),e.textEnabled=t)}),i>0&&s.some(e=>(s.filter(e=>!e.slot).length>1&&s.length>2&&!e.closest("calcite-action-menu")&&(e.textEnabled=!0,e.setAttribute("slot",o.S.menuActions),r++,r>1&&i--),i<1)),(0,n.f)(e)})};function p({parent:e,expanded:t}){u(e).filter(e=>e.slot!==o.S.menuActions).forEach(e=>e.textEnabled=t),e.querySelectorAll("calcite-action-group").forEach(e=>e.expanded=t)}const d=({expanded:e,intlExpand:t,intlCollapse:r,toggle:s,el:o,position:a,tooltip:l,ref:u,scale:c})=>{const p="rtl"===(0,i.a)(o),d=e?r:t,h=["chevrons-left","chevrons-right"];p&&h.reverse();const f="end"===function(e,t){var r;return e||(null===(r=t.closest("calcite-shell-panel"))||void 0===r?void 0:r.position)||"start"}(a,o),m=(0,n.h)("calcite-action",{dir:p?"rtl":"ltr",icon:e?f?h[1]:h[0]:f?h[0]:h[1],onClick:s,ref:t=>(({tooltip:e,referenceElement:t,expanded:r,ref:n})=>(e&&(e.referenceElement=!r&&t),n&&n(t),t))({tooltip:l,referenceElement:t,expanded:e,ref:u}),scale:c,text:d,textEnabled:e});return l?(0,n.h)("calcite-tooltip-manager",null,m):m}},88933:(e,t,r)=>{"use strict";r.d(t,{C:()=>s,c:()=>i});var n=r(23131);function i(e){return Math.min(Math.max(Math.ceil(e),1),6)}const s=(e,t)=>{const r=`h${e.level}`;return delete e.level,(0,n.h)(r,Object.assign({},e),t)}},35490:(e,t,r)=>{"use strict";function n(e,t){return(e+t)%t}r.d(t,{g:()=>n})},13892:(e,t,r)=>{"use strict";r.d(t,{f:()=>F,i:()=>i});var n=r(72475);e=r.hmd(e);var i=Array.isArray;function s(e){return e}var o=/^(?:0|[1-9]\d*)$/;function a(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&o.test(e))&&e>-1&&e%1==0&&e<t}function l(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}var u=Object.prototype;function c(e){return(0,n.c)(e)&&"[object Arguments]"==(0,n.b)(e)}var p=Object.prototype,d=p.hasOwnProperty,h=p.propertyIsEnumerable,f=c(function(){return arguments}())?c:function(e){return(0,n.c)(e)&&d.call(e,"callee")&&!h.call(e,"callee")},m="object"==typeof exports&&exports&&!exports.nodeType&&exports,y=m&&e&&!e.nodeType&&e,g=y&&y.exports===m?n.r.Buffer:void 0,b=(g?g.isBuffer:void 0)||function(){return!1},v={};v["[object Float32Array]"]=v["[object Float64Array]"]=v["[object Int8Array]"]=v["[object Int16Array]"]=v["[object Int32Array]"]=v["[object Uint8Array]"]=v["[object Uint8ClampedArray]"]=v["[object Uint16Array]"]=v["[object Uint32Array]"]=!0,v["[object Arguments]"]=v["[object Array]"]=v["[object ArrayBuffer]"]=v["[object Boolean]"]=v["[object DataView]"]=v["[object Date]"]=v["[object Error]"]=v["[object Function]"]=v["[object Map]"]=v["[object Number]"]=v["[object Object]"]=v["[object RegExp]"]=v["[object Set]"]=v["[object String]"]=v["[object WeakMap]"]=!1;var x,_="object"==typeof exports&&exports&&!exports.nodeType&&exports,w=_&&e&&!e.nodeType&&e,C=w&&w.exports===_&&n.f.process,I=function(){try{return w&&w.require&&w.require("util").types||C&&C.binding&&C.binding("util")}catch(e){}}(),S=I&&I.isTypedArray,T=S?(x=S,function(e){return x(e)}):function(e){return(0,n.c)(e)&&l(e.length)&&!!v[(0,n.b)(e)]},A=Object.prototype.hasOwnProperty;function M(e){return null!=(t=e)&&l(t.length)&&!function(e){if(!(0,n.i)(e))return!1;var t=(0,n.b)(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}(t)?function(e,t){var r=i(e),n=!r&&f(e),s=!r&&!n&&b(e),o=!r&&!n&&!s&&T(e),l=r||n||s||o,u=l?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],c=u.length;for(var p in e)l&&("length"==p||s&&("offset"==p||"parent"==p)||o&&("buffer"==p||"byteLength"==p||"byteOffset"==p)||a(p,c))||u.push(p);return u}(e):function(e){if(!(0,n.i)(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t,r,i=(t=e)===("function"==typeof(r=t&&t.constructor)&&r.prototype||u),s=[];for(var o in e)("constructor"!=o||!i&&A.call(e,o))&&s.push(o);return s}(e);var t}function F(e,t){return null==e?e:function(e,t,r){for(var n=-1,i=Object(e),s=r(e),o=s.length;o--;){var a=s[++n];if(!1===t(i[a],a,i))break}return e}(e,"function"==typeof(r=t)?r:s,M);var r}},97738:(e,t,r)=>{"use strict";r.d(t,{H:()=>f,a:()=>d,c:()=>u,d:()=>p});var n=r(87538),i=r(23131);const s="hidden-form-input";function o(e){return"checked"in e}const a=new WeakMap,l=new WeakSet;function u(e){const{el:t,value:r}=e,i=(0,n.c)(t,"form");if(!i||function(e,t){const r="calciteInternalFormComponentRegister";let n=!1;return e.addEventListener(r,e=>{n=e.composedPath().some(e=>l.has(e)),e.stopPropagation()},{once:!0}),t.dispatchEvent(new CustomEvent(r,{bubbles:!0,composed:!0})),n}(i,t))return;e.formEl=i,e.defaultValue=r,o(e)&&(e.defaultChecked=e.checked);const s=(e.onFormReset||c).bind(e);i.addEventListener("reset",s),l.add(t)}function c(){o(this)?this.checked=this.defaultChecked:this.value=this.defaultValue}function p(e){const{el:t,formEl:r}=e;if(!r)return;const n=a.get(t);r.removeEventListener("reset",n),a.delete(t),e.formEl=null,l.delete(t)}function d(e,t){e.defaultValue=t}function h(e,t,r){var n;const{defaultValue:i,disabled:s,name:a,required:l}=e;t.defaultValue=i,t.disabled=s,t.name=a,t.required=l,t.tabIndex=-1,o(e)?(t.defaultChecked=e.defaultChecked,t.value=e.checked?r||"on":"",s||e.checked||(t.disabled=!0)):t.value=r||"",null===(n=e.syncHiddenFormInput)||void 0===n||n.call(e,t)}const f=({component:e})=>(function(e){const{el:t,formEl:r,name:n,value:i}=e,{ownerDocument:o}=t,a=t.querySelectorAll('input[slot="hidden-form-input"]');if(!r||!n)return void a.forEach(e=>e.remove());const l=Array.isArray(i)?i:[i],u=[],c=new Set;let p;a.forEach(t=>{const r=l.find(e=>e==t.value);null!=r?(c.add(r),h(e,t,r)):u.push(t)}),l.forEach(t=>{if(c.has(t))return;let r=u.pop();r||(r=o.createElement("input"),r.slot=s),p||(p=o.createDocumentFragment()),p.append(r),h(e,r,t)}),p&&t.append(p),u.forEach(e=>e.remove())}(e),(0,i.h)("slot",{name:s}))},8398:(e,t,r)=>{"use strict";var n;r.d(t,{S:()=>n}),function(e){e.green="checkCircle",e.yellow="exclamationMarkTriangle",e.red="exclamationMarkTriangle",e.blue="lightbulb"}(n||(n={}))},35533:(e,t,r)=>{"use strict";function n(e,t){const r={Up:"ArrowUp",Down:"ArrowDown",Left:"ArrowLeft",Right:"ArrowRight",Spacebar:" ",Esc:"Escape"}[e]||e,n="rtl"===t;return n&&"ArrowLeft"===r?"ArrowRight":n&&"ArrowRight"===r?"ArrowLeft":r}function i(e){return"Enter"===(e=n(e))||" "===e}r.d(t,{g:()=>n,i:()=>i,n:()=>s});const s=["0","1","2","3","4","5","6","7","8","9"]},86478:(e,t,r)=>{"use strict";r.d(t,{c:()=>o,d:()=>a,g:()=>l});var n=r(87538);const i="calciteInternalLabelClick",s=new WeakMap;function o(e){const t=(e=>{const{id:t}=e,r=t&&(0,n.q)(e,`calcite-label[for="${t}"]`);if(r)return r;const i=(0,n.c)(e,"calcite-label");return!i||function(e,t){let r;const n="custom-element-ancestor-check",i=n=>{n.stopImmediatePropagation();const i=n.composedPath();r=i.slice(i.indexOf(t),i.indexOf(e))};return e.addEventListener(n,i,{once:!0}),t.dispatchEvent(new CustomEvent(n,{composed:!0,bubbles:!0})),e.removeEventListener(n,i),r.filter(r=>r!==t&&r!==e).filter(e=>{var t;return null===(t=e.tagName)||void 0===t?void 0:t.includes("-")}).length>0}(i,e)?null:i})(e.el);if(!t||s.has(t))return;e.labelEl=t;const r=u.bind(e);s.set(e.labelEl,r),e.labelEl.addEventListener(i,r)}function a(e){if(!e.labelEl)return;const t=s.get(e.labelEl);e.labelEl.removeEventListener(i,t),s.delete(e.labelEl)}function l(e){var t,r;return e.label||(null===(r=null===(t=e.labelEl)||void 0===t?void 0:t.textContent)||void 0===r?void 0:r.trim())||""}function u(e){this.el.contains(e.detail.sourceEvent.target)||this.onLabelClick(e)}},79773:(e,t,r)=>{"use strict";r.d(t,{a:()=>i,d:()=>o,g:()=>l,l:()=>u});var n=r(47520);const i=["ar","bs","ca","cs","da","de","de-CH","el","en","en-AU","en-CA","en-GB","es","es-MX","et","fi","fr","fr-CH","he","hi","hr","hu","id","it","it-CH","ja","ko","lt","lv","mk","nb","nl","pl","pt","pt-PT","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-CN","zh-HK","zh-TW"];function s(e){return new Intl.NumberFormat(e,{minimumFractionDigits:0,maximumFractionDigits:20})}function o(e,t){if(e){const r=a(t),n=l(t),i=e.split(""),s=i.lastIndexOf(n),o=i.map((e,t)=>e===r||e===n&&t!==s?"":e).reduce((e,t)=>e+t).replace(n,".");return isNaN(Number(o))?e:o}return e}function a(e){const t=s(e).formatToParts(1234567.8).find(e=>"group"===e.type).value;return 0===t.trim().length?" ":t}function l(e){const t=s(e).formatToParts(1234567.8).find(e=>"decimal"===e.type).value;return 0===t.trim().length?" ":t}function u(e,t,r=!1){if(e){const i=Number((0,n.a)(e));if(!isNaN(i))return s(t).formatToParts(i).map(({type:e,value:n})=>{switch(e){case"group":return r?a(t):"";case"decimal":return l(t);default:return n}}).reduce((e,t)=>e+t)}return e}},49561:(e,t,r)=>{"use strict";r.d(t,{c:()=>n,d:()=>i});const n=(e,t,r)=>Math.max(t,Math.min(e,r)),i=e=>{const t=(""+e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0}},47520:(e,t,r)=>{"use strict";r.d(t,{a:()=>o,i:()=>i,p:()=>s,s:()=>a});var n=r(35533);function i(e){return!(!e||isNaN(Number(e)))}function s(e){if(!e||(t=e,!n.n.some(e=>t.includes(e))))return null;var t;let r=!1;const s=e.split("").filter((e,t)=>e.match(/\./g)&&!r?(r=!0,!0):!(!e.match(/\-/g)||0!==t)||n.n.includes(e)).reduce((e,t)=>e+t);return i(s)?Number(s).toString():null}function o(e){return(null==e?void 0:e.endsWith("."))?e.replace(".",""):e}function a(e){return e?Number(o(e)).toString():e}},51026:(e,t,r)=>{"use strict";r.d(t,{C:()=>R,I:()=>M,L:()=>F,S:()=>E,T:()=>P,a:()=>p,b:()=>h,c:()=>d,d:()=>C,e:()=>f,f:()=>w,g:()=>A,h:()=>T,i:()=>c,j:()=>x,k:()=>y,l:()=>m,m:()=>l,n:()=>j,r:()=>b,s:()=>I});var n=r(16304),i=r(87538),s=r(35490),o=r(72475),a=r(23131);function l(){this.setUpItems(),this.setUpFilter()}const u=["ArrowUp","ArrowDown"];function c(){this.setUpItems(),this.setUpFilter(),this.emitCalciteListChange=(0,o.d)(g.bind(this),0)}function p(){var e;null===(e=this.mutationObserver)||void 0===e||e.observe(this.el,{childList:!0,subtree:!0})}function d(){var e;null===(e=this.mutationObserver)||void 0===e||e.disconnect()}function h(e){const{selectedValues:t}=this,{item:r,value:n,selected:s,shiftPressed:o}=e.detail;s?(this.multiple&&o&&this.selectSiblings(r),this.multiple||this.deselectSiblingItems(r),t.set(n,r)):(t.delete(n),this.multiple&&o&&this.selectSiblings(r,!0)),this.multiple||(v(r,s),s&&(0,i.f)(r)),this.lastSelectedItem=r,this.emitCalciteListChange()}function f(e){e.stopPropagation();const t=e.detail.oldValue,r=this.selectedValues;if(r.has(t)){const n=r.get(t);r.delete(t),r.set(e.detail.newValue,n)}}function m(e){const{el:t,items:r,multiple:n,selectedValues:i}=this;n||(t.contains(e.relatedTarget)?v(e.target,!1):r.forEach(t=>v(t,0===i.size?e.target===t:t.selected)))}function y(e){const{key:t,target:r}=e;if(!function(e){return!!u.find(t=>t===e)}(t))return;const{items:n,multiple:o,selectionFollowsFocus:a}=this,{length:l}=n,c=n.indexOf(r);if(!l||-1===c)return;e.preventDefault();const p=n[(0,s.g)(c+("ArrowUp"===t?-1:1),l)];n.forEach(e=>v(e,e===p)),!o&&a&&(p.selected=!0),(0,i.f)(p)}function g(){this.calciteListChange.emit(this.selectedValues)}function b(e){if(e.defaultPrevented)return;const t=e.target,r=this.selectedValues;"CALCITE-PICK-LIST-GROUP"===t.parentElement.tagName?(t.parentElement.remove(),Array.from(t.parentElement.children).forEach(e=>r.delete(e.value))):(t.remove(),r.delete(t.value)),this.emitCalciteListChange()}function v(e,t){t?e.removeAttribute("tabindex"):e.setAttribute("tabindex","-1")}function x(e){return _.apply(this,arguments)}function _(){return(_=(0,n.Z)(function*(e){if(this.filterEnabled&&"filter"===e)return void(yield(0,i.f)(this.filterEl));const{items:t,multiple:r,selectionFollowsFocus:n}=this;if(0===t.length)return;if(r)return t[0].setFocus();const s=t.find(e=>e.selected)||t[0];return n&&(s.selected=!0),s.setFocus()})).apply(this,arguments)}function w(e){this.items=Array.from(this.el.querySelectorAll(e));let t=!1;const{items:r}=this;r.forEach(e=>{e.icon=this.getIconType(),this.multiple||(e.disableDeselect=!0,v(e,!1)),e.selected&&(t=!0,v(e,!0),this.selectedValues.set(e.value,e))});const[n]=r;!t&&n&&v(n,!0)}function C(e){this.items.forEach(t=>{t.value!==e.value&&(t.toggleSelected(!1),this.selectedValues.has(t.value)&&this.selectedValues.delete(t.value))})}function I(e,t=!1){if(!this.lastSelectedItem)return;const{items:r}=this,n=r.findIndex(e=>e.value===this.lastSelectedItem.value),i=r.findIndex(t=>t.value===e.value);r.slice(Math.min(n,i),Math.max(n,i)).forEach(e=>{e.toggleSelected(!t),t?this.selectedValues.delete(e.value):this.selectedValues.set(e.value,e)})}let S;function T(e){const t=e.detail.map(e=>e.value);let r=!1;S||(S=new Set);const n=this.items.filter(e=>{const n=e.parentElement;n.matches("calcite-pick-list-group")&&S.add(n);const i=t.includes(e.value);return e.hidden=!i,r||(r=i&&e.selected),i});S.forEach(e=>{const t=n.some(t=>e.contains(t));if(e.hidden=!t,!t)return;const r=(0,i.g)(e,"parent-item");r&&(r.hidden=!1,n.includes(r)&&Array.from(e.children).forEach(e=>e.hidden=!1))}),S.clear(),n.length>0&&!r&&!this.multiple&&v(n[0],!0)}function A(){return this.items.map(e=>({label:e.label,description:e.description,metadata:e.metadata,value:e.value}))}var M;!function(e){e.circle="circle",e.square="square",e.grip="grip"}(M||(M={}));const F=e=>{var{props:{disabled:t,loading:r,filterEnabled:n,dataForFilter:s,handleFilter:o,filterPlaceholder:l,el:u,setFilterEl:c}}=e,p=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}(e,["props"]);const d=(0,a.h)("slot",null);return(0,a.h)(a.H,Object.assign({"aria-busy":r.toString(),"aria-disabled":t.toString(),role:"menu"},p),(0,a.h)("section",null,(0,a.h)("header",{class:{sticky:!0}},n?(0,a.h)("calcite-filter",{"aria-label":l,data:s,dir:(0,i.a)(u),disabled:r||t,onCalciteFilterChange:o,placeholder:l,ref:c}):null,(0,a.h)("slot",{name:"menu-actions"})),r||t?(0,a.h)("calcite-scrim",{loading:r}):null,d))},R={actions:"actions",actionsEnd:"actions--end",actionsStart:"actions--start",description:"description",handle:"handle",handleActivated:"handle--activated",highlight:"highlight",icon:"icon",iconDot:"icon-dot",label:"label",remove:"remove",title:"title",textContainer:"text-container"},j={checked:"check",remove:"x"},E={actionsEnd:"actions-end",actionsStart:"actions-start"},P={remove:"Remove"}},11142:(e,t,r)=>{"use strict";r.d(t,{C:()=>n,I:()=>s,S:()=>i});const n={menu:"menu",defaultTrigger:"default-trigger"},i={tooltip:"tooltip",trigger:"trigger"},s={menu:"ellipsis"}},72364:(e,t,r)=>{"use strict";r.d(t,{I:()=>s,S:()=>n,T:()=>i});const n={menuActions:"menu-actions",menuTooltip:"menu-tooltip"},i={more:"More"},s={menu:"ellipsis"}},87925:(e,t,r)=>{"use strict";r.d(t,{H:()=>C,T:()=>I,a:()=>h,b:()=>d,c:()=>w,d:()=>f,e:()=>_,f:()=>y,g:()=>u,h:()=>v,i:()=>p,l:()=>b,n:()=>g,p:()=>x,s:()=>m});var n=r(16304),i=r(23131),s=r(79773);function o(e=""){if(s.a.indexOf(e)>-1)return e;{const t=e.split("-")[0];return s.a.indexOf(t)>-1?t:"en"}}const a={},l={};function u(e){return c.apply(this,arguments)}function c(){return(c=(0,n.Z)(function*(e){const t=o(e);if(a[t])return a[t];l[t]||(l[t]=fetch((0,i.a)(`./assets/calcite-date-picker/nls/${t}.json`)).then(e=>e.json()).catch(()=>(console.error(`Translations for "${t}" not found or invalid, falling back to english`),u("en"))));const r=yield l[t];return a[t]=r,r})).apply(this,arguments)}function p(e,t,r){const n=e.getTime(),i=!(t instanceof Date)||n>=t.getTime(),s=!(r instanceof Date)||n<=r.getTime();return i&&s}function d(e,t,r){if(!(e instanceof Date))return null;const n=e.getTime(),i=t instanceof Date&&n<t.getTime(),s=r instanceof Date&&n>r.getTime();return i?t:s?r:e}function h(e){if(e instanceof Date)return e;if(!e||"string"!=typeof e)return null;const t=e.split(/[: T-]/).map(parseFloat),r=new Date(t[0],(t[1]||1)-1,t[2]||1);if(r.setFullYear(t[0]),isNaN(r.getTime()))throw new Error(`Invalid ISO 8601 date: "${e}"`);return r}function f(e){return"string"==typeof e?e:e instanceof Date?new Date(e.getTime()-6e4*e.getTimezoneOffset()).toISOString().split("T")[0]:""}function m(e,t){return e instanceof Date&&t instanceof Date&&e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}function y(e){const t=e.getMonth(),r=new Date(e);return r.setMonth(t-1),t===r.getMonth()?new Date(e.getFullYear(),t,0):r}function g(e){const t=e.getMonth(),r=new Date(e);return r.setMonth(t+1),(t+2)%7==r.getMonth()%7?new Date(e.getFullYear(),t+2,0):r}function b(e,t){return String(e).split("").map(e=>t.numerals[e]).join("")}function v(e,t){return parseInt(e.split("").map(e=>"0123456789"[t.numerals.indexOf(e)]).filter(e=>e).join(""))}function x(e,t){const{separator:r,unitOrder:n}=t,i=_(n),s=function(e=""){return e.replace(/[\u0660-\u0669]/g,e=>e.charCodeAt(0)-1632).replace(/[\u06f0-\u06f9]/g,e=>e.charCodeAt(0)-1776)}(e).split(r);return{day:parseInt(s[i.indexOf("d")]),month:parseInt(s[i.indexOf("m")])-1,year:parseInt(s[i.indexOf("y")])}}function _(e){const t=e.toLowerCase();return["d","m","y"].sort((e,r)=>t.indexOf(e)-t.indexOf(r))}function w(e,t){return(e.getTime()-t.getTime())/864e5}const C=2,I={nextMonth:"Next month",prevMonth:"Previous month"}},38405:(e,t,r)=>{"use strict";function n(e){const{r:t,g:r,b:n}=e;return`#${t.toString(16).padStart(2,"0")}${r.toString(16).padStart(2,"0")}${n.toString(16).padStart(2,"0")}`.toLowerCase()}r.d(t,{C:()=>d,a:()=>u,b:()=>i,c:()=>m,h:()=>p,i:()=>a,n:()=>c,p:()=>h,r:()=>n});const i=/^[0-9A-F]$/i,s=/^#[0-9A-F]{3}$/i,o=/^#[0-9A-F]{6}$/i;function a(e){return l(e)||u(e)}function l(e){return e&&4===e.length&&s.test(e)}function u(e){return e&&7===e.length&&o.test(e)}function c(e){return(e=e.toLowerCase()).startsWith("#")||(e=`#${e}`),l(e)?n(p(e)):e}function p(e){if(!a(e))return null;if(3===(e=e.replace("#","")).length){const[t,r,n]=e.split("");return{r:parseInt(`${t}${t}`,16),g:parseInt(`${r}${r}`,16),b:parseInt(`${n}${n}`,16)}}return{r:parseInt(e.slice(0,2),16),g:parseInt(e.slice(2,4),16),b:parseInt(e.slice(4,6),16)}}const d={HEX:"hex",HEXA:"hexa",RGB_CSS:"rgb-css",RGBA_CSS:"rgba-css",HSL_CSS:"hsl-css",HSLA_CSS:"hsla-css"};function h(e){if("string"==typeof e){if(e.startsWith("#")){const{length:t}=e;if(4===t||7===t)return d.HEX;if(5===t||9===t)return d.HEXA}if(e.startsWith("rgba("))return d.RGBA_CSS;if(e.startsWith("rgb("))return d.RGB_CSS;if(e.startsWith("hsl("))return d.HSL_CSS;if(e.startsWith("hsla("))return d.HSLA_CSS}if("object"==typeof e){if(f(e,"r","g","b"))return f(e,"a")?"rgba":"rgb";if(f(e,"h","s","l"))return f(e,"a")?"hsla":"hsl";if(f(e,"h","s","v"))return f(e,"a")?"hsva":"hsv"}return null}function f(e,...t){return t.every(t=>t&&e&&`${t}`in e)}function m(e,t){return(null==e?void 0:e.rgbNumber())===(null==t?void 0:t.rgbNumber())}}}]);