(self.webpackChunkh4g_limo=self.webpackChunkh4g_limo||[]).push([[1937],{41186:(e,t,i)=>{"use strict";i.d(t,{KC:()=>m,QI:()=>y,wF:()=>I,K:()=>C,Yx:()=>p,nb:()=>R,BH:()=>g,NL:()=>h,Tg:()=>c});var r=i(5902),s=i(54704),a=i(22332),n=i(70713);const o=new Map;o.set("meter-per-second",1),o.set("kilometer-per-hour",.277778),o.set("knots",.514444),o.set("feet-per-second",.3048),o.set("mile-per-hour",.44704);const l=180/Math.PI,h=new r.Xn({esriMetersPerSecond:"meter-per-second",esriKilometersPerHour:"kilometer-per-hour",esriKnots:"knots",esriFeetPerSecond:"feet-per-second",esriMilesPerHour:"mile-per-hour"});function p(e,t){return o.get(e)/o.get(t)||1}function u(e){return(450-e)%360}function c(e,t="geographic"){const[i,r]=e,s=Math.sqrt(i*i+r*r);let a=Math.atan2(r,i)*l;return a=(360+a)%360,"geographic"===t&&(a=u(a)),[s,a]}function d(e,t="geographic"){let i=e[1];"geographic"===t&&(i=u(i)),i%=360;const r=e[0];return[r*Math.cos(i/l),r*Math.sin(i/l)]}function m(e,t,i="geographic",r=1){if(!(0,n.nk)(e))return e;const{pixels:s,width:o,height:l}=e,h=o*l,p=s[0],u=s[1],m=a.Z.createEmptyBand(e.pixelType,h),y=a.Z.createEmptyBand(e.pixelType,h);let g=0;for(let a=0;a<l;a++)for(let e=0;e<o;e++)"vector-uv"===t?([m[g],y[g]]=c([p[g],u[g]],i),m[g]*=r):([m[g],y[g]]=d([p[g],u[g]],i),m[g]*=r,y[g]*=r),g++;const f=new a.Z({pixelType:e.pixelType,width:e.width,height:e.height,mask:e.mask,validPixelCount:e.validPixelCount,maskIsAlpha:e.maskIsAlpha,pixels:[m,y]});return f.updateStatistics(),f}function y(e,t,i=1){if(1===i||!(0,n.nk)(e))return e;const r=e.clone(),{pixels:s,width:a,height:o}=r,l=s[0],h=s[1];let p=0;for(let n=0;n<o;n++)for(let e=0;e<a;e++)"vector-uv"===t?(l[p]*=i,h[p]*=i):l[p]*=i,p++;return r.updateStatistics(),r}function g(e,t,i,r,a){if(!(0,s.pC)(a)||!a.spatialReference.equals(e.spatialReference))return{extent:e,width:t,height:i,resolution:e.width/t};const n=a.xmin,o=a.ymax;r=Math.max(r||0,30);const l=Math.ceil(t*(1/r)),h=Math.ceil(i*(1/r)),p=((e.xmax-e.xmin)/l+(e.ymax-e.ymin)/h)/2;return e.xmin=n+Math.floor((e.xmin-n)/p)*p,e.xmax=n+Math.ceil((e.xmax-n)/p)*p,e.ymin=o+Math.floor((e.ymin-o)/p)*p,e.ymax=o+Math.ceil((e.ymax-o)/p)*p,{extent:e,width:Math.round(e.width/p),height:Math.round(e.height/p),resolution:p}}const f=function(e=0,t=0,i=Math.PI,r=!0){r&&(i=(2*Math.PI-i)%(2*Math.PI));const s=r?-1:1,a=13*s,n=-7*s,o=-2*s,l=-16*s,h=29,[p,u]=w(0,t+a,i,h),[c,d]=w(e-5.5,t+n,i,h),[m,y]=w(e+5.5,t+n,i,h),[g,f]=w(e-1.5,t+o,i,h),[x,v]=w(e+1.5,t+o,i,h),[b,_]=w(e-1.5,t+l,i,h),[M,P]=w(e+1.5,t+l,i,h);return[p,u,c,d,g,f,x,v,m,y,b,_,M,P]}(0,0,0);function x(e=0,t=Math.PI,i=!0){i&&(t=(2*Math.PI-t)%(2*Math.PI));const r=i?-1:1,s=5*r,a=20*r,n=25*r,o=45,l=2*r;let[h,p]=[5,0-a],[u,c]=[h+2,p],[d,m]=[u-0,c+l],[y,g]=[-5,0-n],[f,x]=[y+0,g-l],v=Math.ceil(e/5),b=Math.floor(v/10);v-=8*b;const _=[],M=[];for(let D=0;D<v/2;D++,b--){b<=0&&v%2==1&&D===(v-1)/2&&(y=0,f=y+0,g=(g+p)/2,x=g-l);const[e,i]=w(y,g,t,o);if(b>0){const[r,s]=w(u,g,t,o),[a,n]=w(h,p,t,o);_.push(r),_.push(s),_.push(e),_.push(i),_.push(a),_.push(n)}else{const[r,s]=w(u,c,t,o),[a,n]=w(d,m,t,o),[l,h]=w(f,x,t,o);M.push(e),M.push(i),M.push(l),M.push(h),M.push(a),M.push(n),M.push(r),M.push(s)}g+=s,p+=s,c+=s,m+=s,x+=s}const[P,k]=w(5,0+a,t,o),[C,I]=w(7,0+a,t,o),[R,V]=w(5,0-n,t,o),[E,q]=w(7,0-n,t,o);return{pennants:_,barbs:M,shaft:[P,k,C,I,R,V,E,q]}}function w(e,t,i,r=1){const s=Math.sqrt(e*e+t*t)/r,a=(2*Math.PI+Math.atan2(t,e))%(2*Math.PI);return[s,(2*Math.PI+a-i)%(2*Math.PI)]}const v=[0,1,3,6,10,16,21,27,33,40,47,55,63],b=[0,.5,1,1.5,2],_=[0,.25,.5,1,1.5,2,2.5,3,3.5,4];function M(e,t,i,r){const s=p(r||"knots",i);let a;for(a=1;a<t.length;a++)if(a===t.length-1){if(e<t[a]*s)break}else if(e<=t[a]*s)break;return Math.min(a-1,t.length-2)}function P(e,t,i,r,s){let a=0;switch(t){case"beaufort_kn":a=M(e,v,"knots",i);break;case"beaufort_km":a=M(e,v,"kilometer-per-hour",i);break;case"beaufort_ft":a=M(e,v,"feet-per-second",i);break;case"beaufort_m":a=M(e,v,"meter-per-second",i);break;case"classified_arrow":a=M(e,s,r,i);break;case"ocean_current_m":a=M(e,b,"meter-per-second",i);break;case"ocean_current_kn":a=M(e,_,"knots",i)}return a}const k=[];function C(e,t){let i=0,r=0;const{width:s,height:a,mask:n}=e,o=e.pixels[0],l=[],h=[],p="wind_speed"===t.style?5:Number.MAX_VALUE;for(let u=0;u<a;u++)for(let e=0;e<s;e++){const t=u*s+e;if((!n||n[u*s+e])&&o[t]<p){for(let r=0;r<4;r++)l[i++]=(e+.5)/s,l[i++]=(u+.5)/a,l[i++]=r<2?-.5:.5,l[i++]=r%2==0?-.5:.5,l[i++]=0,l[i++]=o[t];const n=4*(i/24-1);h[r++]=n,h[r++]=n+1,h[r++]=n+2,h[r++]=n+1,h[r++]=n+2,h[r++]=n+3}}return{vertexData:new Float32Array(l),indexData:new Uint32Array(h)}}function I(e,t){return"simple_scalar"===t.style?C(e,t):"wind_speed"===t.style?function(e,t){if(0===k.length)for(let h=0;h<30;h++)k.push(x(5*h,0));const i=p(h.fromJSON(t.inputUnit),"knots"),{width:r,height:s,mask:a}=e,n=e.pixels[0],o=e.pixels[1],l=[],u=[];let c=0,d=0;for(let h=0;h<s;h++)for(let e=0;e<r;e++){const t=h*r+e,p=n[t]*i;if((!a||a[h*r+e])&&p>=5){var m;const i=null!=(m=(o[t]+360)%360/180*Math.PI)?m:2*Math.PI*Math.random(),{pennants:a,barbs:n,shaft:y}=k[Math.min(Math.floor(p/5),29)];if(a.length+n.length===0)continue;let g=l.length/6;const f=(e+.5)/r,x=(h+.5)/s;for(let e=0;e<a.length;e+=2)l[c++]=f,l[c++]=x,l[c++]=a[e],l[c++]=a[e+1]+i,l[c++]=0,l[c++]=p;for(let e=0;e<n.length;e+=2)l[c++]=f,l[c++]=x,l[c++]=n[e],l[c++]=n[e+1]+i,l[c++]=0,l[c++]=p;for(let e=0;e<y.length;e+=2)l[c++]=f,l[c++]=x,l[c++]=y[e],l[c++]=y[e+1]+i,l[c++]=0,l[c++]=p;for(let e=0;e<a.length/6;e++)u[d++]=g,u[d++]=g+1,u[d++]=g+2,g+=3;for(let e=0;e<n.length/8;e++)u[d++]=g,u[d++]=g+1,u[d++]=g+2,u[d++]=g+1,u[d++]=g+2,u[d++]=g+3,g+=4;u[d++]=g+0,u[d++]=g+1,u[d++]=g+2,u[d++]=g+1,u[d++]=g+3,u[d++]=g+2,g+=4}}return{vertexData:new Float32Array(l),indexData:new Uint32Array(u)}}(e,t):function(e,t){const{style:i,inputUnit:r,outputUnit:s,breakValues:a}=t,n=h.fromJSON(r),o=h.fromJSON(s);let l=0,p=0;const{width:u,height:c,mask:d}=e,m=e.pixels[0],y=e.pixels[1],g=d?d.filter(e=>e>0).length:u*c,x=new Float32Array(42*g),w=new Uint32Array(15*g);for(let h=0;h<c;h++)for(let e=0;e<u;e++){const t=h*u+e;if(!d||d[h*u+e]){var v;const r=null!=(v=(y[t]+360)%360/180*Math.PI)?v:2*Math.PI*Math.random(),s=P(m[t],i,n,o,a);for(let i=0;i<f.length;i+=2)x[l++]=(e+.5)/u,x[l++]=(h+.5)/c,x[l++]=f[i],x[l++]=f[i+1]+r,x[l++]=s,x[l++]=m[t];const d=7*(l/42-1);w[p++]=d,w[p++]=d+1,w[p++]=d+2,w[p++]=d+0,w[p++]=d+4,w[p++]=d+3,w[p++]=d+0,w[p++]=d+2,w[p++]=d+3,w[p++]=d+2,w[p++]=d+5,w[p++]=d+3,w[p++]=d+5,w[p++]=d+6,w[p++]=d+3}}return{vertexData:x,indexData:w}}(e,t)}function R(e,t,i,r=[0,0],s=.5){const{width:n,height:o,mask:l}=e,[h,p]=e.pixels,[u,m]=r,y=Math.round((n-u)/i),g=Math.round((o-m)/i),f=y*g,x=new Float32Array(f),w=new Float32Array(f),v=new Uint8Array(f),b="vector-uv"===t;for(let a=0;a<g;a++)for(let e=0;e<y;e++){let t=0;const r=a*y+e,g=Math.max(0,a*i+m),f=Math.max(0,e*i+u),_=Math.min(o,g+i),M=Math.min(n,f+i);for(let e=g;e<_;e++)for(let i=f;i<M;i++){const s=e*n+i;if(!l||l[s]){t++;const e=b?[h[s],p[s]]:[h[s],(360+p[s])%360],[i,a]=b?e:d(e);x[r]+=i,w[r]+=a}}if(t>=(_-g)*(M-f)*(1-s)){v[r]=1;const[e,i]=c([x[r]/t,w[r]/t]);x[r]=e,w[r]=i}else v[r]=0,x[r]=0,w[r]=0}const _=new a.Z({width:y,height:g,pixels:[x,w],mask:v});return _.updateStatistics(),_}},81937:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>J});var r=i(16304),s=i(8651),a=i(72147),n=i(46942),o=(i(12131),i(47648),i(18419)),l=i(8680),h=i(67692),p=i(4706),u=i(93668),c=i(55328),d=i(54704),m=i(98154),y=i(85128),g=i(28062),f=i(95046),x=i(98694),w=i(41186),v=i(34430),b=i(8690),_=i(64713),M=i(61789);const P=o.Z.getLogger("esri.views.2d.layers.imagery.ImageryGraphicsView2D");let k=class extends c.Z{constructor(){var e;super(...arguments),e=this,this.attached=!1,this.container=new b.W,this.updateRequested=!1,this._graphicsView=null,this._projectFullExtentPromise=null,this._dataParameters={exportParametersVersion:0,extents:[],tileResolution:0,time:""},this.type="Graphics",this._graphics=new v.ZP,this._updateGraphics=(0,m.Ds)(function(){var t=(0,r.Z)(function*(t,i){if(!t.stationary)return;const r=t.state,s=new f.Z({xmin:r.extent.xmin,ymin:r.extent.ymin,xmax:r.extent.xmax,ymax:r.extent.ymax,spatialReference:r.spatialReference}),[a,n]=t.state.size,o={};o.timeExtent=e.timeExtent,o.requestAsImageElement=!1,o.signal=i,null==e._projectFullExtentPromise&&(e._projectFullExtentPromise=e._getProjectedFullExtent(s.spatialReference));const l="vector-field"===e.layer.renderer.type?e.layer.renderer.symbolTileSize:50,h=yield e._projectFullExtentPromise,{extent:p,resolution:u,width:c,height:m}=(0,w.BH)(s,a,n,l,h),y=yield e.layer.fetchImage(p,c,m,o),g=e.layer.renderer;if("vector-field"===g.type){const i=y.pixelData.pixelBlock,r=g.sizeVariables[0];!(0,d.pC)(i)||r.minDataValue&&r.maxDataValue||(r.minDataValue=i.statistics[0].minValue,r.maxDataValue=i.statistics[0].maxValue),e._pixelData={extent:p,pixelBlock:i};const s=p.clone().normalize(),a={exportParametersVersion:e.layer.exportImageServiceParameters.version,extents:s,tileResolution:u,time:JSON.stringify(e.timeExtent||"")},n=e._canReuseVectorFieldData(a)?e._dataParameters.extents:[],o=yield g.getGraphicsFromPixelData(y.pixelData,"vector-uv"===e.layer.rasterInfo.dataType,n);if(n.length){const t=e._graphics.items.filter(e=>(0,d.pC)(e.geometry)&&n.some(t=>t.intersects(e.geometry))&&!s.some(t=>t.intersects(e.geometry)));e._graphics.removeMany(t),e._graphics.addMany(o)}else e._graphics.set("items",o);e._graphicsView.update(t),e._dataParameters=a}});return function(e,i){return t.apply(this,arguments)}}())}destroy(){this.attached&&(this.detach(),this.attached=!1),this.updateRequested=!1}get updating(){return!this.attached||this.isUpdating()}update(e){this._updateGraphics(e).catch(e=>{(0,m.D_)(e)||P.error(e)})}hitTest(e,t){const i=this.view.toMap((0,y.vW)(e,t));return Promise.resolve(new p.Z({attributes:{},geometry:i,layer:this.layer}))}attach(){this._graphicsView=new M.Z({view:this.view,graphics:this._graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new _.Z(this.view.featuresTilingScheme)}),this.attached=!0}detach(){this._graphics.destroy(),this._graphicsView.destroy(),this.container.removeChild(this._graphicsView.container),this._graphicsView=null}install(e){this.container.addChild(this._graphicsView.container),e.addChild(this.container)}uninstall(e){this.container.removeChild(this._graphicsView.container),e.removeChild(this.container)}isUpdating(){return this._graphicsView.updating||this.updateRequested}getPixelData(){return this.updating?null:this._pixelData}redraw(){}requestUpdate(){this.updateRequested||(this.updateRequested=!0,this.view.requestUpdate())}_getProjectedFullExtent(e){var t=this;return(0,r.Z)(function*(){try{return yield(0,x.tB)(t.layer.fullExtent,e)}catch(i){try{const i=(yield(0,u.default)(t.layer.url,{query:{option:"footprints",outSR:e.wkid||JSON.stringify(e.toJSON()),f:"json"}})).data.featureCollection.layers[0].layerDefinition.extent;return i?f.Z.fromJSON(i):null}catch{return null}}})()}_canReuseVectorFieldData(e){const t=this._dataParameters.exportParametersVersion===e.exportParametersVersion,i=this._dataParameters.time===e.time,r=Math.abs(this._dataParameters.tileResolution-e.tileResolution)/e.tileResolution<.01,s=this._dataParameters.extents.some(t=>e.extents.some(e=>t.intersects(e)));return t&&i&&r&&s}};(0,s._)([(0,n.Cb)()],k.prototype,"attached",void 0),(0,s._)([(0,n.Cb)()],k.prototype,"container",void 0),(0,s._)([(0,n.Cb)()],k.prototype,"layer",void 0),(0,s._)([(0,n.Cb)()],k.prototype,"timeExtent",void 0),(0,s._)([(0,n.Cb)()],k.prototype,"view",void 0),(0,s._)([(0,n.Cb)()],k.prototype,"updateRequested",void 0),(0,s._)([(0,n.Cb)()],k.prototype,"updating",null),(0,s._)([(0,g.J)({graphics:"Graphics"})],k.prototype,"type",void 0),k=(0,s._)([(0,l.j)("esri.views.2d.layers.imagery.ImageryGraphicsView2D")],k);var C=k,I=i(70713),R=i(28690),V=i(53730),E=i(13161);const q=o.Z.getLogger("esri.views.2d.layers.imagery.ImageryView2D");let D=class extends c.Z{constructor(){super(...arguments),this.attached=!1,this.container=new b.W,this.updateRequested=!1,this.type="Imagery",this._bitmapView=null}destroy(){this.attached&&(this.detach(),this.attached=!1),this.updateRequested=!1}get updating(){return!this.attached||this.isUpdating()}update(e){this.strategy.update(e).catch(e=>{(0,m.D_)(e)||q.error(e)})}detach(){this.strategy.destroy(),this._bitmapView.removeAllChildren(),this.container.removeAllChildren()}hitTest(e,t){const i=this.view.toMap((0,y.vW)(e,t));return Promise.resolve(new p.Z({attributes:{},geometry:i,layer:this.layer}))}attach(){const e=this.layer.version>=10,t=this.layer.version>=10.1?this.layer.imageMaxHeight:2048,i=this.layer.version>=10.1?this.layer.imageMaxWidth:2048;this._bitmapView=new R.c,this.strategy=new E.Z({container:this._bitmapView,imageNormalizationSupported:e,imageMaxHeight:t,imageMaxWidth:i,fetchSource:this._fetchImage.bind(this),requestUpdate:()=>this.requestUpdate()}),this.attached=!0}install(e){this.container.addChild(this._bitmapView),e.addChild(this.container)}uninstall(e){this.container.removeChild(this._bitmapView),e.removeChild(this.container)}redraw(){this.strategy.updateExports(e=>{e.source instanceof HTMLImageElement?e.requestRender():this.layer.applyRenderer({pixelBlock:e.source.pixelBlock}).then(t=>{const i=e.source;i.pixelBlock=t.pixelBlock,i.filter=e=>this.layer.applyFilter(e),this.container.requestRender()})})}requestUpdate(){this.updateRequested||(this.updateRequested=!0,this.view.requestUpdate())}isUpdating(){return this.strategy.updating||this.updateRequested}getPixelData(){if(this.updating)return null;const e=this.strategy.bitmaps;if(1===e.length&&e[0].source)return{extent:e[0].source.extent,pixelBlock:e[0].source.originalPixelBlock};if(e.length>1){const t=this.view.extent,i=e.map(e=>e.source).filter(e=>e.extent&&e.extent.intersects(t)).map(e=>({extent:e.extent,pixelBlock:e.originalPixelBlock})),r=(0,I.Kh)(i,t);return(0,d.pC)(r)?{extent:r.extent,pixelBlock:r.pixelBlock}:null}return null}_fetchImage(e,t,i,r){return(r=r||{}).timeExtent=this.timeExtent,r.requestAsImageElement=!0,this.layer.fetchImage(e,t,i,r).then(e=>e.imageElement?e.imageElement:this.layer.applyRenderer(e.pixelData,{signal:r.signal}).then(t=>{const i=new V.Z(t.pixelBlock,t.extent.clone(),e.pixelData.pixelBlock);return i.filter=e=>this.layer.applyFilter(e),i}))}};(0,s._)([(0,n.Cb)()],D.prototype,"attached",void 0),(0,s._)([(0,n.Cb)()],D.prototype,"container",void 0),(0,s._)([(0,n.Cb)()],D.prototype,"layer",void 0),(0,s._)([(0,n.Cb)()],D.prototype,"strategy",void 0),(0,s._)([(0,n.Cb)()],D.prototype,"timeExtent",void 0),(0,s._)([(0,n.Cb)()],D.prototype,"view",void 0),(0,s._)([(0,n.Cb)()],D.prototype,"updateRequested",void 0),(0,s._)([(0,n.Cb)()],D.prototype,"updating",null),(0,s._)([(0,g.J)({imagery:"Imagery"})],D.prototype,"type",void 0),D=(0,s._)([(0,l.j)("esri.views.2d.layers.imagery.ImageryView2D")],D);var U=D,Z=i(2747),F=i(38975),S=i(17788),T=i(65669),B=i(91941);const A=e=>{let t=class extends e{constructor(){super(...arguments),this.view=null}fetchPopupFeatures(e,t){var i=this;return(0,r.Z)(function*(){const{layer:r}=i;if(!e)throw new Z.Z("imagerylayerview:fetchPopupFeatures","Nothing to fetch without area",{layer:r});const{popupEnabled:s}=r,a=(0,B.V)(r,t);if(!s||!(0,d.pC)(a))throw new Z.Z("imagerylayerview:fetchPopupFeatures","Missing required popupTemplate or popupEnabled",{popupEnabled:s,popupTemplate:a});const n=yield a.getRequiredFields(),o=new T.Z;o.timeExtent=i.timeExtent,o.geometry=e,o.outFields=n,o.outSpatialReference=e.spatialReference;const l=i.view.resolution,h="2d"===i.view.type?new F.Z(l,l,i.view.spatialReference):new F.Z(.5*l,.5*l,i.view.spatialReference),{returnTopmostRaster:p,showNoDataRecords:u}=a.layerOptions||{returnTopmostRaster:!0,showNoDataRecords:!1},c={returnDomainValues:!0,returnTopmostRaster:p,pixelSize:h,showNoDataRecords:u,signal:(0,d.pC)(t)?t.signal:null};return r.queryVisibleRasters(o,c).then(e=>e)})()}canResume(){var e;return!(!super.canResume()||null!=(e=this.timeExtent)&&e.isEmpty)}};return(0,s._)([(0,n.Cb)()],t.prototype,"layer",void 0),(0,s._)([(0,n.Cb)()],t.prototype,"suspended",void 0),(0,s._)([(0,n.Cb)(S.qG)],t.prototype,"timeExtent",void 0),(0,s._)([(0,n.Cb)()],t.prototype,"view",void 0),t=(0,s._)([(0,l.j)("esri.views.layers.ImageryLayerView")],t),t};var N=i(93729),j=i(72445);let O=class extends(A((0,j.y)((0,h.y)(N.Z)))){constructor(){super(...arguments),this._exportImageVersion=-1}initialize(){this.handles.add([(0,a.S1)(this,["layer.blendMode","layer.effects"],e=>{this.subview&&(this.subview.container.blendMode=e)},!0),(0,a.S1)(this,["layer.effect"],e=>{this.subview&&(this.subview.container.effect=e)},!0)])}get pixelData(){return this.updating?null:this.subview.getPixelData()}get updating(){return!(this.subview&&!this.subview.updating)}hitTest(e,t){return this.suspended||!this.subview?Promise.resolve(null):this.subview.hitTest(e,t)}update(e){var t;null==(t=this.subview)||t.update(e)}attach(){this.layer.increaseRasterJobHandlerUsage(),this._setSubView(),this.handles.add([(0,a.S1)(this,"layer.exportImageServiceParameters.version",e=>{this._exportImageVersion!==e&&(this._exportImageVersion=e,this.requestUpdate())}),this.watch("timeExtent",()=>{this.subview.timeExtent=this.timeExtent,this.requestUpdate()}),this.layer.on("redraw",()=>this.subview.redraw()),(0,a.YP)(this.layer,"renderer",()=>this._setSubView())],"imagerylayerview-update")}detach(){this.layer.decreaseRasterJobHandlerUsage(),this.subview.destroy(),this.handles.remove("imagerylayerview-update"),this._exportImageVersion=-1}moveStart(){}viewChange(){}moveEnd(){this.requestUpdate()}doRefresh(){var e=this;return(0,r.Z)(function*(){e.requestUpdate()})()}isUpdating(){return!this.subview||!this.suspended&&this.subview.isUpdating()}_setSubView(){var e;let t="Imagery";var i,r;"vector-field"===(null==(e=this.layer.renderer)?void 0:e.type)&&"lerc"===this.layer.format&&(t="Graphics"),this.subview&&this.subview.type===t||(null==(i=this.subview)||i.uninstall(this.container),null==(r=this.subview)||r.destroy(),this.subview="Imagery"===t?new U({layer:this.layer,view:this.view,timeExtent:this.timeExtent}):new C({layer:this.layer,view:this.view,timeExtent:this.timeExtent}),this.subview.attach(),this.subview.install(this.container),this.subview.container.blendMode=this.layer.blendMode,this.subview.container.effect=this.layer.effect),this.requestUpdate()}};(0,s._)([(0,n.Cb)()],O.prototype,"pixelData",null),(0,s._)([(0,n.Cb)({readOnly:!0})],O.prototype,"updating",null),(0,s._)([(0,n.Cb)()],O.prototype,"subview",void 0),O=(0,s._)([(0,l.j)("esri.views.2d.layers.ImageryLayerView2D")],O);var J=O},72445:(e,t,i)=>{"use strict";i.d(t,{y:()=>h});var r=i(8651),s=i(18419),a=i(98154),n=i(72147),o=i(46942),l=(i(12131),i(47648),i(8680));const h=e=>{let t=class extends e{initialize(){this.handles.add((0,n.on)(this,"layer","refresh",()=>{this.doRefresh().catch(e=>{(0,a.D_)(e)||s.Z.getLogger(this.declaredClass).error(e)})}),"RefreshableLayerView")}};return(0,r._)([(0,o.Cb)()],t.prototype,"layer",void 0),t=(0,r._)([(0,l.j)("esri.layers.mixins.RefreshableLayerView")],t),t}},91941:(e,t,i)=>{"use strict";i.d(t,{V:()=>l,e:()=>n});var r=i(16304),s=i(54704),a=i(21550);function n(e){return o.apply(this,arguments)}function o(){return(o=(0,r.Z)(function*(e,t=e.popupTemplate){if(!(0,s.pC)(t))return[];const i=yield t.getRequiredFields(e.fieldsIndex),{lastEditInfoEnabled:r}=t,{objectIdField:n,typeIdField:o,globalIdField:l,relationships:h}=e;if(i.includes("*"))return["*"];const p=r?yield(0,a.CH)(e):[],u=(0,a.Q0)(e.fieldsIndex,[...i,...p]);return o&&u.push(o),u&&n&&e.fieldsIndex.has(n)&&-1===u.indexOf(n)&&u.push(n),u&&l&&e.fieldsIndex.has(l)&&-1===u.indexOf(l)&&u.push(l),h&&h.forEach(t=>{const{keyField:i}=t;u&&i&&e.fieldsIndex.has(i)&&-1===u.indexOf(i)&&u.push(i)}),u})).apply(this,arguments)}function l(e,t){return e.popupTemplate?e.popupTemplate:(0,s.pC)(t)&&t.defaultPopupTemplateEnabled&&(0,s.pC)(e.defaultPopupTemplate)?e.defaultPopupTemplate:null}}}]);