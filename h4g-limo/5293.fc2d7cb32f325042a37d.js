(self.webpackChunkh4g_limo=self.webpackChunkh4g_limo||[]).push([[5293],{45293:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>ee});var i=r(16304),o=r(8651),n=r(2747),s=r(43435),a=r(54704),p=r(67372),l=r(98154),c=r(72147),d=r(46942),u=(r(12131),r(47648),r(18419),r(41460)),y=r(8680),f=r(92709),h=r(57319),m=r(89775),g=r(66794),v=r(55019);function w(e){return _[function(e){return e instanceof Blob?e.type:function(e){const t=(0,h.Ml)(e);return C[t]||S}(e.url)}(e)]||b}const _={},S="text/plain",b=_[S],C={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip"};for(const te in C)_[C[te]]=te;var I=r(9614);function O(e){const t=(0,a.pC)(e)&&e.origins?e.origins:[void 0];return(r,i)=>{const o=function(e,t,r){if((0,a.pC)(e)&&"resource"===e.type)return function(e,t,r){const i=(0,g.VZ)(t,r);return{type:String,read:(e,t,r)=>{const o=(0,I.r)(e,t,r);return i.type===String?o:"function"==typeof i.type?new i.type({url:o}):void 0},write:{writer(t,o,n,s){if(!s||!s.resources)return"string"==typeof t?void(o[n]=(0,I.t)(t,s)):void(o[n]=t.write({},s));const p=function(e){return(0,a.Wi)(e)?null:"string"==typeof e?e:e.url}(t),l=p?(0,I.t)(p,{...s,verifyItemRelativeUrls:s&&s.verifyItemRelativeUrls?{writtenUrls:s.verifyItemRelativeUrls.writtenUrls,rootPath:null}:null},1):null,c=i.type!==String&&(!(0,f.l)(this)||s&&s.origin&&this.originIdOf(r)>(0,v.M9)(s.origin));s&&s.portalItem&&(0,a.pC)(l)&&!(0,h.YP)(l)?c?function(e,t,r,i,o,n,s,a){const p=s.portalItem.resourceFromPath(i),l=R(r,i,s);w(l)===(0,h.Ml)(p.path)?(T(e,t,p,l,s.resources.toUpdate),o[n]=i):x(e,t,r,i,o,n,s,a)}(this,r,t,l,o,n,s,e):function(e,t,r,i){i.resources.toKeep.push({resource:i.portalItem.resourceFromPath(e)}),t[r]=e}(l,o,n,s):s&&s.portalItem&&((0,a.Wi)(l)||(0,a.pC)((0,I.i)(l))||(0,h.jc)(l)||c)?x(this,r,t,l,o,n,s,e):o[n]=l}}}}(e,t,r);switch((0,a.pC)(e)&&e.type?e.type:"other"){case"other":return{read:!0,write:!0};case"url":{const{read:e,write:t}=I.p;return{read:e,write:t}}}}(e,r,i);for(const e of t){const t=(0,d.CJ)(r,e,i);for(const e in o)t[e]=o[e]}}}function x(e,t,r,i,o,n,s,p){const l=(0,m.D)(),c=R(r,i,s),d=(0,h.v_)((0,a.U2)(p,"prefix"),l),u=`${d}.${w(c)}`,y=s.portalItem.resourceFromPath(u);(0,h.jc)(i)&&s.resources.pendingOperations.push(function(e){return U.apply(this,arguments)}(i).then(e=>{y.path=`${d}.${w(e)}`,o[n]=y.itemRelativeUrl}).catch(()=>{})),T(e,t,y,c,s.resources.toAdd),o[n]=y.itemRelativeUrl}function T(e,t,r,i,o){o.push({resource:r,content:i,finish:r=>{!function(e,t,r){"string"==typeof e[t]?e[t]=r.url:e[t].url=r.url}(e,t,r)}})}function R(e,t,r){return"string"==typeof e?{url:t}:new Blob([JSON.stringify(e.toJSON(r))],{type:"application/json"})}function U(){return(U=(0,i.Z)(function*(e){const t=(yield Promise.resolve().then(r.bind(r,93668))).default,{data:i}=yield t(e,{responseType:"blob"});return i})).apply(this,arguments)}var j,M=r(3523),N=r(10165),Z=r(43839),L=r(83727),P=r(20174),J=r(37001),V=r(27818),D=r(17788),z=r(33250),A=r(93668),K=r(42961),k=r(49533),F=(r(42851),r(69141)),W=r(3257),$=r(66081),q=r(90626),Y=r(78816);let B=j=class extends k.wq{constructor(e){super(e),this.geometry=null,this.type="clip"}writeGeometry(e,t,r,i){if(i.layer&&i.layer.spatialReference&&!i.layer.spatialReference.equals(this.geometry.spatialReference)){if(!(0,q.Up)(e.spatialReference,i.layer.spatialReference))return void(i&&i.messages&&i.messages.push(new W.Z("scenemodification:unsupported","Scene modifications with incompatible spatial references are not supported",{modification:this,spatialReference:i.layer.spatialReference,context:i})));const o=new Y.Z;(0,q.Wt)(e,o,i.layer.spatialReference),t[r]=o.toJSON(i)}else t[r]=e.toJSON(i);delete t[r].spatialReference}clone(){return new j({geometry:(0,F.d9)(this.geometry),type:this.type})}};(0,o._)([(0,d.Cb)({type:Y.Z}),O()],B.prototype,"geometry",void 0),(0,o._)([(0,$.c)(["web-scene","portal-item"],"geometry")],B.prototype,"writeGeometry",null),(0,o._)([(0,d.Cb)({type:["clip","mask","replace"],nonNullable:!0}),O()],B.prototype,"type",void 0),B=j=(0,o._)([(0,y.j)("esri.layers.support.SceneModification")],B);var G,E=B;let H=G=class extends((0,k.eC)(K.Z.ofType(E))){constructor(e){super(e),this.url=null}toJSON(e){return this.toArray().map(t=>t.toJSON(e)).filter(e=>!!e.geometry)}clone(){return new G({url:this.url,items:this.items.map(e=>e.clone())})}_readModifications(e,t){for(const r of e)this.add(E.fromJSON(r,t))}static fromJSON(e,t){const r=new G;return r._readModifications(e,t),r}static fromUrl(e,t,r){return(0,i.Z)(function*(){const i={url:(0,h.mN)(e),origin:"service"},o=yield(0,A.default)(e,{responseType:"json",signal:(0,a.U2)(r,"signal")}),n=t.toJSON(),s=[];for(const e of o.data)s.push(E.fromJSON({...e,geometry:{...e.geometry,spatialReference:n}},i));return new G({url:e,items:s})})()}};(0,o._)([(0,d.Cb)({type:String})],H.prototype,"url",void 0),H=G=(0,o._)([(0,y.j)("esri.layers.support.SceneModifications")],H);var Q=H;let X=class extends((0,V.V)((0,Z.Y)((0,L.q)((0,P.I)((0,J.M)((0,p.R)((0,N.V)(M.Z)))))))){constructor(...e){super(...e),this.handles=new s.Z,this.geometryType="mesh",this.operationalLayerType="IntegratedMeshLayer",this.type="integrated-mesh",this.nodePages=null,this.materialDefinitions=null,this.textureSetDefinitions=null,this.geometryDefinitions=null,this.serviceUpdateTimeStamp=null,this.profile="mesh-pyramids",this.modifications=null,this._modificationsSource=null,this.elevationInfo=null,this.path=null}destroy(){this.handles.destroy()}initialize(){this.handles.add((0,c.on)(this,"modifications","after-changes",()=>this.modifications=this.modifications,null,null,!0))}normalizeCtorArgs(e,t){return"string"==typeof e?{url:e,...t}:e}readModifications(e,t,r){this._modificationsSource={url:(0,I.f)(e,r),context:r}}load(e){var t=this;return(0,i.Z)(function*(){return t.addResolvingPromise(t._doLoad(e)),t})()}_doLoad(e){var t=this;return(0,i.Z)(function*(){const r=(0,a.U2)(e,"signal");try{yield t.loadFromPortal({supportedTypes:["Scene Service"]},e)}catch(i){(0,l.r9)(i)}if(yield t._fetchService(r),(0,a.pC)(t._modificationsSource)){const r=yield Q.fromUrl(t._modificationsSource.url,t.spatialReference,e);t.setAtOrigin("modifications",r,t._modificationsSource.context.origin),t._modificationsSource=null}yield t._fetchIndexAndUpdateExtent(t.nodePages,r)})()}beforeSave(){if(!(0,a.Wi)(this._modificationsSource))return this.load().then(()=>{},()=>{})}saveAs(e,t){var r=this;return(0,i.Z)(function*(){return r._debouncedSaveOperations(1,{...t,getTypeKeywords:()=>r._getTypeKeywords(),portalItemLayerType:"integrated-mesh"},e)})()}save(){var e=this;return(0,i.Z)(function*(){const t={getTypeKeywords:()=>e._getTypeKeywords(),portalItemLayerType:"integrated-mesh"};return e._debouncedSaveOperations(0,t)})()}validateLayer(e){if(e.layerType&&"IntegratedMesh"!==e.layerType)throw new n.Z("integrated-mesh-layer:layer-type-not-supported","IntegratedMeshLayer does not support this layer type",{layerType:e.layerType});if(isNaN(this.version.major)||isNaN(this.version.minor))throw new n.Z("layer:service-version-not-supported","Service version is not supported.",{serviceVersion:this.version.versionString,supportedVersions:"1.x"});if(this.version.major>1)throw new n.Z("layer:service-version-too-new","Service version is too new.",{serviceVersion:this.version.versionString,supportedVersions:"1.x"})}_getTypeKeywords(){return["IntegratedMeshLayer"]}};(0,o._)([(0,d.Cb)({type:String,readOnly:!0})],X.prototype,"geometryType",void 0),(0,o._)([(0,d.Cb)({type:["show","hide"]})],X.prototype,"listMode",void 0),(0,o._)([(0,d.Cb)({type:["IntegratedMeshLayer"]})],X.prototype,"operationalLayerType",void 0),(0,o._)([(0,d.Cb)({json:{read:!1},readOnly:!0})],X.prototype,"type",void 0),(0,o._)([(0,d.Cb)({type:z.U4,readOnly:!0})],X.prototype,"nodePages",void 0),(0,o._)([(0,d.Cb)({type:[z.QI],readOnly:!0})],X.prototype,"materialDefinitions",void 0),(0,o._)([(0,d.Cb)({type:[z.Yh],readOnly:!0})],X.prototype,"textureSetDefinitions",void 0),(0,o._)([(0,d.Cb)({type:[z.H3],readOnly:!0})],X.prototype,"geometryDefinitions",void 0),(0,o._)([(0,d.Cb)({readOnly:!0})],X.prototype,"serviceUpdateTimeStamp",void 0),(0,o._)([(0,d.Cb)({type:Q}),O({origins:["web-scene","portal-item"],type:"resource",prefix:"modifications"})],X.prototype,"modifications",void 0),(0,o._)([(0,u.r)(["web-scene","portal-item"],"modifications")],X.prototype,"readModifications",null),(0,o._)([(0,d.Cb)(D.PV)],X.prototype,"elevationInfo",void 0),(0,o._)([(0,d.Cb)({type:String,json:{origins:{"web-scene":{read:!0,write:!0},"portal-item":{read:!0,write:!0}},read:!1}})],X.prototype,"path",void 0),X=(0,o._)([(0,y.j)("esri.layers.IntegratedMeshLayer")],X);var ee=X}}]);