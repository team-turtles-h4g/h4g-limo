(self.webpackChunkh4g_limo=self.webpackChunkh4g_limo||[]).push([[492],{40492:(e,t,r)=>{"use strict";r.r(t),r.d(t,{addOrUpdateResource:()=>c,contentToBlob:()=>g,fetchResources:()=>u,getSiblingOfSameType:()=>R,getSiblingOfSameTypeI:()=>b,removeAllResources:()=>f,removeResource:()=>d,splitPrefixFileNameAndExtension:()=>v});var n=r(16304),s=r(93668),o=r(2747),a=r(54704),l=r(57319);function u(e){return i.apply(this,arguments)}function i(){return(i=(0,n.Z)(function*(e,t={},r){yield e.load(r);const n=(0,l.v_)(e.itemUrl,"resources"),{start:s=1,num:o=10,sortOrder:u="asc",sortField:i="created"}=t,c={query:{start:s,num:o,sortOrder:u,sortField:i,token:e.apiKey},signal:(0,a.U2)(r,"signal")},p=yield e.portal._request(n,c);return{total:p.total,nextStart:p.nextStart,resources:p.resources.map(({created:t,size:r,resource:n})=>({created:new Date(t),size:r,resource:e.resourceFromPath(n)}))}})).apply(this,arguments)}function c(e,t,r,n){return p.apply(this,arguments)}function p(){return(p=(0,n.Z)(function*(e,t,r,n){if(!e.hasPath())throw new o.Z(`portal-item-resource-${t}:invalid-path`,"Resource does not have a valid path");const s=e.portalItem;yield s.load(n);const u=(0,l.v_)(s.userItemUrl,"add"===t?"addResources":"updateResources"),[i,c]=y(e.path),p=yield g(r),d=new FormData;return i&&"."!==i&&d.append("resourcesPrefix",i),d.append("fileName",c),d.append("file",p,c),d.append("f","json"),(0,a.pC)(n)&&n.access&&d.append("access",n.access),yield s.portal._request(u,{method:"post",body:d,signal:(0,a.U2)(n,"signal")}),e})).apply(this,arguments)}function d(e,t,r){return h.apply(this,arguments)}function h(){return(h=(0,n.Z)(function*(e,t,r){if(!t.hasPath())throw new o.Z("portal-item-resources-remove:invalid-path","Resource does not have a valid path");yield e.load(r);const n=(0,l.v_)(e.userItemUrl,"removeResources");yield e.portal._request(n,{method:"post",query:{resource:t.path},signal:(0,a.U2)(r,"signal")}),t.portalItem=null})).apply(this,arguments)}function f(e,t){return m.apply(this,arguments)}function m(){return(m=(0,n.Z)(function*(e,t){yield e.load(t);const r=(0,l.v_)(e.userItemUrl,"removeResources");return e.portal._request(r,{method:"post",query:{deleteAll:!0},signal:(0,a.U2)(t,"signal")})})).apply(this,arguments)}function y(e){const t=e.lastIndexOf("/");return-1===t?[".",e]:[e.slice(0,t),e.slice(t+1)]}function v(e){const[t,r]=function(e){const t=(0,l.Ml)(e);return(0,a.Wi)(t)?[e,""]:[e.slice(0,e.length-t.length-1),`.${t}`]}(e),[n,s]=y(t);return[n,s,r]}function g(e){return _.apply(this,arguments)}function _(){return(_=(0,n.Z)(function*(e){return e instanceof Blob?e:(yield(0,s.default)(e.url,{responseType:"blob"})).data})).apply(this,arguments)}function R(e,t){if(!e.hasPath())return null;const[r,,n]=v(e.path);return e.portalItem.resourceFromPath((0,l.v_)(r,t+n))}function b(e,t){if(!e.hasPath())return null;const[r,,n]=v(e.path);return e.portalItem.resourceFromPath((0,l.v_)(r,t+n))}}}]);